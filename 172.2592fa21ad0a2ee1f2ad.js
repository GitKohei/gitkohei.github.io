(self.webpackChunkudonarium_lily_gk=self.webpackChunkudonarium_lily_gk||[]).push([[172],{172:function(Xe,Je,Ze){var e,z,d,W,c,n,I,g,M,B,Z,x,r,v,u,X,_,N,A;Ze(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function j(z,$){return"number"==typeof z&&"number"==typeof $?z-$:z["$-"]($)}var $,d,U,R,M,B,Y,x=[],r=e.nil,v=e.$$$,u=e.$$,X=e.module,_=e.truthy,N=e.send,A=e.send2,t=e.hash2;return $=x,Y=[B=X(x[0],"I18n")].concat($),e.class_variable_set(Y[0],"@@fallbacks",r),d=e.get_singleton_class(B),M=[d].concat(Y),e.def(d,"$fallbacks",U=function(){var I,n,c;return e.class_variable_set(M[1],"@@fallbacks",_(c=null==(I=M[1].$$cvars["@@fallbacks"])?r:I)?c:v(v(u(M,"I18n"),"Locale"),"Fallbacks").$new()),_(n=u(M,"Thread").$current()["$[]"]("i18n_fallbacks"))?n:null==(I=M[1].$$cvars["@@fallbacks"])?r:I},U.$$arity=0),e.def(d,"$fallbacks=",R=function(I){var g,n;return e.class_variable_set(M[1],"@@fallbacks",_(I["$is_a?"](u(M,"Array")))?v(v(u(M,"I18n"),"Locale"),"Fallbacks").$new(I):I),n=["i18n_fallbacks",null==(g=M[1].$$cvars["@@fallbacks"])?r:g],N(u(M,"Thread").$current(),"[]=",e.to_a(n)),n[j(n.length,1)]},R.$$arity=1),void function(d,E){var U=[X(d,"Backend")].concat(E);!function(R,W){var c,n,o,a,I=X(R,"Fallbacks"),g=[I].concat(W);e.def(I,"$translate",c=function(h,b,p){try{var y,C=c.$$p,P=this,f=r,l=r,D=r,w=r,H=r,s=r;for(C&&(c.$$p=null),H=0,s=arguments.length,w=new Array(s);H<s;H++)w[H]=arguments[H];return null==p&&(p=u(g,"EMPTY_HASH")),!_(p.$fetch("fallback",!0))||_(p["$[]"]("fallback_in_progress"))?A(P,e.find_super_dispatcher(P,"translate",c,!1,!0),"translate",w,C):(_(p["$[]"]("default"))&&(f=P["$extract_non_symbol_default!"](p)),l=p.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),N(u(g,"I18n").$fallbacks()["$[]"](h),"each",[],((y=function(V){var $e,ne=null==y.$$s?this:y.$$s;null==V&&(V=r);try{return N(ne,"catch",["exception"],(($e=function(){var pe=null==$e.$$s?this:$e.$$s,Se=r;if(Se=A(pe,e.find_iter_super_dispatcher(pe,"translate",$e.$$def||y.$$def||c,!1,!1),"translate",[V,b,l],null),_(Se["$nil?"]()))return r;_(h.$to_s()["$!="](V.$to_s()))&&pe.$on_fallback(h,V,b,p),e.ret(Se)}).$$s=ne,$e.$$arity=0,$e))}catch(he){if(!e.rescue(he,[v(u(g,"I18n"),"InvalidLocale")]))throw he;try{return r}finally{e.pop_exception()}}}).$$s=P,y.$$arity=1,y)),_(_(D=p["$key?"]("default"))?p["$[]"]("default")["$nil?"]():D)?r:_(f)?A(P,e.find_super_dispatcher(P,"translate",c,!1,!0),"translate",[h,r,p.$merge(t(["default"],{default:f}))],null):P.$throw("exception",v(u(g,"I18n"),"MissingTranslation").$new(h,b,p)))}catch(S){if(S===e.returner)return S.$v;throw S}},c.$$arity=-3),e.def(I,"$extract_non_symbol_default!",n=function(h){var b,C,y=r,K=r;return y=[h["$[]"]("default")].$flatten(),C=N(y,"detect",[],((b=function(f){return null==f&&(f=r),f["$is_a?"](u(g,"Symbol"))["$!"]()}).$$s=this,b.$$arity=1,b)),_(C)&&(K=["default",y["$[]"](0,y.$index(C))],N(h,"[]=",e.to_a(K)),j(K.length,1)),C},n.$$arity=1),e.def(I,"$exists?",o=function(h,b,p){try{var y,C=o.$$p,P=this,f=r,l=r,D=r;for(C&&(o.$$p=null),l=0,D=arguments.length,f=new Array(D);l<D;l++)f[l]=arguments[l];return null==p&&(p=u(g,"EMPTY_HASH")),_(p.$fetch("fallback",!0))?(N(u(g,"I18n").$fallbacks()["$[]"](h),"each",[],((y=function(H){var s=null==y.$$s?this:y.$$s;null==H&&(H=r);try{if(!_(A(s,e.find_iter_super_dispatcher(s,"exists?",y.$$def||o,!1,!1),"exists?",[H,b],null)))return r;e.ret(!0)}catch(S){if(!e.rescue(S,[v(u(g,"I18n"),"InvalidLocale")]))throw S;try{return r}finally{e.pop_exception()}}}).$$s=P,y.$$arity=1,y)),!1):A(P,e.find_super_dispatcher(P,"exists?",o,!1,!0),"exists?",f,C)}catch(w){if(w===e.returner)return w.$v;throw w}},o.$$arity=-3),I.$private(),e.def(I,"$on_fallback",a=function(h,b,p,y){return r},a.$$arity=4)}(U[0],U)}(Y[0],Y)},Opal.modules["bcdice/randomizer"]=function(e){function j(d,E){return"number"==typeof d&&"number"==typeof E?d>E:d["$>"](E)}function Z(d,E){return"number"==typeof d&&"number"==typeof E?d+E:d["$+"](E)}function x(d,E){return"number"==typeof d&&"number"==typeof E?d<=E:d["$<="](E)}function r(d,E){return"number"==typeof d&&"number"==typeof E?d-E:d["$-"](E)}function v(d,E){return"number"==typeof d&&"number"==typeof E?d*E:d["$*"](E)}var E,I,n,o,a,m,h,b,p,y,C,K,P,g,c,U,_=[],N=e.nil,A=e.$$$,t=e.$$,$=e.klass,B=e.truthy,Y=e.send;return E=_,I=U=[(0,e.module)(_[0],"BCDice")].concat(E),g=$(U[0],null,"Randomizer"),c=[g].concat(I),g.$$prototype.rand_results=g.$$prototype.detailed_rand_results=N,e.const_set(c[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(c[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(c[0],"UPPER_LIMIT_RANDS",1e4),e.def(g,"$initialize",n=function(){return this.rand_results=[],this.detailed_rand_results=[]},n.$$arity=0),g.$attr_reader("rand_results"),g.$attr_reader("detailed_rand_results"),e.const_set(c[0],"DetailedRandResult",t(c,"Struct").$new("kind","sides","value")),e.def(g,"$roll_barabara",o=function(l,D){var w,s,H=this;return B(j(Z(H.rand_results.$size(),l),t(c,"UPPER_LIMIT_RANDS")))&&H.$raise(t(c,"TooManyRandsError")),B(B(s=x(l,0))?s:j(l,t(c,"UPPER_LIMIT_DICE_TIMES")))?[]:Y(t(c,"Array"),"new",[l],((w=function(){return(null==w.$$s?this:w.$$s).$roll_once(D)}).$$s=H,w.$$arity=0,w))},o.$$arity=2),e.def(g,"$roll_sum",a=function(l,D){return this.$roll_barabara(l,D).$sum()},a.$$arity=2),e.def(g,"$roll_once",m=function(l){var w,H=N;return B(B(w=x(l,0))?w:j(l,t(c,"UPPER_LIMIT_DICE_SIDES")))?0:(H=this.$rand_inner(l),this.$push_to_detail("normal",l,H),H)},m.$$arity=1),e.def(g,"$roll_index",h=function(l){return r(this.$roll_once(l),1)},h.$$arity=1),e.def(g,"$roll_tens_d10",b=function(){var w,D=N;return(D=this.$rand_inner(10))["$=="](10)&&(D=0),w=v(D,10),this.$push_to_detail("tens_d10",10,w),w},b.$$arity=0),e.def(g,"$roll_d9",p=function(){var D;return D=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,D),D},p.$$arity=0),e.def(g,"$roll_d66",y=function(l){var D,s,H=N;return H=Y(t(c,"Array"),"new",[2],((D=function(){return(null==D.$$s?this:D.$$s).$roll_once(6)}).$$s=this,D.$$arity=0,D)),s=l,A(t(c,"D66SortType"),"ASC")["$==="](s)?H["$sort!"]():A(t(c,"D66SortType"),"DESC")["$==="](s)&&H["$sort!"]()["$reverse!"](),Z(v(H["$[]"](0),10),H["$[]"](1))},y.$$arity=1),g.$private(),e.def(g,"$rand_inner",C=function(l){var w,D=this;return B(function(d,E){return"number"==typeof d&&"number"==typeof E?d>=E:d["$>="](E)}(D.rand_results.$size(),t(c,"UPPER_LIMIT_RANDS")))&&D.$raise(t(c,"TooManyRandsError")),w=D.$random(l),D.rand_results["$<<"]([w,l]),w},C.$$arity=1),e.def(g,"$random",K=function(l){return Z(t(c,"Kernel").$rand(l),1)},K.$$arity=1),e.def(g,"$push_to_detail",P=function(l,D,w){var s;return s=t(c,"DetailedRandResult").$new(l,D,w),this.detailed_rand_results.$push(s)},P.$$arity=3),void function(R,W,I){[$(R,W,"TooManyRandsError")].concat(I)}(U[0],t(U,"StandardError"),U)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var A,B,U,I,g,c,n,R,W,d,z,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.klass,_=e.truthy;return A=Z,B=z=[u(Z[0],"BCDice")].concat(A),U=d=[u(z[0],"DiceTable")].concat(B),R=X(d[0],null,"RollResult"),W=[R].concat(U),R.$$prototype.table_name=R.$$prototype.value=R.$$prototype.body=x,e.def(R,"$initialize",I=function(a,m,h){var b=this;return b.table_name=a,b.value=m,b.body=h},I.$$arity=3),R.$attr_reader("table_name"),R.$attr_reader("value"),R.$attr_reader("body"),e.def(R,"$to_s",g=function(){var a=this;return a.table_name+"("+a.value+") \uff1e "+a.body},g.$$arity=0),e.def(R,"$last_body",c=function(){var a=this;return _(a.body["$is_a?"](v(W,"RollResult")))?a.body.$last_body():a.body},c.$$arity=0),void e.def(R,"$empty?",n=function(){return!1},n.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,Y,R,g,c,W,I,E,$,x=[],r=e.nil,u=e.$$,X=e.module,_=e.klass,N=e.truthy;return t=x,Y=$=[X(x[0],"BCDice")].concat(t),R=E=[X($[0],"DiceTable")].concat(Y),W=_(E[0],null,"ChainTable"),I=[W].concat(R),W.$$prototype.times=W.$$prototype.sides=W.$$prototype.items=W.$$prototype.name=r,e.def(W,"$initialize",g=function(o,a,m){var h=this,b=r;return h.name=o,h.items=m.$freeze(),b=/(\d+)D(\d+)/i.$match(a),N(b)||h.$raise(u(I,"ArgumentError"),"Unexpected table type: "+a),h.times=b["$[]"](1).$to_i(),h.sides=b["$[]"](2).$to_i()},g.$$arity=3),void e.def(W,"$roll",c=function(o){var m,h,a=this,b=r;return h=function(A,t){return"number"==typeof A&&"number"==typeof t?A-t:A["$-"](t)}(m=o.$roll_sum(a.times,a.sides),a.times),b=a.items["$[]"](h),N(b["$respond_to?"]("roll"))&&(b=b.$roll(o)),u(I,"RollResult").$new(a.name,m,b)},c.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function x(z,$){return"number"==typeof z&&"number"==typeof $?z-$:z["$-"]($)}var $,E,I,n,o,a,g,c,U,Y,v=[],u=e.nil,_=e.$$,N=e.module,A=e.klass,t=e.hash2;return $=v,E=Y=[N(v[0],"BCDice")].concat($),I=U=[N(Y[0],"DiceTable")].concat(E),g=A(U[0],null,"D66GridTable"),c=[g].concat(I),g.$$prototype.name=g.$$prototype.items=u,e.defs(g,"$from_i18n",n=function(h,b){var y=u;return y=_(c,"I18n").$t(h,t(["locale","raise"],{locale:b,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items"))},n.$$arity=2),e.def(g,"$initialize",o=function(h,b){return this.name=h,this.items=b.$freeze()},o.$$arity=2),void e.def(g,"$roll",a=function(h){var p,y,C,K,P;return p=h.$roll_once(6),y=h.$roll_once(6),C=function(z,$){return"number"==typeof z&&"number"==typeof $?z+$:z["$+"]($)}(function(z,$){return"number"==typeof z?10*z:z["$*"](10)}(p),y),K=x(p,1),P=x(y,1),_(c,"RollResult").$new(this.name,C,this.items["$[]"](K)["$[]"](P))},a.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var A,B,U,I,g,R,W,d,z,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.klass,_=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),A=Z,B=z=[u(Z[0],"BCDice")].concat(A),U=d=[u(z[0],"DiceTable")].concat(B),R=X(d[0],v(d,"D66GridTable"),"D66HalfGridTable"),W=[R].concat(U),e.defs(R,"$from_i18n",I=function(n,o){var m=x;return m=v(W,"I18n").$t(n,_(["locale","raise"],{locale:o,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("items_1_2_3"),m["$[]"]("items_4_5_6"))},I.$$arity=2),void e.def(R,"$initialize",g=function(n,o,a){return this.name=n,this.items=[o,o,o,a,a,a].$freeze()},g.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var A,B,U,I,g,R,W,d,z,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.klass,_=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),A=Z,B=z=[u(Z[0],"BCDice")].concat(A),U=d=[u(z[0],"DiceTable")].concat(B),R=X(d[0],v(d,"D66GridTable"),"D66OneThirdTable"),W=[R].concat(U),e.defs(R,"$from_i18n",I=function(n,o){var m=x;return m=v(W,"I18n").$t(n,_(["locale","raise"],{locale:o,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("items_1_2"),m["$[]"]("items_3_4"),m["$[]"]("items_5_6"))},I.$$arity=2),void e.def(R,"$initialize",g=function(n,o,a,m){return this.name=n,this.items=[o,o,a,a,m,m].$freeze()},g.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var $,E,I,n,o,a,g,c,U,Y,r=[],v=e.nil,u=e.$$$,X=e.$$,_=e.module,N=e.klass,A=e.hash2,t=e.truthy;return $=r,E=Y=[_(r[0],"BCDice")].concat($),I=U=[_(Y[0],"DiceTable")].concat(E),g=N(U[0],null,"D66Table"),c=[g].concat(I),g.$$prototype.sort_type=g.$$prototype.items=g.$$prototype.name=v,e.defs(g,"$from_i18n",n=function(h,b){var C,y=v;return y=X(c,"I18n").$t(h,A(["locale"],{locale:b})),C=X(c,"D66SortType").$const_get(y["$[]"]("d66_sort_type")),this.$new(y["$[]"]("name"),C,y["$[]"]("items"))},n.$$arity=2),e.def(g,"$initialize",o=function(h,b,p){var y=this;return y.name=h,y.sort_type=b,y.items=p.$freeze()},o.$$arity=3),void e.def(g,"$roll",a=function(h){var y,P,b=this,p=v,C=v,K=v;return p=h.$roll_barabara(2,6),y=b.sort_type,u(X(c,"D66SortType"),"ASC")["$==="](y)?p["$sort!"]():u(X(c,"D66SortType"),"DESC")["$==="](y)&&p["$sort!"]()["$reverse!"](),C=function(z,$){return"number"==typeof z&&"number"==typeof $?z+$:z["$+"]($)}(function(z,$){return"number"==typeof z?10*z:z["$*"](10)}(p["$[]"](0)),p["$[]"](1)),K=t(P=b.items["$[]"](C))?P:b.items["$[]"](C.$to_s()),t(K["$respond_to?"]("roll"))&&(K=K.$roll(h)),X(c,"RollResult").$new(b.name,C,K)},a.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function j(B,Y){return"number"==typeof B&&"number"==typeof Y?B+Y:B["$+"](Y)}var Y,c,a,n,U,W,E,v=[],u=e.nil,_=e.$$,N=e.module,A=e.klass,t=e.hash2,z=e.send,$=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),Y=v,U=E=[N(v[0],"BCDice")].concat(Y),c=W=[N(E[0],"DiceTable")].concat(U),[n=A(W[0],_(W,"D66Table"),"D66LeftRangeTable")].concat(c),void e.def(n,"$initialize",a=function(h,b,p){var y,f,P=this;return a.$$p&&(a.$$p=null),f=t([],{}),z(p,"each",[],((y=function(l){function D(w){return l.apply(this,arguments)}return D.toString=function(){return l.toString()},D}(function(l){var w,s,V,D=null==y.$$s?this:y.$$s;return null==l&&(l=u),w=e.to_ary(l),V=null==w[1]?u:w[1],z(null==w[0]?u:w[0],"each",[],((s=function($e){var pe;return null==$e&&($e=u),z(V,"each_with_index",[],((pe=function(Be,ze){var Ie,fe;return null==Be&&(Be=u),null==ze&&(ze=u),Ie=j(function(B,Y){return"number"==typeof B?10*B:B["$*"](10)}($e),j(ze,1)),z(f,"[]=",e.to_a(fe=[Ie,Be])),fe[function(B,Y){return"number"==typeof B?B-1:B["$-"](1)}(fe.length)]}).$$s=null==s.$$s?this:s.$$s,pe.$$arity=2,pe))}).$$s=D,s.$$arity=1,s))})).$$s=P,y.$$arity=1,y)),$(P,e.find_super_dispatcher(P,"initialize",a,!1,!0),"initialize",[h,b,f],null)},a.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var $,E,I,n,o,g,c,U,Y,v=[],u=e.nil,_=e.$$,N=e.module,A=e.klass,t=e.truthy;return $=v,E=Y=[N(v[0],"BCDice")].concat($),I=U=[N(Y[0],"DiceTable")].concat(E),g=A(U[0],null,"D66ParityTable"),c=[g].concat(I),g.$$prototype.odd=g.$$prototype.even=g.$$prototype.name=u,e.def(g,"$initialize",n=function(m,h,b){var p=this;return p.name=m,p.odd=h.$freeze(),p.even=b.$freeze()},n.$$arity=3),void e.def(g,"$roll",o=function(m){var p,C,K,h=this,b=u;return b=m.$roll_once(6),p=m.$roll_once(6),C=(t(b["$odd?"]())?h.odd:h.even)["$[]"](function(z,$){return"number"==typeof z?z-1:z["$-"](1)}(p)),K=function(z,$){return"number"==typeof z&&"number"==typeof $?z+$:z["$+"]($)}(function(z,$){return"number"==typeof z?10*z:z["$*"](10)}(b),p),_(c,"RollResult").$new(h.name,K,C)},o.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var z,d,W,c,n,I,g,M,B,r=[],v=e.nil,X=e.$$,_=e.module,N=e.klass,A=e.send;return z=r,d=B=[_(r[0],"BCDice")].concat(z),W=M=[_(B[0],"DiceTable")].concat(d),I=N(M[0],null,"D66RangeTable"),g=[I].concat(W),I.$$prototype.items=I.$$prototype.name=v,e.def(I,"$initialize",c=function(a,m){return this.name=a,this.items=m.$freeze()},c.$$arity=2),void e.def(I,"$roll",n=function(a){var m,b,p,y,t,h=this,C=v;return b=a.$roll_once(6),p=a.$roll_once(6),y=function(t,z){return"number"==typeof t&&"number"==typeof z?t+z:t["$+"](z)}("number"==typeof(t=b)?10*t:t["$*"](10),p),C=A(h.items,"find",[],((m=function(P){return null==P&&(P=v),P["$[]"](0)["$include?"](y)}).$$s=h,m.$$arity=1,m)),X(g,"RollResult").$new(h.name,y,C["$[]"](1))},n.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var B,M,g,o,a,m,h,b,p,y,C,K,c,n,R,d,v=[],u=e.nil,_=e.$$,N=e.module,A=e.klass,t=e.send,z=e.truthy;return B=v,M=d=[N(v[0],"BCDice")].concat(B),g=R=[N(d[0],"DiceTable")].concat(M),c=A(R[0],null,"RangeTable"),n=[c].concat(g),c.$$prototype.name=c.$$prototype.items=c.$$prototype.num_of_dice=c.$$prototype.num_of_sides=c.$$prototype.formatter=u,e.const_set(n[0],"RollResult",t(_(n,"Struct"),"new",["sum","values","content","formatted"],((o=function(){return(null==o.$$s?this:o.$$s).$alias_method("to_s","formatted")}).$$s=c,o.$$arity=0,o))),e.const_set(n[0],"Item",_(n,"Struct").$new("range","content")),e.const_set(n[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(n[0],"DEFAULT_FORMATTER",t(c,"lambda",[],($$2=function(P){function f(l,D){return P.apply(this,arguments)}return f.toString=function(){return P.toString()},f}(function(P,f){return null==$$2.$$s||$$2,null==P&&(P=u),null==f&&(f=u),P.$name()+"("+f.$sum()+") \uff1e "+f.$content()}),$$2.$$s=c,$$2.$$arity=2,$$2))),c.$attr_reader("name"),c.$attr_reader("num_of_dice"),c.$attr_reader("num_of_sides"),e.def(c,"$initialize",a=function(f,l,D){var S,w=a.$$p,H=w||u,s=this,V=u;return w&&(a.$$p=null),w&&(a.$$p=null),s.name=f.$freeze(),s.formatter=z(S=H)?S:_(n,"DEFAULT_FORMATTER"),V=_(n,"DICE_ROLL_METHOD_RE").$match(l),z(V)||s.$raise(_(n,"ArgumentError"),s.name+": invalid dice roll method: "+l),s.num_of_dice=V["$[]"](1).$to_i(),s.num_of_sides=V["$[]"](2).$to_i(),s.$store(D)},a.$$arity=3),e.def(c,"$fetch",m=function(f){var l,w,D=this;return w=t(D.items,"find",[],((l=function(s){return null==s&&(s=u),s.$range()["$include?"](f)}).$$s=D,l.$$arity=1,l)),z(w)||D.$raise(_(n,"RangeError"),D.name+": value is out of range: "+f),w},m.$$arity=1),e.def(c,"$roll",h=function(f){var w,H,s,$,l=this,D=u;return w=(D=f.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),H=_(n,"RollResult").$new(w,D,l.$fetch(w).$content()),s=[l.formatter["$[]"](l,H)],t(H,"formatted=",e.to_a(s)),"number"==typeof($=s.length)||$["$-"](1),H},h.$$arity=1),c.$private(),e.def(c,"$store",b=function(f){var l,D,w,s,S,H=this;return s=t(f,"map",[],((l=function(ne,$e){return null==ne&&(ne=u),null==$e&&($e=u),[(null==l.$$s?this:l.$$s).$coerce_to_int_range(ne),$e]}).$$s=H,l.$$arity=2,l)),S=t(s,"sort_by",[],((D=function(ne,$e){return null==ne&&(ne=u),null==$e&&($e=u),ne.$min()}).$$s=H,D.$$arity=2,D)),H.$assert_min_sum_is_covered(S),H.$assert_max_sum_is_covered(S),H.$assert_no_gap_or_overlap_in_ranges(S),H.items=t(S,"map",[],(w=function(ne,$e){return null==ne&&(ne=u),null==$e&&($e=u),_(n,"Item").$new(ne,$e.$freeze()).$freeze()},w.$$s=H,w.$$arity=2,w)).$freeze(),H},b.$$arity=1),e.def(c,"$coerce_to_int_range",p=function(f){var D,w=u;return D=f,_(n,"Integer")["$==="](D)?_(n,"Range").$new(f,f):_(n,"Range")["$==="](D)&&z(z(w=f.$begin()["$is_a?"](_(n,"Integer")))?f.$end()["$is_a?"](_(n,"Integer")):w)?f:this.$raise(_(n,"TypeError"),this.name+": "+f+" ("+f.$class()+") must be an Integer or a Range with Integers ")},p.$$arity=1),e.def(c,"$assert_min_sum_is_covered",y=function(f){var D,l=this,w=u;return D=l.num_of_dice,w=f.$first()["$[]"](0),z(w["$include?"](D))||l.$raise(_(n,"RangeError"),l.name+": min value ("+D+") is not covered: "+w),l},y.$$arity=1),e.def(c,"$assert_max_sum_is_covered",C=function(f){var D,l=this,w=u;return D=function($,B){return"number"==typeof $&&"number"==typeof B?$*B:$["$*"](B)}(l.num_of_dice,l.num_of_sides),w=f.$last()["$[]"](0),z(w["$include?"](D))||l.$raise(_(n,"RangeError"),l.name+": max value ("+D+") is not covered: "+w),l},C.$$arity=1),void e.def(c,"$assert_no_gap_or_overlap_in_ranges",K=function(f){var l;return t(f,"each_cons",[2],((l=function(H,s){var $e,he,$,S=null==l.$$s?this:l.$$s,V=u,ne=u;return null==S.name&&(S.name=u),null==H&&(H=u),null==s&&(s=u),V=H["$[]"](0),ne=s["$[]"](0),he="number"==typeof($=$e=V.$max())?$+1:$["$+"](1),z(ne["$include?"]($e))&&S.$raise(_(n,"RangeError"),S.name+": Range overlap: "+V+" and "+ne),z(ne["$include?"](he))?u:S.$raise(_(n,"RangeError"),S.name+": Range gap: "+V+" and "+ne)}).$$s=this,l.$$arity=2,l)),this},K.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,Y,R,n,m,h,b,o,a,I,E,$,x=[],r=e.nil,v=e.$$$,u=e.$$,X=e.module,_=e.klass,N=e.send;return t=x,Y=$=[X(x[0],"BCDice")].concat(t),R=E=[X($[0],"DiceTable")].concat(Y),n=I=[_(E[0],null,"SaiFicSkillTable")].concat(R),o=_(I[0],null,"Category"),a=[o].concat(n),o.$$prototype.name=r,e.def(o,"$initialize",m=function(y,C,K,P){var f,l=this;return l.name=y,l.skills=N(C.$map(),"with_index",[2],((f=function(D){function w(H,s){return D.apply(this,arguments)}return w.toString=function(){return D.toString()},w}(function(D,w){return null==D&&(D=r),null==w&&(w=r),v(u(a,"SaiFicSkillTable"),"Skill").$new(y,D,K,w,P)})).$$s=l,f.$$arity=2,f)),l.dice=K},m.$$arity=4),e.def(o,"$roll",h=function(y){return this.$skills()["$[]"](function(A,t){return"number"==typeof A?A-2:A["$-"](2)}(y.$roll_sum(2,6)))},h.$$arity=1),e.def(o,"$to_s",b=function(){return this.name},b.$$arity=0),void o.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var A,B,c,a,m,n,U,W,d,z,Z=[],x=e.nil,u=e.module,X=e.klass,_=e.hash2;return A=Z,B=z=[u(Z[0],"BCDice")].concat(A),U=d=[u(z[0],"DiceTable")].concat(B),c=W=[X(d[0],null,"SaiFicSkillTable")].concat(U),[n=X(W[0],null,"Skill")].concat(c),n.$$prototype.s_format=n.$$prototype.category_dice=n.$$prototype.row_dice=n.$$prototype.category_name=n.$$prototype.name=x,e.def(n,"$initialize",a=function(b,p,y,C,K){var P=this;return P.category_name=b,P.name=p,P.category_dice=y,P.row_dice=C,P.s_format=K},a.$$arity=5),e.def(n,"$to_s",m=function(){var b=this;return b.$format(b.s_format,_(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))},m.$$arity=0),void n.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var Y,U,c,a,m,h,b,p,y,C,n,o,W,E,x=e.top,r=[],v=e.nil,u=e.$$$,X=e.$$,_=e.module,N=e.klass,A=e.hash2,t=e.send,$=e.truthy;return x.$require("bcdice/dice_table/sai_fic_skill_table/category"),x.$require("bcdice/dice_table/sai_fic_skill_table/skill"),Y=r,U=E=[_(r[0],"BCDice")].concat(Y),c=W=[_(E[0],"DiceTable")].concat(U),n=N(W[0],null,"SaiFicSkillTable"),o=[n].concat(c),n.$$prototype.rtt=n.$$prototype.rtt_format=n.$$prototype.rct=n.$$prototype.rct_format=n.$$prototype.rttn=n.$$prototype.rttn_format=n.$$prototype.categories=v,e.defs(n,"$from_i18n",a=function(P,f,l){var D,w,H,s,$e,ne=v;if(null==l)l=A([],{});else if(!l.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(D=l.$$smap.rtt)&&(D=v),null==(w=l.$$smap.rct)&&(w=v),null==(H=l.$$smap.rttn)&&(H=v),$e=(ne=X(o,"I18n").$t("RTT",A(["locale","raise","default"],{locale:f,raise:!1,default:A([],{})})).$merge(X(o,"I18n").$t(P,A(["locale","raise"],{locale:f,raise:!0}))))["$[]"]("items"),ne=t(ne,"select",[],((s=function(he){function pe(Se,Be){return he.apply(this,arguments)}return pe.toString=function(){return he.toString()},pe}(function(he,pe){return null==he&&(he=v),null==pe&&(pe=v),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](he)})).$$s=this,s.$$arity=2,s)),this.$new($e,e.to_hash(ne).$merge(A(["rtt","rct","rttn"],{rtt:D,rct:w,rttn:H})))},a.$$arity=-3),e.const_set(o[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(o[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(o[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(o[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(n,"$initialize",m=function(P,f){var l,D,w,H,s,S,V,ne,$e=this;if(null==f)f=A([],{});else if(!f.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(l=f.$$smap.rtt)&&(l=v),null==(D=f.$$smap.rct)&&(D=v),null==(w=f.$$smap.rttn)&&(w=v),null==(H=f.$$smap.rtt_format)&&(H=X(o,"DEFAULT_RTT")),null==(s=f.$$smap.rct_format)&&(s=X(o,"DEFAULT_RCT")),null==(S=f.$$smap.rttn_format)&&(S=X(o,"DEFAULT_RTTN")),null==(V=f.$$smap.s_format)&&(V=X(o,"DEFAULT_S")),$e.categories=t(P.$map(),"with_index",[1],((ne=function(pe,Se){var ze,Ie,fe;return null==pe&&(pe=v),null==Se&&(Se=v),Ie=null==(ze=e.to_ary(pe))[0]?v:ze[0],fe=null==ze[1]?v:ze[1],u(X(o,"SaiFicSkillTable"),"Category").$new(Ie,fe,Se,V)}).$$s=$e,ne.$$arity=2,ne.$$has_top_level_mlhs_arg=!0,ne)),$e.rtt=l,$e.rct=D,$e.rttn=w.$to_a(),$e.rtt_format=H,$e.rct_format=s,$e.rttn_format=S},m.$$arity=-2),e.const_set(o[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),n.$attr_reader("categories"),e.def(n,"$roll_command",h=function(P,f){var D,l=this,w=v,H=v,s=v;return $(["RTT",l.rtt]["$include?"](D=f))?l.$format_skill(l.rtt_format,l.$roll_skill(P)):$(["RCT",l.rct]["$include?"](D))?(w=l.$roll_category(P),l.$format(l.rct_format,A(["category_dice","category_name"],{category_dice:w.$dice(),category_name:w.$name()}))):$($(H=s=X(o,"RTTN").$index(D))?H:s=l.rttn.$index(D))?l.$format_skill(l.rttn_format,l.categories["$[]"](s).$roll(P)):v},h.$$arity=2),e.def(n,"$roll_category",b=function(P){return this.categories["$[]"](function(B,Y){return"number"==typeof B?B-1:B["$-"](1)}(P.$roll_once(6)))},b.$$arity=1),e.def(n,"$roll_skill",p=function(P){return this.$roll_category(P).$roll(P)},p.$$arity=1),e.def(n,"$prefixes",y=function(){var P=this;return function(B,Y){return"number"==typeof B&&"number"==typeof Y?B+Y:B["$+"](Y)}(["RTT[1-6]?","RCT",P.rtt,P.rct],P.rttn).$compact()},y.$$arity=0),n.$private(),void e.def(n,"$format_skill",C=function(P,f){return this.$format(P,A(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:f.$category_dice(),row_dice:f.$row_dice(),category_name:f.$category_name(),skill_name:f.$name(),text:f.$to_s()}))},C.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var z,d,W,c,n,o,a,I,g,M,B,x=[],r=e.nil,u=e.$$,X=e.module,_=e.klass,N=e.hash2,A=e.truthy;return z=x,d=B=[X(x[0],"BCDice")].concat(z),W=M=[X(B[0],"DiceTable")].concat(d),I=_(M[0],null,"Table"),g=[I].concat(W),I.$$prototype.times=I.$$prototype.sides=I.$$prototype.name=I.$$prototype.items=r,e.defs(I,"$from_i18n",c=function(h,b){var y=r;return y=u(g,"I18n").$t(h,N(["locale"],{locale:b})),this.$new(y["$[]"]("name"),y["$[]"]("type"),y["$[]"]("items"))},c.$$arity=2),e.def(I,"$initialize",n=function(h,b,p){var y=this,C=r;return y.name=h,y.items=p.$freeze(),C=/(\d+)D(\d+)/i.$match(b),A(C)||y.$raise(u(g,"ArgumentError"),"Unexpected table type: "+b),y.times=C["$[]"](1).$to_i(),y.sides=C["$[]"](2).$to_i()},n.$$arity=3),e.def(I,"$roll",o=function(h){var p,b=this;return p=h.$roll_sum(b.times,b.sides),b.$choice(p)},o.$$arity=1),void e.def(I,"$choice",a=function(h){var p,b=this;return p=function(t,z){return"number"==typeof t&&"number"==typeof z?t-z:t["$-"](z)}(h,b.times),u(g,"RollResult").$new(b.name,h,b.items["$[]"](p))},a.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var j=e.top;return j.$require("bcdice/dice_table/roll_result"),j.$require("bcdice/dice_table/chain_table"),j.$require("bcdice/dice_table/d66_grid_table"),j.$require("bcdice/dice_table/d66_half_grid_table"),j.$require("bcdice/dice_table/d66_one_third_table"),j.$require("bcdice/dice_table/d66_left_range_table"),j.$require("bcdice/dice_table/d66_parity_table"),j.$require("bcdice/dice_table/d66_range_table"),j.$require("bcdice/dice_table/d66_table"),j.$require("bcdice/dice_table/range_table"),j.$require("bcdice/dice_table/sai_fic_skill_table"),j.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var _,z,B,A,Z=[],u=e.module;return _=Z,z=A=[u(Z[0],"BCDice")].concat(_),B=[u(A[0],"D66SortType")].concat(z),e.const_set(B[0],"NO_SORT","no_sort"),e.const_set(B[0],"ASC","asc"),e.const_set(B[0],"DESC","desc"),void function(t,z){var B=[u(t,"RoundType")].concat(z);e.const_set(B[0],"CEIL","ceil"),e.const_set(B[0],"FLOOR","floor"),e.const_set(B[0],"ROUND","round")}(A[0],A)},Opal.modules["bcdice/translate"]=function(e){var A,B,E,Y,d,z,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.hash2;return A=Z,B=z=[u(Z[0],"BCDice")].concat(A),Y=u(z[0],"Translate"),d=[Y].concat(B),void e.def(Y,"$translate",E=function(U,R){var W,I=this;if(null==I.locale&&(I.locale=x),null==R)R=X([],{});else if(!R.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return W=e.kwrestargs(R,{}),v(d,"I18n").$translate(U,X(["locale","raise"],{locale:I.locale,raise:!0}).$merge(e.to_hash(W)))},E.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function j(A,t){return"number"==typeof A&&"number"==typeof t?A-t:A["$-"](t)}var t,o,h,b,p,y,C,d,U,R,W,I,g,c,n,E,M,$,x=[],r=e.nil,_=e.klass,N=e.send;return t=x,d=$=[(0,e.module)(x[0],"BCDice")].concat(t),M=[E=_($[0],null,"Result")].concat(d),E.$$prototype.secret=E.$$prototype.success=E.$$prototype.failure=E.$$prototype.critical=E.$$prototype.fumble=r,[o=e.get_singleton_class(E)].concat(M),e.def(o,"$success",h=function(P){var f;return N(this.$new(),"tap",[],((f=function(D){function w(H){return D.apply(this,arguments)}return w.toString=function(){return D.toString()},w}(function(D){var H=r;return null==D&&(D=r),N(D,"text=",e.to_a(H=[P])),j(H.length,1),N(D,"success=",e.to_a(H=[!0])),H[j(H.length,1)]})).$$s=this,f.$$arity=1,f))},h.$$arity=1),e.def(o,"$failure",b=function(P){var f;return N(this.$new(),"tap",[],((f=function(w){var s=r;return null==w&&(w=r),N(w,"text=",e.to_a(s=[P])),j(s.length,1),N(w,"failure=",e.to_a(s=[!0])),s[j(s.length,1)]}).$$s=this,f.$$arity=1,f))},b.$$arity=1),e.def(o,"$critical",p=function(P){var f;return N(this.$new(),"tap",[],((f=function(w){var s=r;return null==w&&(w=r),N(w,"text=",e.to_a(s=[P])),j(s.length,1),N(w,"critical=",e.to_a(s=[!0])),j(s.length,1),N(w,"success=",e.to_a(s=[!0])),s[j(s.length,1)]}).$$s=this,f.$$arity=1,f))},p.$$arity=1),e.def(o,"$fumble",y=function(P){var f;return N(this.$new(),"tap",[],((f=function(w){var s=r;return null==w&&(w=r),N(w,"text=",e.to_a(s=[P])),j(s.length,1),N(w,"fumble=",e.to_a(s=[!0])),j(s.length,1),N(w,"failure=",e.to_a(s=[!0])),s[j(s.length,1)]}).$$s=this,f.$$arity=1,f))},y.$$arity=1),e.def(o,"$nothing",C=function(){return"nothing"},C.$$arity=0),e.def(E,"$initialize",U=function(a){var m=this;return null==a&&(a=r),m.text=a,m.rands=r,m.detailed_rands=r,m.secret=!1,m.success=!1,m.failure=!1,m.critical=!1,m.fumble=!1},U.$$arity=-1),E.$attr_accessor("text","rands","detailed_rands"),E.$attr_writer("secret","success","failure","critical","fumble"),e.def(E,"$secret?",R=function(){return this.secret},R.$$arity=0),e.def(E,"$success?",W=function(){return this.success},W.$$arity=0),e.def(E,"$failure?",I=function(){return this.failure},I.$$arity=0),e.def(E,"$critical?",g=function(){return this.critical},g.$$arity=0),e.def(E,"$fumble?",c=function(){return this.fumble},c.$$arity=0),void e.def(E,"$condition=",n=function(a){return this.success=a,this.failure=a["$!"]()},n.$$arity=1)},Opal.modules["racc/parser"]=function(e){function j(U,R){return"number"==typeof U&&"number"==typeof R?U<R:U["$<"](R)}function Z(U,R){return"number"==typeof U&&"number"==typeof R?U-R:U["$-"](R)}function x(U,R){return"number"==typeof U&&"number"==typeof R?U+R:U["$+"](R)}function r(U,R){return"number"==typeof U&&"number"==typeof R?U>=R:U["$>="](R)}function v(U,R){return"number"==typeof U&&"number"==typeof R?U>R:U["$>"](R)}function u(U,R){return"number"==typeof U&&"number"==typeof R?U<=R:U["$<="](R)}var g,c,n,R,I,A=[],t=e.nil,z=e.$$$,$=e.$$,B=e.module,Y=e.klass,d=e.truthy,E=e.gvars,M=e.send;return R=A,g=(I=[B(A[0],"Racc")].concat(R))[0],c=$(I,"StandardError"),n=I,[Y(g,c,"ParseError")].concat(n),d(z("::","ParseError","skip_raise")?"constant":t)||e.const_set(A[0],"ParseError",z($(A,"Racc"),"ParseError")),function(U,R){var o,h,b,p,y,C,K,P,f,l,D,w,H,s,S,V,ne,$e,he,pe,Se,Be,ze,Ce,Ie,a,m,I=[B(U,"Racc")].concat(R);d($(I,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(I[0],"Racc_No_Extensions",!1),o=I,a=Y(I[0],null,"Parser"),m=[a].concat(o),a.$$prototype.yydebug=a.$$prototype.racc_debug_out=a.$$prototype.racc_error_status=a.$$prototype.racc_t=a.$$prototype.racc_vstack=a.$$prototype.racc_val=a.$$prototype.racc_state=a.$$prototype.racc_tstack=t,e.const_set(m[0],"Racc_Runtime_Version","1.4.6"),e.const_set(m[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(m[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(m[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(m[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(m[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(m[0],"Racc_Runtime_Core_Version",$(m,"Racc_Runtime_Core_Version_R")),e.const_set(m[0],"Racc_Runtime_Core_Revision",$(m,"Racc_Runtime_Core_Revision_R")),e.const_set(m[0],"Racc_Runtime_Type","ruby"),e.defs($(m,"Parser"),"$racc_runtime_type",h=function(){return $(m,"Racc_Runtime_Type")},h.$$arity=0),e.def(a,"$_racc_setup",b=function(){var O,J,i=this,q=t,T=t,k=t;return null==E.stderr&&(E.stderr=t),d(z(i.$class(),"Racc_debug_parser"))||(i.yydebug=!1),d(null!=(O=i.yydebug)&&O!==t?"instance-variable":t)||(i.yydebug=!1),d(i.yydebug)&&(d(null!=(J=i.racc_debug_out)&&J!==t?"instance-variable":t)||(i.racc_debug_out=E.stderr),i.racc_debug_out=d(q=i.racc_debug_out)?q:E.stderr),T=z(i.$class(),"Racc_arg"),d(j(T.$size(),14))&&(M(T,"[]=",e.to_a(k=[13,!0])),Z(k.length,1)),T},b.$$arity=0),e.def(a,"$_racc_init_sysvars",p=function(){var O=this;return O.racc_state=[0],O.racc_tstack=[],O.racc_vstack=[],O.racc_t=t,O.racc_val=t,O.racc_read_next=!0,O.racc_user_yyerror=!1,O.racc_error_status=0},p.$$arity=0),e.def(a,"$do_parse",y=function(){return this.$__send__($(m,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},y.$$arity=0),e.def(a,"$next_token",C=function(){return this.$raise($(m,"NotImplementedError"),this.$class()+"#next_token is not defined")},C.$$arity=0),e.def(a,"$_racc_do_parse_rb",K=function(O,J){var i,T,k=this,Q=t,ee=t,te=t,de=t,ie=t,me=t,ye=t,le=t;return i=e.to_ary(O),Q=null==i[0]?t:i[0],ee=null==i[1]?t:i[1],te=null==i[2]?t:i[2],de=null==i[3]?t:i[3],ie=null==i[10]?t:i[10],k.$_racc_init_sysvars(),me=ye=le=t,M(k,"catch",["racc_end_parse"],((T=function(){var Ee,qe,ae=null==T.$$s?this:T.$$s,De=t,Ne=t,Ae=t;for(null==ae.racc_state&&(ae.racc_state=t),null==ae.racc_read_next&&(ae.racc_read_next=t),null==ae.racc_t&&(ae.racc_t=t),null==ae.yydebug&&(ae.yydebug=t),null==ae.racc_val&&(ae.racc_val=t);d(!0);)for(d(le=de["$[]"](ae.racc_state["$[]"](-1)))?(d(ae.racc_read_next)&&d(ae.racc_t["$!="](0))&&(qe=ae.$next_token(),Ee=e.to_ary(qe),me=null==Ee[0]?t:Ee[0],ae.racc_val=null==Ee[1]?t:Ee[1],ae.racc_t=d(me)?d(De=ie["$[]"](me))?De:1:0,d(ae.yydebug)&&ae.$racc_read_token(ae.racc_t,me,ae.racc_val),ae.racc_read_next=!1),le=x(le,ae.racc_t),d(d(Ne=d(Ae=r(le,0))?ye=Q["$[]"](le):Ae)?ee["$[]"](le)["$=="](ae.racc_state["$[]"](-1)):Ne)||(ye=te["$[]"](ae.racc_state["$[]"](-1)))):ye=te["$[]"](ae.racc_state["$[]"](-1));d(ye=ae.$_racc_evalact(ye,O)););}).$$s=k,T.$$arity=0,T))},K.$$arity=2),e.def(a,"$yyparse",P=function(O,J){return this.$__send__($(m,"Racc_YY_Parse_Method"),O,J,this.$_racc_setup(),!0)},P.$$arity=2),e.def(a,"$_racc_yyparse_rb",f=function(O,J,i,q){var T,Q,te=t,de=t,re=t,ie=t,ye=t,le=t,be=t;return T=e.to_ary(i),te=null==T[0]?t:T[0],de=null==T[1]?t:T[1],re=null==T[2]?t:T[2],ie=null==T[3]?t:T[3],ye=null==T[10]?t:T[10],this.$_racc_init_sysvars(),le=t,be=t,M(this,"catch",["racc_end_parse"],((Q=function(){var De,xe=null==Q.$$s?this:Q.$$s;for(null==xe.racc_state&&(xe.racc_state=t);!d(be=ie["$[]"](xe.racc_state["$[]"](-1)));)for(;d(le=xe.$_racc_evalact(re["$[]"](xe.racc_state["$[]"](-1)),i)););return M(O,"__send__",[J],((De=function(Ae,Te){var Me,Ue,ke=null==De.$$s?this:De.$$s,Le=t,Ge=t,je=t,We=t,ue=t,F=t,ce=t;for(null==ke.racc_t&&(ke.racc_t=t),null==ke.racc_state&&(ke.racc_state=t),null==ke.racc_read_next&&(ke.racc_read_next=t),null==Ae&&(Ae=t),null==Te&&(Te=t),ke.racc_t=d(Ae)?d(Le=ye["$[]"](Ae))?Le:1:0,ke.racc_val=Te,ke.racc_read_next=!1,be=x(be,ke.racc_t),d(d(Me=d(Ue=r(be,0))?le=te["$[]"](be):Ue)?de["$[]"](be)["$=="](ke.racc_state["$[]"](-1)):Me)||(le=re["$[]"](ke.racc_state["$[]"](-1)));d(le=ke.$_racc_evalact(le,i)););for(;d(d(Ge=d(je=(be=ie["$[]"](ke.racc_state["$[]"](-1)))["$!"]())?je:ke.racc_read_next["$!"]())?Ge:ke.racc_t["$=="](0));)for(d(d(We=d(ue=d(F=d(ce=be)?be=x(be,ke.racc_t):ce)?r(be,0):F)?le=te["$[]"](be):ue)?de["$[]"](be)["$=="](ke.racc_state["$[]"](-1)):We)||(le=re["$[]"](ke.racc_state["$[]"](-1)));d(le=ke.$_racc_evalact(le,i)););}).$$s=xe,De.$$arity=2,De))}).$$s=this,Q.$$arity=0,Q))},f.$$arity=4),e.def(a,"$_racc_evalact",l=function(O,J){var i,T,re,me,k=this,Q=t,ee=t,de=t,ie=t,ye=t,le=t,be=t,ae=t,xe=t,Ee=t;if(Q=null==(i=e.to_ary(J))[0]?t:i[0],ee=null==i[1]?t:i[1],de=null==i[3]?t:i[3],re=null==i[11]?t:i[11],ie=null==i[12]?t:i[12],d(d(me=v(O,0))?j(O,re):me))d(v(k.racc_error_status,0))&&(k.racc_t["$=="](1)||(k.racc_error_status=Z(k.racc_error_status,1))),k.racc_vstack.$push(k.racc_val),k.racc_state.$push(O),k.racc_read_next=!0,d(k.yydebug)&&(k.racc_tstack.$push(k.racc_t),k.$racc_shift(k.racc_t,k.racc_tstack,k.racc_vstack));else if(d(d(ye=j(O,0))?v(O,ie["$-@"]()):ye)){if(le=M(k,"catch",["racc_jump"],((T=function(){var De=null==T.$$s?this:T.$$s;return null==De.racc_state&&(De.racc_state=t),De.racc_state.$push(De.$_racc_do_reduce(J,O)),!1}).$$s=k,T.$$arity=0,T)),d(le)){if(1["$==="](be=le))return k.racc_user_yyerror=!0,ie["$-@"]();if(2["$==="](be))return re;k.$raise("[Racc Bug] unknown jump code")}}else if(O["$=="](re))d(k.yydebug)&&k.$racc_accept(),k.$throw("racc_end_parse",k.racc_vstack["$[]"](0));else{if(O["$=="](ie["$-@"]())){for((0)["$==="](be=k.racc_error_status)?d(J["$[]"](21))||k.$on_error(k.racc_t,k.racc_val,k.racc_vstack):3["$==="](be)&&(k.racc_t["$=="](0)&&k.$throw("racc_end_parse",t),k.racc_read_next=!0),k.racc_user_yyerror=!1,k.racc_error_status=3;d(!0)&&(!d(ae=de["$[]"](k.racc_state["$[]"](-1)))||(ae=x(ae,1),!d(d(xe=d(Ee=r(ae,0))?O=Q["$[]"](ae):Ee)?ee["$[]"](ae)["$=="](k.racc_state["$[]"](-1)):xe)));)d(u(k.racc_state.$size(),1))&&k.$throw("racc_end_parse",t),k.racc_state.$pop(),k.racc_vstack.$pop(),d(k.yydebug)&&(k.racc_tstack.$pop(),k.$racc_e_pop(k.racc_state,k.racc_tstack,k.racc_vstack));return O}k.$raise("[Racc Bug] unknown action "+O.$inspect())}return d(k.yydebug)&&k.$racc_next_state(k.racc_state["$[]"](-1),k.racc_state),t},l.$$arity=2),e.def(a,"$_racc_do_reduce",D=function(O,J){var i,re,me,Ee,qe,De,ke,T=this,Q=t,ee=t,te=t,de=t,ie=t,ye=t,le=t,be=t,ae=t,xe=t,Ne=t,Ae=t,Te=t,He=t,Fe=t,Le=t;return Q=null==(i=e.to_ary(O))[4]?t:i[4],ee=null==i[5]?t:i[5],te=null==i[6]?t:i[6],de=null==i[7]?t:i[7],re=null==i[8]?t:i[8],ie=null==i[9]?t:i[9],me=null==i[13]?t:i[13],ye=T.racc_state,le=T.racc_vstack,be=T.racc_tstack,ae=function(U,R){return"number"==typeof U?-3*U:U["$*"](-3)}(J),xe=ie["$[]"](ae),Ee=ie["$[]"](x(ae,1)),qe=ie["$[]"](x(ae,2)),De=[],d(T.yydebug)&&(Ne=be["$[]"](xe["$-@"](),xe)),Ae=le["$[]"](xe["$-@"](),xe),d(T.yydebug)&&(Te=[xe["$-@"](),xe,De],M(be,"[]=",e.to_a(Te)),Z(Te.length,1)),Te=[xe["$-@"](),xe,De],M(le,"[]=",e.to_a(Te)),Z(Te.length,1),Te=[xe["$-@"](),xe,De],M(ye,"[]=",e.to_a(Te)),Z(Te.length,1),d(me)?le.$push(T.$__send__(qe,Ae,le,Ae["$[]"](0))):le.$push(T.$__send__(qe,Ae,le)),be.$push(Ee),d(T.yydebug)&&T.$racc_reduce(Ne,Ee,be,le),ke=Z(Ee,re),d(ae=de["$[]"](ke))&&(ae=x(ae,ye["$[]"](-1)),d(d(He=d(Fe=r(ae,0))?Le=Q["$[]"](ae):Fe)?ee["$[]"](ae)["$=="](ke):He))?Le:te["$[]"](ke)},D.$$arity=2),e.def(a,"$on_error",w=function(O,J,i){var T,q=this;return q.$raise($(m,"ParseError"),q.$sprintf("\nparse error on value %s (%s)",J.$inspect(),d(T=q.$token_to_str(O))?T:"?"))},w.$$arity=3),e.def(a,"$yyerror",H=function(){return this.$throw("racc_jump",1)},H.$$arity=0),e.def(a,"$yyaccept",s=function(){return this.$throw("racc_jump",2)},s.$$arity=0),e.def(a,"$yyerrok",S=function(){return this.racc_error_status=0},S.$$arity=0),e.def(a,"$racc_read_token",V=function(O,J,i){var q=this;return q.racc_debug_out.$print("read    "),q.racc_debug_out.$print(J.$inspect(),"(",q.$racc_token2str(O),") "),q.racc_debug_out.$puts(i.$inspect()),q.racc_debug_out.$puts()},V.$$arity=3),e.def(a,"$racc_shift",ne=function(O,J,i){var q=this;return q.racc_debug_out.$puts("shift   "+q.$racc_token2str(O)),q.$racc_print_stacks(J,i),q.racc_debug_out.$puts()},ne.$$arity=3),e.def(a,"$racc_reduce",$e=function(O,J,i,q){var T,k=this,Q=t;return(Q=k.racc_debug_out).$print("reduce "),d(O["$empty?"]())?Q.$print(" <none>"):M(O,"each",[],((T=function(te){return null==te&&(te=t),Q.$print(" ",(null==T.$$s?this:T.$$s).$racc_token2str(te))}).$$s=k,T.$$arity=1,T)),Q.$puts(" --\x3e "+k.$racc_token2str(J)),k.$racc_print_stacks(i,q),k.racc_debug_out.$puts()},$e.$$arity=4),e.def(a,"$racc_accept",he=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},he.$$arity=0),e.def(a,"$racc_e_pop",pe=function(O,J,i){var q=this;return q.racc_debug_out.$puts("error recovering mode: pop token"),q.$racc_print_states(O),q.$racc_print_stacks(J,i),q.racc_debug_out.$puts()},pe.$$arity=3),e.def(a,"$racc_next_state",Se=function(O,J){var i=this;return i.racc_debug_out.$puts("goto    "+O),i.$racc_print_states(J),i.racc_debug_out.$puts()},Se.$$arity=2),e.def(a,"$racc_print_stacks",Be=function(O,J){var i,T=t;return(T=this.racc_debug_out).$print("        ["),M(O,"each_index",[],((i=function(Q){return null==Q&&(Q=t),T.$print(" (",(null==i.$$s?this:i.$$s).$racc_token2str(O["$[]"](Q))," ",J["$[]"](Q).$inspect(),")")}).$$s=this,i.$$arity=1,i)),T.$puts(" ]")},Be.$$arity=2),e.def(a,"$racc_print_states",ze=function(O){var J,q=t;return(q=this.racc_debug_out).$print("        ["),M(O,"each",[],((J=function(k){return null==k&&(k=t),q.$print(" ",k)}).$$s=this,J.$$arity=1,J)),q.$puts(" ]")},ze.$$arity=1),e.def(a,"$racc_token2str",Ce=function(O){var i;return d(i=z(this.$class(),"Racc_token_to_s_table")["$[]"](O))?i:this.$raise("[Racc Bug] can't convert token "+O+" to string")},Ce.$$arity=1),e.def(a,"$token_to_str",Ie=function(O){return z(this.$class(),"Racc_token_to_s_table")["$[]"](O)},Ie.$$arity=1)}(A[0],A)},Opal.modules["bcdice/arithmetic/node"]=function(e){function j(A,t){return"number"==typeof A&&"number"==typeof t?A/t:A["$/"](t)}var t,Y,U,I,g,c,a,m,h,b,p,y,n,o,W,E,$,x=[],r=e.nil,v=e.$$$,u=e.$$,X=e.module,_=e.klass,N=e.send2;return t=x,Y=$=[X(x[0],"BCDice")].concat(t),U=E=[X($[0],"Arithmetic")].concat(Y),function(I,g,c){var a,m,h,b,p,n=_(I,null,"BinaryOp");[n].concat(c),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",a=function(C,K,P){var f=this;return f.lhs=C,f.op=K,f.rhs=P},a.$$arity=3),e.def(n,"$eval",m=function(C){var f,K=this,P=r;return P=K.lhs.$eval(C),f=K.rhs.$eval(C),P.$send(K.op,f)},m.$$arity=1),e.def(n,"$output",h=function(){var C=this;return""+C.lhs.$output()+C.op+C.rhs.$output()},h.$$arity=0),e.def(n,"$s_exp",b=function(){var C=this;return"("+C.$op_for_s_exp()+" "+C.lhs.$s_exp()+" "+C.rhs.$s_exp()+")"},b.$$arity=0),e.def(n,"$op_for_s_exp",p=function(){return this.op},p.$$arity=0)}((W=[X(E[0],"Node")].concat(U))[0],0,W),I=W[0],g=u(W,"BinaryOp"),c=W,n=_(I,g,"DivideBase"),o=[n].concat(c),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",a=function(K,P){return a.$$p&&(a.$$p=null),N(this,e.find_super_dispatcher(this,"initialize",a,!1,!0),"initialize",[K,"/",P],null)},a.$$arity=2),e.def(n,"$eval",m=function(K){var f,P=this,l=r;return f=P.lhs.$eval(K),(l=P.rhs.$eval(K))["$=="](0)&&P.$raise(u(o,"ZeroDivisionError")),P.$divide_and_round(f,l,K)},m.$$arity=1),e.def(n,"$output",h=function(){var K=h.$$p,f=this,l=r,D=r,w=r;for(K&&(h.$$p=null),D=0,w=arguments.length,l=new Array(w);D<w;D++)l[D]=arguments[D];return""+N(f,e.find_super_dispatcher(f,"output",h,!1,!0),"output",l,K)+f.$rounding_method()},h.$$arity=0),n.$private(),e.def(n,"$rounding_method",b=function(){return v(this.$class(),"ROUNDING_METHOD")},b.$$arity=0),e.def(n,"$op_for_s_exp",p=function(){return""+this.op+this.$rounding_method()},p.$$arity=0),e.def(n,"$divide_and_round",y=function(K,P,f){return this.$raise(u(o,"NotImplementedError"))},y.$$arity=3),function(I,g,c){var a,n=_(I,g,"DivideWithGameSystemDefault"),o=[n].concat(c);e.const_set(o[0],"ROUNDING_METHOD",""),n.$private(),e.def(n,"$divide_and_round",a=function(h,b,p){var C;return C=p,v(u(o,"RoundType"),"CEIL")["$==="](C)?j(h.$to_f(),b).$ceil():v(u(o,"RoundType"),"ROUND")["$==="](C)?j(h.$to_f(),b).$round():j(h,b).$to_i()},a.$$arity=3)}(W[0],u(W,"DivideBase"),W),function(I,g,c){var a,n=_(I,g,"DivideWithCeil"),o=[n].concat(c);e.const_set(o[0],"ROUNDING_METHOD","C"),n.$private(),e.def(n,"$divide_and_round",a=function(h,b,p){return j(h.$to_f(),b).$ceil()},a.$$arity=3)}(W[0],u(W,"DivideBase"),W),function(I,g,c){var a,n=_(I,g,"DivideWithRound"),o=[n].concat(c);e.const_set(o[0],"ROUNDING_METHOD","R"),n.$private(),e.def(n,"$divide_and_round",a=function(h,b,p){return j(h.$to_f(),b).$round()},a.$$arity=3)}(W[0],u(W,"DivideBase"),W),function(I,g,c){var a,n=_(I,g,"DivideWithFloor"),o=[n].concat(c);e.const_set(o[0],"ROUNDING_METHOD","F"),n.$private(),e.def(n,"$divide_and_round",a=function(h,b,p){return j(h,b).$to_i()},a.$$arity=3)}(W[0],u(W,"DivideBase"),W),function(I,g,c){var a,m,h,b,n=_(I,null,"Negative");[n].concat(c),n.$$prototype.body=r,e.def(n,"$initialize",a=function(y){return this.body=y},a.$$arity=1),e.def(n,"$eval",m=function(y){return this.body.$eval(y)["$-@"]()},m.$$arity=1),e.def(n,"$output",h=function(){return"-"+this.body.$output()},h.$$arity=0),e.def(n,"$s_exp",b=function(){return"(- "+this.body.$s_exp()+")"},b.$$arity=0)}(W[0],0,W),function(I,g,c){var a,m,h,b,n=_(I,null,"Parenthesis");[n].concat(c),n.$$prototype.expr=r,e.def(n,"$initialize",a=function(y){return this.expr=y},a.$$arity=1),e.def(n,"$eval",m=function(y){return this.expr.$eval(y)},m.$$arity=1),e.def(n,"$output",h=function(){return"("+this.expr.$output()+")"},h.$$arity=0),e.def(n,"$s_exp",b=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},b.$$arity=0)}(W[0],0,W),void function(I,g,c){var a,m,h,n=_(I,null,"Number");[n].concat(c),n.$$prototype.value=r,e.def(n,"$initialize",a=function(p){return this.value=p},a.$$arity=1),e.def(n,"$eval",m=function(p){return this.value},m.$$arity=1),e.def(n,"$output",h=function(){return this.value.$to_s()},h.$$arity=0),e.alias(n,"s_exp","output")}(W[0],0,W)},Opal.modules.strscan=function(e){var z,Y,d,E,M,U,R,W,I,g,c,n,o,a,m,h,b,p,y,C,K,P,f,l,D,w,$,B,x=[],r=e.nil,u=e.$$,_=e.truthy,N=e.send;return z=x,$=(0,e.klass)(x[0],null,"StringScanner"),B=[$].concat(z),$.$$prototype.pos=$.$$prototype.string=$.$$prototype.working=$.$$prototype.matched=$.$$prototype.prev_pos=$.$$prototype.match=r,$.$attr_reader("pos"),$.$attr_reader("matched"),e.def($,"$initialize",Y=function(s){var S=this;return S.string=s,S.pos=0,S.matched=r,S.working=s,S.match=[]},Y.$$arity=1),$.$attr_reader("string"),e.def($,"$beginning_of_line?",d=function(){var s=this;return 0===s.pos||"\n"===s.string.charAt(s.pos-1)},d.$$arity=0),e.alias($,"bol?","beginning_of_line?"),e.def($,"$scan",E=function(s){var S=this,V=(s=S.$anchor(s)).exec(S.working);return null==V?S.matched=r:"object"==typeof V?(S.prev_pos=S.pos,S.pos+=V[0].length,S.working=S.working.substring(V[0].length),S.matched=V[0],S.match=V,V[0]):"string"==typeof V?(S.pos+=V.length,S.working=S.working.substring(V.length),V):r},E.$$arity=1),e.def($,"$scan_until",M=function(s){var S=this;s=S.$anchor(s);for(var $e,V=S.pos,ne=S.working;;){if($e=s.exec(ne),V+=1,ne=ne.substr(1),null!=$e)return S.matched=S.string.substr(S.pos,V-S.pos-1+$e[0].length),S.match=$e,S.prev_pos=V-1,S.pos=V,S.working=ne.substr($e[0].length),S.matched;if(0===ne.length)return S.match=[],S.matched=r}},M.$$arity=1),e.def($,"$[]",U=function(s){var V;if(_(this.match["$empty?"]()))return r;V=s,u(B,"Symbol")["$==="](V)?s=s.$to_s():u(B,"String")["$==="](V)||(s=u(B,"Opal")["$coerce_to!"](s,u(B,"Integer"),"to_int"));var ne=this.match;return s<0&&(s+=ne.length),s<0||s>=ne.length||null==ne[s]?r:ne[s]},U.$$arity=1),e.def($,"$check",R=function(s){var S=this,V=(s=S.$anchor(s)).exec(S.working);return S.matched=null==V?r:V[0]},R.$$arity=1),e.def($,"$check_until",W=function(s){var S=this,V=S.prev_pos,ne=S.pos,$e=S.$scan_until(s);return $e!==r&&(S.matched=$e.substr(-1),S.working=S.string.substr(ne)),S.prev_pos=V,S.pos=ne,$e},W.$$arity=1),e.def($,"$peek",I=function(s){return this.working.substring(0,s)},I.$$arity=1),e.def($,"$eos?",g=function(){return 0===this.working.length},g.$$arity=0),e.def($,"$exist?",c=function(s){var V=s.exec(this.working);return null==V?r:0==V.index?0:V.index+1},c.$$arity=1),e.def($,"$skip",n=function(s){var S=this,V=(s=S.$anchor(s)).exec(S.working);if(null==V)return S.match=[],S.matched=r;var ne=V[0],$e=ne.length;return S.matched=ne,S.match=V,S.prev_pos=S.pos,S.pos+=$e,S.working=S.working.substring($e),$e},n.$$arity=1),e.def($,"$skip_until",o=function(s){var V=this.$scan_until(s);return V===r?r:(this.matched=V.substr(-1),V.length)},o.$$arity=1),e.def($,"$get_byte",a=function(){var s=this,S=r;return s.pos<s.string.length?(s.prev_pos=s.pos,s.pos+=1,S=s.matched=s.working.substring(0,1),s.working=s.working.substring(1)):s.matched=r,S},a.$$arity=0),e.alias($,"getch","get_byte"),e.def($,"$match?",m=function(s){var S=this,V=(s=S.$anchor(s)).exec(S.working);return null==V?r:(S.prev_pos=S.pos,V[0].length)},m.$$arity=1),e.def($,"$pos=",h=function(s){var S=this;return s<0&&(s+=S.string.$length()),S.pos=s,S.working=S.string.slice(s)},h.$$arity=1),e.def($,"$matched_size",b=function(){return this.matched===r?r:this.matched.length},b.$$arity=0),e.def($,"$post_match",p=function(){var s=this;return s.matched===r?r:s.string.substr(s.pos)},p.$$arity=0),e.def($,"$pre_match",y=function(){var s=this;return s.matched===r?r:s.string.substr(0,s.prev_pos)},y.$$arity=0),e.def($,"$reset",C=function(){var s=this;return s.working=s.string,s.matched=r,s.pos=0},C.$$arity=0),e.def($,"$rest",K=function(){return this.working},K.$$arity=0),e.def($,"$rest?",P=function(){return 0!==this.working.length},P.$$arity=0),e.def($,"$rest_size",f=function(){return this.$rest().$size()},f.$$arity=0),e.def($,"$terminate",l=function(){var S,s=this;return s.match=r,S=[s.string.$length()],N(s,"pos=",e.to_a(S)),S[function(A,t){return"number"==typeof A?A-1:A["$-"](1)}(S.length)]},l.$$arity=0),e.def($,"$unscan",D=function(){var s=this;return s.pos=s.prev_pos,s.prev_pos=r,s.match=r,s},D.$$arity=0),$.$private(),e.def($,"$anchor",w=function(s){var V=s.toString().match(/\/([^\/]+)$/);return V=V?V[1]:void 0,new RegExp("^(?:"+s.source+")",V)},w.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var z,Y,d,$,_,A,Z=[],x=e.nil,u=e.module;return _=Z,z=A=[u(Z[0],"BCDice")].concat(_),[$=u(A[0],"Normalize")].concat(z),$.$module_function(),e.def($,"$comparison_operator",Y=function(M){var R;return/<=|=</["$==="](R=M)?"<=":/>=|=>/["$==="](R)?">=":/<>|!=|=!/["$==="](R)?"!=":/</["$==="](R)?"<":/>/["$==="](R)?">":/=/["$==="](R)?"==":x},Y.$$arity=1),void e.def($,"$target_number",d=function(M){return M["$=="]("?")?M:M.$to_i()},d.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var z,d,W,c,n,o,I,g,M,B,j=e.top,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.klass,_=e.hash2,N=e.truthy,A=e.send;return j.$require("strscan"),j.$require("bcdice/normalize"),z=Z,d=B=[u(Z[0],"BCDice")].concat(z),W=M=[u(B[0],"Command")].concat(d),I=X(M[0],null,"Lexer"),g=[I].concat(W),I.$$prototype.scanner=I.$$prototype.notations=x,e.const_set(g[0],"SYMBOLS",_(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(I,"$initialize",c=function(m,h){var b,p,y,K,C=this;return m=N(K=(p=(b=m)===x||null==b?x:A(b,"split",[" ",2]))===x||null==p?x:A(p,"first",[]))?K:"",C.scanner=v(g,"StringScanner").$new(m),C.notations=A(h,"map",[],((y=function(P){function f(l){return P.apply(this,arguments)}return f.toString=function(){return P.toString()},f}(function(P){return null==P&&(P=x),N(P["$is_a?"](v(g,"String")))?v(g,"Regexp").$new(P):P})).$$s=C,y.$$arity=1,y))},c.$$arity=2),e.def(I,"$next_token",n=function(){try{var m,h=this,b=x,p=x,C=x,K=x;return N(h.scanner["$eos?"]())?[!1,"$"]:(A(h.notations,"each",[],((m=function(f){var D,l=null==m.$$s?this:m.$$s;if(null==l.scanner&&(l.scanner=x),null==f&&(f=x),D=l.scanner.$scan(f),!N(D))return x;e.ret(["NOTATION",D])}).$$s=h,m.$$arity=1,m)),N(b=h.scanner.$scan(/\d+/))?["NUMBER",b.$to_i()]:N(p=h.scanner.$scan(/[<>!=]+/))?(p=v(g,"Normalize").$comparison_operator(p),[N(p)?"CMP_OP":"ILLEGAL",p]):(C=h.scanner.$getch().$upcase(),[N(K=v(g,"SYMBOLS")["$[]"](C))?K:C.$to_sym(),C]))}catch(P){if(P===e.returner)return P.$v;throw P}},n.$$arity=0),void e.def(I,"$source",o=function(){return this.scanner.$string()},o.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var A,B,U,I,g,c,R,W,d,z,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.klass,_=e.truthy;return A=Z,B=z=[u(Z[0],"BCDice")].concat(A),U=d=[u(z[0],"Command")].concat(B),R=X(d[0],null,"Parsed"),W=[R].concat(U),R.$$prototype.question_target=R.$$prototype.critical=R.$$prototype.fumble=R.$$prototype.dollar=R.$$prototype.modify_number=R.$$prototype.target_number=R.$$prototype.prefix_number=R.$$prototype.command=R.$$prototype.suffix_number=R.$$prototype.cmp_op=x,R.$attr_accessor("command"),R.$attr_accessor("prefix_number"),R.$attr_accessor("suffix_number"),R.$attr_accessor("critical"),R.$attr_accessor("fumble"),R.$attr_accessor("dollar"),R.$attr_accessor("modify_number"),R.$attr_accessor("cmp_op"),R.$attr_accessor("target_number"),R.$attr_writer("question_target"),e.def(R,"$initialize",I=function(){var o=this;return o.prefix_number=x,o.suffix_number=x,o.critical=x,o.fumble=x,o.dollar=x,o.cmp_op=x,o.target_number=x,o.question_target=!1},I.$$arity=0),e.def(R,"$question_target?",g=function(){return this.question_target},g.$$arity=0),void e.def(R,"$to_s",c=function(o){var C,a=this,m=x,h=x,b=x,p=x,y=x;return null==o&&(o="after_command"),m=_(a.critical)?"@"+a.critical:x,h=_(a.fumble)?"#"+a.fumble:x,b=_(a.dollar)?"$"+a.dollar:x,p=v(W,"Format").$modifier(a.modify_number),y=_(a.question_target)?"?":a.target_number,"after_command"["$==="](C=o)?[a.prefix_number,a.command,a.suffix_number,m,h,b,p,a.cmp_op,y].$join():"after_modify_number"["$==="](C)?[a.prefix_number,a.command,a.suffix_number,p,m,h,b,a.cmp_op,y].$join():"after_target_number"["$==="](C)?[a.prefix_number,a.command,a.suffix_number,p,a.cmp_op,y,m,h,b].$join():x},c.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function j(B,Y){return"number"==typeof B&&"number"==typeof Y?B-Y:B["$-"](Y)}var Y,U,I,g,c,a,m,h,b,p,y,C,K,P,f,l,D,w,H,s,S,V,ne,$e,he,pe,Se,Be,ze,Ce,Ie,fe,O,J,i,q,T,k,Q,ee,te,de,re,ie,me,ye,le,be,ae,xe,Ee,qe,De,Ne,Ae,Te,ke,He,Fe,Le,Ge,n,o,W,E,Z=e.top,x=[],r=e.nil,v=e.$$$,u=e.$$,X=e.klass,_=e.module,N=e.hash2,A=e.send2,t=e.send,z=e.hash,$=e.truthy;return Z.$require("racc/parser.rb"),Z.$require("bcdice/arithmetic/node"),Z.$require("bcdice/command/lexer"),Z.$require("bcdice/command/parsed"),function(B,Y,d){[X(B,Y,"Parser")].concat(d)}(v(u(x,"BCDice"),"Command"),v(u(x,"Racc"),"Parser"),x),Y=x,U=E=[_(x[0],"BCDice")].concat(Y),I=(W=[_(E[0],"Command")].concat(U))[0],g=v(u(W,"Racc"),"Parser"),c=W,n=X(I,g,"Parser"),o=[n].concat(c),n.$$prototype.notations=n.$$prototype.lexer=n.$$prototype.modifier=n.$$prototype.prefix_number=n.$$prototype.suffix_number=n.$$prototype.need_suffix_number=n.$$prototype.need_prefix_number=n.$$prototype.critical=n.$$prototype.fumble=n.$$prototype.dollar=n.$$prototype.allowed_cmp_op=n.$$prototype.question_target=r,e.def(n,"$initialize",a=function(F,ce){var G,L,se,Re,ge=a.$$p,oe=this;if(ge&&(a.$$p=null),G=e.slice.call(arguments,0,arguments.length),null==(L=e.extract_kwargs(G)))L=N([],{});else if(!L.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(se=G,!e.hasOwnProperty.call(L.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return Re=L.$$smap.round_type,A(oe,e.find_super_dispatcher(oe,"initialize",a,!1,!0),"initialize",[],null),oe.notations=se,oe.round_type=Re,oe.prefix_number=!1,oe.suffix_number=!1,oe.need_prefix_number=!1,oe.need_suffix_number=!1,oe.modifier=!0,oe.critical=!1,oe.fumble=!1,oe.dollar=!1,oe.allowed_cmp_op=[r,">=",">","<=","<","==","!="],oe.question_target=!1},a.$$arity=-2),e.def(n,"$disable_modifier",m=function(){return this.modifier=!1,this},m.$$arity=0),e.def(n,"$enable_prefix_number",h=function(){return this.prefix_number=!0,this},h.$$arity=0),e.def(n,"$enable_suffix_number",b=function(){return this.suffix_number=!0,this},b.$$arity=0),e.def(n,"$has_prefix_number",p=function(){var F=this;return F.prefix_number=!0,F.need_prefix_number=!0,F},p.$$arity=0),e.def(n,"$has_suffix_number",y=function(){var F=this;return F.suffix_number=!0,F.need_suffix_number=!0,F},y.$$arity=0),e.def(n,"$enable_critical",C=function(){return this.critical=!0,this},C.$$arity=0),e.def(n,"$enable_fumble",K=function(){return this.fumble=!0,this},K.$$arity=0),e.def(n,"$enable_dollar",P=function(){return this.dollar=!0,this},P.$$arity=0),e.def(n,"$restrict_cmp_op_to",f=function(F){var ce,L=this;return ce=e.slice.call(arguments,0,arguments.length),L.allowed_cmp_op=ce,L},f.$$arity=-1),e.def(n,"$enable_question_target",l=function(){return this.question_target=!0,this},l.$$arity=0),e.def(n,"$parse",D=function(F){try{return this.lexer=u(o,"Lexer").$new(F,this.notations),this.$do_parse()}catch(G){if(!e.rescue(G,[u(o,"ParseError"),u(o,"ZeroDivisionError")]))throw G;try{return r}finally{e.pop_exception()}}},D.$$arity=1),n.$private(),e.def(n,"$parsed",w=function(F,ce,G,L){var se;return t(u(o,"Parsed").$new(),"tap",[],((se=function(ve){var we,Pe,Ye,Ke,Ve,Qe,oe=null==se.$$s?this:se.$$s,_e=r;return null==oe.round_type&&(oe.round_type=r),null==ve&&(ve=r),_e=[F["$[]"]("command")],t(ve,"command=",e.to_a(_e)),j(_e.length,1),_e=[(we=F["$[]"]("prefix"),we===r||null==we?r:t(we,"eval",[oe.round_type]))],t(ve,"prefix_number=",e.to_a(_e)),j(_e.length,1),_e=[(Pe=F["$[]"]("suffix"),Pe===r||null==Pe?r:t(Pe,"eval",[oe.round_type]))],t(ve,"suffix_number=",e.to_a(_e)),j(_e.length,1),_e=[(Ye=ce["$[]"]("critical"),Ye===r||null==Ye?r:t(Ye,"eval",[oe.round_type]))],t(ve,"critical=",e.to_a(_e)),j(_e.length,1),_e=[(Ke=ce["$[]"]("fumble"),Ke===r||null==Ke?r:t(Ke,"eval",[oe.round_type]))],t(ve,"fumble=",e.to_a(_e)),j(_e.length,1),_e=[(Ve=ce["$[]"]("dollar"),Ve===r||null==Ve?r:t(Ve,"eval",[oe.round_type]))],t(ve,"dollar=",e.to_a(_e)),j(_e.length,1),_e=[G.$eval(oe.round_type)],t(ve,"modify_number=",e.to_a(_e)),j(_e.length,1),_e=[L["$[]"]("cmp_op")],t(ve,"cmp_op=",e.to_a(_e)),j(_e.length,1),L["$[]"]("target")["$=="]("?")?(t(ve,"question_target=",e.to_a(_e=[!0])),j(_e.length,1),t(ve,"target_number=",e.to_a(_e=[0])),_e[j(_e.length,1)]):(t(ve,"question_target=",e.to_a(_e=[!1])),j(_e.length,1),_e=[(Qe=L["$[]"]("target"),Qe===r||null==Qe?r:t(Qe,"eval",[oe.round_type]))],t(ve,"target_number=",e.to_a(_e)),_e[j(_e.length,1)])}).$$s=this,se.$$arity=1,se))},w.$$arity=4),e.def(n,"$next_token",H=function(){return this.lexer.$next_token()},H.$$arity=0),qe=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],De=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],Ne=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],Ae=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],Te=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],ke=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],He=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Fe=[r,r,r,r,r,r,19,16,15,r,r],Le=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ge=z(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(o[0],"Racc_arg",[qe,De,Ae,Ne,Te,ke,Fe,He,19,Le,Ge,58,35,!0]),e.const_set(o[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(o[0],"Racc_debug_parser",!1),e.def(n,"$_reduce_1",s=function(F,ce,G){var L;return $(this.modifier)||this.$raise(u(o,"ParseError")),L=e.to_ary(F),this.$parsed(null==L[0]?r:L[0],null==L[1]?r:L[1],null==L[2]?r:L[2],null==L[3]?r:L[3])},s.$$arity=3),e.def(n,"$_reduce_2",S=function(F,ce,G){var L;return $(this.modifier)||this.$raise(u(o,"ParseError")),L=e.to_ary(F),this.$parsed(null==L[0]?r:L[0],null==L[2]?r:L[2],null==L[1]?r:L[1],null==L[3]?r:L[3])},S.$$arity=3),e.def(n,"$_reduce_3",V=function(F,ce,G){var L,oe;return oe=null==(L=e.to_ary(F))[2]?r:L[2],this.$parsed(null==L[0]?r:L[0],null==L[1]?r:L[1],v(v(u(o,"Arithmetic"),"Node"),"Number").$new(0),oe)},V.$$arity=3),e.def(n,"$_reduce_4",ne=function(F,ce,G){var se,L=this;return $($(se=L.prefix_number)?L.suffix_number:se)||L.$raise(u(o,"ParseError")),N(["command","prefix","suffix"],{command:F["$[]"](1),prefix:F["$[]"](0),suffix:F["$[]"](2)})},ne.$$arity=3),e.def(n,"$_reduce_5",$e=function(F,ce,G){var L=this;return $(L.prefix_number)||L.$raise(u(o,"ParseError")),$(L.need_suffix_number)&&L.$raise(u(o,"ParseError")),N(["command","prefix"],{command:F["$[]"](1),prefix:F["$[]"](0)})},$e.$$arity=3),e.def(n,"$_reduce_6",he=function(F,ce,G){var L=this;return $(L.suffix_number)||L.$raise(u(o,"ParseError")),$(L.need_prefix_number)&&L.$raise(u(o,"ParseError")),N(["command","suffix"],{command:F["$[]"](0),suffix:F["$[]"](1)})},he.$$arity=3),e.def(n,"$_reduce_7",pe=function(F,ce,G){var se,L=this;return $($(se=L.need_prefix_number)?se:L.need_suffix_number)&&L.$raise(u(o,"ParseError")),N(["command"],{command:F["$[]"](0)})},pe.$$arity=3),e.def(n,"$_reduce_8",Se=function(F,ce,G){return N([],{})},Se.$$arity=3),e.def(n,"$_reduce_9",Be=function(F,ce,G){var L,oe,Pe,we,ge=r;return ge=null==(L=e.to_ary(F))[0]?r:L[0],oe=null==L[2]?r:L[2],$($(we=this.critical)?ge["$[]"]("critical")["$nil?"]():we)||this.$raise(u(o,"ParseError")),t(ge,"[]=",e.to_a(Pe=["critical",oe])),j(Pe.length,1),ge},Be.$$arity=3),e.def(n,"$_reduce_10",ze=function(F,ce,G){var L,oe,Pe,we,ge=r;return ge=null==(L=e.to_ary(F))[0]?r:L[0],oe=null==L[2]?r:L[2],$($(we=this.fumble)?ge["$[]"]("fumble")["$nil?"]():we)||this.$raise(u(o,"ParseError")),t(ge,"[]=",e.to_a(Pe=["fumble",oe])),j(Pe.length,1),ge},ze.$$arity=3),e.def(n,"$_reduce_11",Ce=function(F,ce,G){var L,oe,Pe,we,ge=r;return ge=null==(L=e.to_ary(F))[0]?r:L[0],oe=null==L[2]?r:L[2],$($(we=this.dollar)?ge["$[]"]("dollar")["$nil?"]():we)||this.$raise(u(o,"ParseError")),t(ge,"[]=",e.to_a(Pe=["dollar",oe])),j(Pe.length,1),ge},Ce.$$arity=3),e.def(n,"$_reduce_12",Ie=function(F,ce,G){return F["$[]"](1)},Ie.$$arity=3),e.def(n,"$_reduce_13",fe=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"Negative").$new(F["$[]"](1))},fe.$$arity=3),e.def(n,"$_reduce_14",O=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"+",F["$[]"](2))},O.$$arity=3),e.def(n,"$_reduce_15",J=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"-",F["$[]"](2))},J.$$arity=3),e.def(n,"$_reduce_16",i=function(F,ce,G){return $(this.allowed_cmp_op["$include?"](r))||this.$raise(u(o,"ParseError")),N([],{})},i.$$arity=3),e.def(n,"$_reduce_17",q=function(F,ce,G){var L,ge,ve;return ve=null==(L=e.to_ary(F))[1]?r:L[1],$(this.allowed_cmp_op["$include?"](ge=null==L[0]?r:L[0]))||this.$raise(u(o,"ParseError")),N(["cmp_op","target"],{cmp_op:ge,target:ve})},q.$$arity=3),e.def(n,"$_reduce_18",T=function(F,ce,G){var se,L=this;return se=F["$[]"](0),$(L.question_target)||L.$raise(u(o,"ParseError")),$(L.allowed_cmp_op["$include?"](se))||L.$raise(u(o,"ParseError")),N(["cmp_op","target"],{cmp_op:se,target:"?"})},T.$$arity=3),e.def(n,"$_reduce_19",k=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"+",F["$[]"](2))},k.$$arity=3),e.def(n,"$_reduce_20",Q=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"-",F["$[]"](2))},Q.$$arity=3),e.def(n,"$_reduce_22",ee=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"BinaryOp").$new(F["$[]"](0),"*",F["$[]"](2))},ee.$$arity=3),e.def(n,"$_reduce_23",te=function(F,ce,G){return F["$[]"](3).$new(F["$[]"](0),F["$[]"](2))},te.$$arity=3),e.def(n,"$_reduce_25",de=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},de.$$arity=3),e.def(n,"$_reduce_26",re=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"DivideWithCeil")},re.$$arity=3),e.def(n,"$_reduce_27",ie=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"DivideWithCeil")},ie.$$arity=3),e.def(n,"$_reduce_28",me=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"DivideWithRound")},me.$$arity=3),e.def(n,"$_reduce_29",ye=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"DivideWithFloor")},ye.$$arity=3),e.def(n,"$_reduce_30",le=function(F,ce,G){return F["$[]"](1)},le.$$arity=3),e.def(n,"$_reduce_31",be=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"Negative").$new(F["$[]"](1))},be.$$arity=3),e.def(n,"$_reduce_33",ae=function(F,ce,G){return F["$[]"](1)},ae.$$arity=3),e.def(n,"$_reduce_34",xe=function(F,ce,G){return v(v(u(o,"Arithmetic"),"Node"),"Number").$new(F["$[]"](0))},xe.$$arity=3),void e.def(n,"$_reduce_none",Ee=function(F,ce,G){return F["$[]"](0)},Ee.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var A,B,M,W,I,g,c,n,o,U,R,d,z,Z=[],x=e.nil,v=e.$$,u=e.module,X=e.send,_=e.truthy;return A=Z,B=z=[u(Z[0],"BCDice")].concat(A),M=d=[u(z[0],"Deprecated")].concat(B),U=u(d[0],"Checker"),R=[U].concat(M),U.$private(),e.def(U,"$check_result_legacy",W=function(m,h,b,p){var P,D,y=this,C=x,K=x,f=x,l=x,w=x;return C=X(h,"map",[],"sides".$to_proc()),P=(K=X(h,"map",[],"value".$to_proc())).$sum(),f=[100]["$==="](l=C)?y.$check_1D100(m,P,b,p):[20]["$==="](l)?y.$check_1D20(m,P,b,p):[6,6]["$==="](l)?y.$check_2D6(m,P,K,b,p):x,_(_(D=f["$nil?"]())?D:f["$empty?"]())&&(l=C.$uniq(),f=[10]["$==="](l)?y.$check_nD10(m,P,K,b,p):[6]["$==="](l)?y.$check_nD6(m,P,K,b,p):x,_(_(w=f["$nil?"]())?w:f["$empty?"]()))?x:v(R,"Result").$new(f.$delete_prefix(" \uff1e "))},W.$$arity=4),e.def(U,"$check_1D100",I=function(m,h,b,p){return x},I.$$arity=4),e.def(U,"$check_1D20",g=function(m,h,b,p){return x},g.$$arity=4),e.def(U,"$check_nD10",c=function(m,h,b,p,y){return x},c.$$arity=5),e.def(U,"$check_2D6",n=function(m,h,b,p,y){return x},n.$$arity=5),void e.def(U,"$check_nD6",o=function(m,h,b,p,y){return x},o.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function j(E,M){return"number"==typeof E&&"number"==typeof M?E+M:E["$+"](M)}function Z(E,M){return"number"==typeof E&&"number"==typeof M?E-M:E["$-"](M)}var M,g,o,a,m,h,b,p,y,C,K,P,f,l,D,w,H,s,S,V,ne,$e,he,pe,Se,Be,ze,Ce,Ie,fe,O,J,T,k,Q,ee,te,q,c,n,R,u=e.top,X=[],_=e.nil,N=e.$$$,A=e.$$,t=e.module,z=e.klass,$=e.truthy,B=e.send,Y=e.range,d=_;return u.$require("i18n"),u.$require("i18n/backend/fallbacks"),u.$require("bcdice/randomizer"),u.$require("bcdice/dice_table"),u.$require("bcdice/enum"),u.$require("bcdice/translate"),u.$require("bcdice/result"),u.$require("bcdice/command/parser"),u.$require("bcdice/deprecated/checker"),M=X,g=R=[t(X[0],"BCDice")].concat(M),c=z(R[0],null,"Base"),n=[c].concat(g),c.$$prototype.sort_add_dice=c.$$prototype.sort_barabara_dice=c.$$prototype.enabled_d9=c.$$prototype.raw_input=c.$$prototype.randomizer=c.$$prototype.enabled_upcase_input=c.$$prototype.debug=_,J=e.get_singleton_class(c),q=[J].concat(n),J.$attr_reader("prefixes"),e.def(J,"$register_prefix",T=function(re){var me,ye=this,le=_;return null==ye.prefixes&&(ye.prefixes=_),me=e.slice.call(arguments,0,arguments.length),ye.prefixes=$(le=ye.prefixes)?le:[],ye.prefixes.$concat(me.$flatten())},T.$$arity=-1),e.def(J,"$register_prefix_from_super_class",k=function(){return this.$register_prefix(this.$superclass().$prefixes())},k.$$arity=0),e.def(J,"$prefixes_pattern",Q=function(){var ie,re=this,me=_;return null==re.prefixes_pattern&&(re.prefixes_pattern=_),null==re.prefixes&&(re.prefixes=_),re.prefixes_pattern=$(ie=re.prefixes_pattern)?ie:_,$(re.prefixes_pattern)?re.prefixes_pattern:(re.prefixes=$(me=re.prefixes)?me:[],re.prefixes.$freeze(),re.prefixes_pattern=($(re.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",re.prefixes.$join("|"),")"],"i")).$freeze())},Q.$$arity=0),e.def(J,"$command_pattern",ee=function(){var re,me,ie=this,ye=_,le=_;return null==ie.command_pattern&&(ie.command_pattern=_),null==ie.prefixes&&(ie.prefixes=_),ie.command_pattern=$(me=ie.command_pattern)?me:_,$(ie.command_pattern)?ie.command_pattern:(ie.prefixes=$(ye=ie.prefixes)?ye:[],ie.prefixes.$freeze(),le=j(B(N(A(q,"CommonCommand"),"COMMANDS"),"map",[],((re=function(ae){return null==ae&&(ae=_),N(ae,"PREFIX_PATTERN").$source()}).$$s=ie,re.$$arity=1,re)),ie.prefixes),ie.command_pattern=e.regexp(["^S?(",le.$join("|"),")"],"i").$freeze())},ee.$$arity=0),e.def(J,"$eval",te=function(re){return this.$new(re).$eval()},te.$$arity=1),c.$include(A(n,"Translate")),c.$include(N(A(n,"Deprecated"),"Checker")),e.def(c,"$initialize",o=function(i){var q=this;return q.raw_input=i,q.sort_add_dice=!1,q.sort_barabara_dice=!1,q.d66_sort_type=N(A(n,"D66SortType"),"NO_SORT"),q.enabled_d9=!1,q.round_type=N(A(n,"RoundType"),"FLOOR"),q.sides_implicit_d=6,q.upper_dice_reroll_threshold=_,q.reroll_dice_reroll_threshold=_,q.default_cmp_op=_,q.default_target_number=_,q.enabled_upcase_input=!0,q.locale="ja_jp",q.randomizer=N(A(n,"BCDice"),"Randomizer").$new(),q.debug=!1},o.$$arity=1),c.$attr_accessor("randomizer"),c.$attr_reader("d66_sort_type"),c.$attr_reader("round_type"),c.$attr_reader("sides_implicit_d"),c.$attr_reader("upper_dice_reroll_threshold"),c.$attr_reader("reroll_dice_reroll_threshold"),c.$attr_reader("default_cmp_op"),c.$attr_reader("default_target_number"),e.def(c,"$sort_add_dice?",a=function(){return this.sort_add_dice},a.$$arity=0),e.def(c,"$sort_barabara_dice?",m=function(){return this.sort_barabara_dice},m.$$arity=0),e.def(c,"$enabled_d9?",h=function(){return this.enabled_d9},h.$$arity=0),e.def(c,"$enable_debug",b=function(){return this.debug=!0},b.$$arity=0),e.def(c,"$eval",p=function(){var q,T,k,i=this,Q=_;return q=N(A(n,"BCDice"),"Preprocessor").$process(i.raw_input,i),T=$(k=i.$dice_command(q))?k:i.$eval_common_command(i.raw_input),$(T)?(Q=[i.randomizer.$rand_results()],B(T,"rands=",e.to_a(Q)),Z(Q.length,1),Q=[i.randomizer.$detailed_rand_results()],B(T,"detailed_rands=",e.to_a(Q)),Z(Q.length,1),T):_},p.$$arity=0),e.def(c,"$change_text",y=function(i){return i},y.$$arity=1),e.def(c,"$check_result",C=function(i,q,T,k){var Q=this,ee=_,te=_,de=_,re=_,ie=_;return ee=Q.$check_result_legacy(i,q,T,k),$(ee)?ee:(te=B(q,"map",[],"sides".$to_proc()),re=(de=B(q,"map",[],"value".$to_proc())).$sum(),(ee=[100]["$==="](ie=te)?Q.$result_1d100(i,re,T,k):[20]["$==="](ie)?Q.$result_1d20(i,re,T,k):[6,6]["$==="](ie)?Q.$result_2d6(i,re,de,T,k):_)["$=="](A(n,"Result").$nothing())?_:$(ee)?ee:(ie=te.$uniq(),(ee=[10]["$==="](ie)?Q.$result_nd10(i,re,de,T,k):[6]["$==="](ie)?Q.$result_nd6(i,re,de,T,k):_)["$=="](A(n,"Result").$nothing())?_:$(ee)?ee:Q.$result_ndx(i,T,k)))},C.$$arity=4),e.def(c,"$grich_text",K=function(i,q,T){return _},K.$$arity=3),c.$private(),e.def(c,"$eval_common_command",P=function(i){try{var q;return i=this.$change_text(i),B(N(A(n,"CommonCommand"),"COMMANDS"),"each",[],((q=function(Q){var te,ee=null==q.$$s?this:q.$$s;if(null==ee.randomizer&&(ee.randomizer=_),null==Q&&(Q=_),te=Q.$eval(i,ee,ee.randomizer),!$(te))return _;e.ret(te)}).$$s=this,q.$$arity=1,q)),_}catch(k){if(k===e.returner)return k.$v;throw k}},P.$$arity=1),e.def(c,"$dice_command",f=function(i){var q,T=this,k=_,Q=_,ee=_,te=_,de=_,re=_,ie=_;return $(T.enabled_upcase_input)&&(i=i.$upcase()),k=T.$class().$prefixes_pattern().$match(i),$(k)?(Q=k["$[]"](1)["$nil?"]()["$!"](),$(Q)&&(i=i["$[]"](Y(1,-1,!1))),ee=T.$eval_game_system_specific_command(i),$(ee["$is_a?"](A(n,"Result")))?(te=[$(de=ee["$secret?"]())?de:Q],B(ee,"secret=",e.to_a(te)),Z(te.length,1),ee):$($(re=$(ie=ee["$nil?"]())?ie:ee["$empty?"]())?re:ee["$=="]("1"))?_:B(A(n,"Result").$new(),"tap",[],((q=function(ye){return null==ye&&(ye=_),te=[ee.$to_s()],B(ye,"text=",e.to_a(te)),Z(te.length,1),B(ye,"secret=",e.to_a(te=[Q])),te[Z(te.length,1)]}).$$s=T,q.$$arity=1,q))):_},f.$$arity=1),e.def(c,"$eval_game_system_specific_command",l=function(i){return _},l.$$arity=1),e.def(c,"$result_ndx",D=function(i,q,T){return $(T["$is_a?"](A(n,"String")))?_:$(i.$send(q,T))?A(n,"Result").$success(this.$translate("success")):A(n,"Result").$failure(this.$translate("failure"))},D.$$arity=3),e.def(c,"$result_1d100",w=function(i,q,T,k){return _},w.$$arity=4),e.def(c,"$result_1d20",H=function(i,q,T,k){return _},H.$$arity=4),e.def(c,"$result_nd10",s=function(i,q,T,k,Q){return _},s.$$arity=5),e.def(c,"$result_2d6",S=function(i,q,T,k,Q){return _},S.$$arity=5),e.def(c,"$result_nd6",V=function(i,q,T,k,Q){return _},V.$$arity=5),e.def(c,"$get_table_by_2d6",ne=function(i){return this.$get_table_by_nD6(i,2)},ne.$$arity=1),e.def(c,"$get_table_by_1d6",$e=function(i){return this.$get_table_by_nD6(i,1)},$e.$$arity=1),e.def(c,"$get_table_by_nD6",he=function(i,q){return this.$get_table_by_nDx(i,q,6)},he.$$arity=2),e.def(c,"$get_table_by_nDx",pe=function(i,q,T){var Q,ee=_;return Q=this.randomizer.$roll_sum(q,T),ee=this.$get_table_value(i["$[]"](Z(Q,q))),$(ee["$nil?"]())?["1",0]:[ee,Q]},pe.$$arity=3),e.def(c,"$get_table_by_1d3",Se=function(i){var k,Q,E,q=this,ee=_;return q.$debug("get_table_by_1d3"),k=q.randomizer.$roll_sum(1,6),q.$debug("num",k),Q=(E=Z(k,1),"number"==typeof E?E/2:E["$/"](2)).$to_i(),q.$debug("index",Q),ee=i["$[]"](Q),$(ee["$nil?"]())?["1",0]:[ee,k]},Se.$$arity=1),e.def(c,"$get_table_by_d66_swap",Be=function(i){var T;return T=this.randomizer.$roll_d66(N(A(n,"D66SortType"),"ASC")),[this.$get_table_by_number(T,i),T]},Be.$$arity=1),e.def(c,"$get_table_by_d66",ze=function(i){var T,k,Q,te,E,ee=_;return T=this.randomizer.$roll_once(6),k=this.randomizer.$roll_once(6),Q=j("number"==typeof(E=Z(T,1))?6*E:E["$*"](6),Z(k,1)),ee=i["$[]"](Q),te=""+T+k,$(ee["$nil?"]())?["1",te]:[ee,te]},ze.$$arity=1),e.def(c,"$get_table_by_number",Ce=function(i,q,T){try{var k;return null==T&&(T="1"),B(q,"each",[],((k=function(te){var re,de=null==k.$$s?this:k.$$s;if(null==te&&(te=_),re=te["$[]"](0),!$(function(E,M){return"number"==typeof E&&"number"==typeof M?E>=M:E["$>="](M)}(re,i)))return _;e.ret(de.$get_table_value(te["$[]"](1)))}).$$s=this,k.$$arity=1,k)),this.$get_table_value(T)}catch(ee){if(ee===e.returner)return ee.$v;throw ee}},Ce.$$arity=-3),e.def(c,"$get_table_value",Ie=function(i){return $(i["$is_a?"](A(n,"Proc")))?i.$call():i},Ie.$$arity=1),e.def(c,"$roll_tables",fe=function(i,q){var k=_;return k=q["$[]"](i),$(k)?k.$roll(this.randomizer).$to_s():_},fe.$$arity=2),e.def(c,"$debug",O=function(i,q){var k,Q,ee=this,te=_,de=_;return k=e.slice.call(arguments,1,arguments.length),$(ee.debug)?(te=$(i["$is_a?"](A(n,"String")))?i:i.$inspect(),$(k["$empty?"]())?ee.$warn(te):(de=B(k,"map",[],((Q=function(ie){return null==ie&&(ie=_),$(ie["$is_a?"](A(n,"String")))?'"'+ie+'"':ie.$inspect()}).$$s=ee,Q.$$arity=1,Q)),ee.$warn(te+": "+de.$join(", ")))):_},O.$$arity=-2),N(N(A(X,"I18n"),"Backend"),"Simple").$include(N(N(A(X,"I18n"),"Backend"),"Fallbacks")),A(X,"I18n").$load_path()["$<<"](A(X,"Dir")["$[]"](A(X,"File").$join(u.$__dir__(),"../../i18n/**/*.yml"))),d=["ja_jp"],B(A(X,"I18n"),"default_locale=",e.to_a(d)),Z(d.length,1),d=[["ja_jp"]],B(A(X,"I18n").$fallbacks(),"defaults=",e.to_a(d)),d[Z(d.length,1)]},e=Opal,Z=[],x=e.nil,r=e.$$$,v=e.$$,u=e.module,X=e.klass,_=e.truthy,N=e.send,A=e.hash2,e.top.$require("bcdice/base"),z=Z,d=B=[u(Z[0],"BCDice")].concat(z),W=M=[u(B[0],"GameSystem")].concat(d),I=X(M[0],v(M,"Base"),"UnsungDuet"),g=[I].concat(W),I.$$prototype.randomizer=x,e.const_set(g[0],"ID","UnsungDuet"),e.const_set(g[0],"NAME","\u30a2\u30f3\u30b5\u30f3\u30b0\u30fb\u30c7\u30e5\u30a8\u30c3\u30c8"),e.const_set(g[0],"SORT_KEY","\u3042\u3093\u3055\u3093\u304f\u3066\u3086\u3048\u3064\u3068"),e.const_set(g[0],"HELP_MESSAGE","\u25a0 \u30b7\u30d5\u30bf\u30fc\u7528\u5224\u5b9a (shifter, UDS)\n  1D10\u3092\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3066\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n  \u4f8b\uff09 shifter, UDS, shifter>=5, shifter+1>=6\n\n\u25a0 \u30d0\u30a4\u30f3\u30c0\u30fc\u7528\u5224\u5b9a (binder, UDB)\n  2D6\u3092\u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\u3057\u3066\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n  \u4f8b\uff09 binder, UDB, binder>=5, binder+1>=6\n\n\u25a0 \u5909\u7570\u8868\n  \u30fb\u5916\u50b7 (HIN, HInjury)\n  \u30fb\u4f53\u8abf\u306e\u5909\u5316 (HPH, HPhysical)\n  \u30fb\u6050\u6016 (HFE, HFear)\n  \u30fb\u5e7b\u60f3\u5316 (HFA, HFantasy)\n  \u30fb\u7cbe\u795e (HMI, HMind)\n  \u30fb\u305d\u306e\u307b\u304b (HOT, HOther)\n"),e.const_set(g[0],"ALIAS_1D10",["shifter","UDS"].$freeze()),e.const_set(g[0],"ALIAS_2D6",["binder","UDB"].$freeze()),e.const_set(g[0],"SHIFTER_ALIAS_REG",e.regexp(["^",v(g,"ALIAS_1D10").$join("|")],"i").$freeze()),e.const_set(g[0],"BINDER_ALIAS_REG",e.regexp(["^",v(g,"ALIAS_2D6").$join("|")],"i").$freeze()),I.$register_prefix(v(g,"ALIAS_1D10"),v(g,"ALIAS_2D6")),e.def(I,"$eval_game_system_specific_command",c=function(a){var b,h,p,m=this;return a=_(h=v(g,"ALIAS")["$[]"](a))?h:a,_(b=_(p=m.$roll_replaced_command_if_match(a,v(g,"SHIFTER_ALIAS_REG"),"1D10"))?p:m.$roll_replaced_command_if_match(a,v(g,"BINDER_ALIAS_REG"),"2D6"))?b:m.$roll_tables(a,v(g,"TABLES"))},c.$$arity=1),e.def(I,"$roll_replaced_command_if_match",n=function(a,m,h){return _(a["$match?"](m))?r(v(g,"CommonCommand"),"AddDice").$eval(a.$sub(m,h),this,this.randomizer):x},n.$$arity=3),e.const_set(g[0],"ALIAS",N(A(["HInjury","HPhysical","HFear","HFantasy","HMind","HOther"],{HInjury:"HIN",HPhysical:"HPH",HFear:"HFE",HFantasy:"HFA",HMind:"HMI",HOther:"HOT"}),"transform_keys",[],"upcase".$to_proc())),e.const_set(g[0],"TABLES",A(["HIN","HPH","HFE","HFA","HMI","HOT"],{HIN:r(v(g,"DiceTable"),"Table").$new("\u5909\u7570\u8868\uff1a\u5916\u50b7","1D6",["\u9854\u306e\u50b7 \u2192 \u9854\u306b\u3067\u304d\u305f\u50b7\u3002\u3058\u308f\u308a\u3068\u8840\u304c\u306b\u3058\u3080","\u5927\u304d\u306a\u602a\u6211 \u2192 \u65e9\u304f\u624b\u5f53\u3066\u3092\u3057\u306a\u3044\u3068\u547d\u306b\u95a2\u308f\u308b","\u75db\u307f\u306e\u306a\u3044\u50b7 \u2192 \u5927\u304d\u306a\u50b7\u306a\u306e\u306b\u3001\u306a\u305c\u304b\u75db\u304f\u306a\u3044","\u55aa\u5931 \u2192 \u8eab\u4f53\u306e\u3069\u3053\u304b\u304c\u6d88\u3048\u3066\u3057\u307e\u3063\u305f","\u6587\u5b57\u306e\u3088\u3046\u306a\u50b7\u8de1 \u2192 \u8aad\u3081\u306a\u3044\u6587\u5b57\u306e\u3088\u3046\u306a\u50b7","\u6a21\u69d8\u3092\u63cf\u304f\u30a2\u30b6 \u2192 \u6a21\u69d8\u306e\u3088\u3046\u306a\u3001\u8eab\u4f53\u306b\u3067\u304d\u305f\u30a2\u30b6"]),HPH:r(v(g,"DiceTable"),"Table").$new("\u5909\u7570\u8868\uff1a\u4f53\u8abf\u306e\u5909\u5316","1D6",["\u8996\u754c\u304c\u307c\u3084\u3051\u308b \u2192 \u76ee\u306e\u7126\u70b9\u304c\u5408\u308f\u306a\u3044","\u8033\u9cf4\u308a \u2192 \u305a\u3063\u3068\u7532\u9ad8\u3044\u97f3\u304c\u9cf4\u308a\u7d9a\u3051\u3066\u3044\u308b\u6c17\u304c\u3059\u308b","\u7570\u69d8\u306a\u5bd2\u6c17 \u2192 \u51cd\u3048\u305d\u3046\u306a\u307b\u3069\u306b\u5bd2\u304f\u611f\u3058\u308b","\u767a\u6c57 \u2192 \u6691\u3044\u308f\u3051\u3067\u3082\u306a\u3044\u306e\u306b\u3001\u6c57\u304c\u3060\u3089\u3060\u3089\u3068","\u5e7b\u899a \u2192 \u305d\u308c\u304c\u672c\u7269\u304b\u5e7b\u304b\u3001\u533a\u5225\u304c\u3064\u304b\u306a\u3044","\u8d70\u99ac\u706f \u2192 \u904e\u53bb\u306e\u3053\u3068\u3092\u6b21\u3005\u3068\u601d\u3044\u51fa\u3057\u3066\u3057\u307e\u3046"]),HFE:r(v(g,"DiceTable"),"Table").$new("\u5909\u7570\u8868\uff1a\u6050\u6016","1D6",["\u4e0d\u5b89 \u2192 \u6f20\u7136\u3068\u3057\u305f\u4e0d\u5b89\u304c\u5fc3\u3092\u8755\u3080","\u72ed\u3044\u5834\u6240\u304c\u6016\u3044 \u2192 \u72ed\u3044\u5834\u6240\u306b\u5165\u308a\u305f\u304f\u306a\u3044","\u9707\u3048\u304c\u6b62\u307e\u3089\u306a\u3044 \u2192 \u3069\u3046\u3057\u3066\u3082\u843d\u3061\u7740\u304b\u306a\u3044","\u7269\u97f3\u304c\u6016\u3044 \u2192 \u307b\u3093\u306e\u5c0f\u3055\u306a\u7269\u97f3\u306b\u3082\u602f\u3048\u3066\u3057\u307e\u3046","\u6697\u3044\u5834\u6240\u304c\u6016\u3044 \u2192 \u706f\u308a\u306e\u306a\u3044\u5834\u6240\u304c\u3072\u3069\u304f\u6050\u308d\u3057\u3044","\u8ab0\u304b\u304c\u3064\u3044\u3066\u304f\u308b \u2192 \u8ab0\u304b\u304c\u5f8c\u308d\u306b\u3044\u308b\u6c17\u304c\u3059\u308b\u2026\u2026"]),HFA:r(v(g,"DiceTable"),"Table").$new("\u5909\u7570\u8868\uff1a\u5e7b\u60f3\u5316","1D6",["\u785d\u5b50\u5316 \u2192 \u8eab\u4f53\u306e\u4e00\u90e8\u304c\u30ac\u30e9\u30b9\u306e\u3088\u3046\u306b\u900f\u660e\u306b","\u7fbd\u6bdb\u5316 \u2192 \u8eab\u4f53\u306e\u3069\u3053\u304b\u304b\u3089\u7fbd\u6bdb\u304c\u751f\u3048\u3066\u304f\u308b","\u690d\u7269\u5316 \u2192 \u30c4\u30bf\u3084\u8449\u304c\u8eab\u4f53\u304b\u3089\u751f\u3048\u3066\u304f\u308b","\u52d5\u7269\u306e\u77b3 \u2192 \u77b3\u306e\u5f62\u304c\u52d5\u7269\u306e\u305d\u308c\u306b\u5909\u308f\u3063\u3066\u3057\u307e\u3046","\u6709\u89d2\u5316 \u2192 \u984d\u3084\u5074\u982d\u90e8\u304b\u3089\u89d2\u304c\u751f\u3048\u3066\u304f\u308b","\u9676\u5668\u5316 \u2192 \u76ae\u819a\u304c\u9676\u5668\u306e\u3088\u3046\u306a\u3082\u306e\u306b\u5909\u308f\u3063\u3066\u3044\u304f"]),HMI:r(v(g,"DiceTable"),"Table").$new("\u5909\u7570\u8868\uff1a\u7cbe\u795e","1D6",["\u8a18\u61b6\u306e\u6df7\u4e71 \u2192 \u3053\u3053\u306f\u3069\u3053\u3001\u3069\u3046\u3057\u3066\u3053\u3093\u306a\u3068\u3053\u308d\u306b?","\u5e7c\u5c11\u671f\u306e\u8a18\u61b6 \u2192 \u53e3\u8abf\u3084\u614b\u5ea6\u304c\u5e7c\u304f\u306a\u3063\u3066\u3057\u307e\u3046","\u7d20\u76f4 \u2192 \u601d\u3063\u305f\u3053\u3068\u3092\u5168\u90e8\u8a00\u3063\u3066\u3057\u307e\u3046","\u86ee\u52c7 \u2192 \u30d1\u30fc\u30c8\u30ca\u30fc\u3092\u5b88\u308b\u305f\u3081\u306b\u7121\u8336\u3070\u304b\u308a\u3059\u308b","\u7591\u5fc3\u6697\u9b3c \u2192 \u4f55\u3082\u304b\u3082\u304c\u60aa\u3044\u65b9\u5411\u306b\u3057\u304b\u8003\u3048\u3089\u308c\u306a\u3044","\u98df\u3079\u3061\u3083\u3044\u305f\u3044 \u2192 \u30d1\u30fc\u30c8\u30ca\u30fc\u3092\u304b\u3058\u308a\u305f\u304f\u306a\u308b"]),HOT:r(v(g,"DiceTable"),"Table").$new("\u5909\u7570\u8868\uff1a\u305d\u306e\u307b\u304b","1D6",["\u5f71\u7d75\u5316 \u2192 \u8eab\u4f53\u306e\u4e00\u90e8\u304c\u5f71\u306e\u3088\u3046\u306b\u306a\u308b","\u6c34\u69fd\u5316 \u2192 \u8eab\u4f53\u306e\u4e00\u90e8\u304c\u6c34\u69fd\u306e\u3088\u3046\u306a\u3082\u306e\u306b\u306a\u308b","\u6d99\u304c\u6b62\u307e\u3089\u306a\u3044 \u2192 \u306a\u305c\u304b\u6d99\u304c\u6d41\u308c\u7d9a\u3051\u308b","\u9264\u722a \u2192 \u624b\u3084\u8db3\u304c\u3001\u7363\u306e\u3088\u3046\u306a\u9264\u722a\u306b\u306a\u308b","\u672a\u6765\u8996 \u2192 \u672a\u6765\u304c\u898b\u3048\u3066\u3057\u307e\u3046\u3002\u672c\u5f53\u304b\u3069\u3046\u304b\u306f\u4e0d\u660e","\u5e30\u308a\u305f\u304f\u306a\u3044 \u2192 \u73fe\u5b9f\u306b\u5e30\u308a\u305f\u304f\u306a\u3044\u3068\u5fae\u304b\u306b\u601d\u3046"])}).$freeze()),I.$register_prefix(v(g,"ALIAS").$keys(),v(g,"TABLES").$keys())}}]);