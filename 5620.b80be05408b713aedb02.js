(self.webpackChunkudonarium_lily_gk=self.webpackChunkudonarium_lily_gk||[]).push([[5620],{5620:function(Ze,Je,Qe){Qe(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function X(M,i){return"number"==typeof M&&"number"==typeof i?M-i:M["$-"](i)}var i,m,G,w,K,A,Y,E=[],r=e.nil,P=e.$$$,c=e.$$,F=e.module,$=e.truthy,d=e.send,B=e.send2,t=e.hash2;return i=E,Y=[A=F(E[0],"I18n")].concat(i),e.class_variable_set(Y[0],"@@fallbacks",r),m=e.get_singleton_class(A),K=[m].concat(Y),e.def(m,"$fallbacks",G=function(){var q,n,b;return e.class_variable_set(K[1],"@@fallbacks",$(b=null==(q=K[1].$$cvars["@@fallbacks"])?r:q)?b:P(P(c(K,"I18n"),"Locale"),"Fallbacks").$new()),$(n=c(K,"Thread").$current()["$[]"]("i18n_fallbacks"))?n:null==(q=K[1].$$cvars["@@fallbacks"])?r:q},G.$$arity=0),e.def(m,"$fallbacks=",w=function(q){var z,n;return e.class_variable_set(K[1],"@@fallbacks",$(q["$is_a?"](c(K,"Array")))?P(P(c(K,"I18n"),"Locale"),"Fallbacks").$new(q):q),n=["i18n_fallbacks",null==(z=K[1].$$cvars["@@fallbacks"])?r:z],d(c(K,"Thread").$current(),"[]=",e.to_a(n)),n[X(n.length,1)]},w.$$arity=1),void function(m,x){var G=[F(m,"Backend")].concat(x);!function(w,V){var b,n,v,u,q=F(w,"Fallbacks"),z=[q].concat(V);e.def(q,"$translate",b=function(S,h,R){try{var g,L=b.$$p,l=this,_=r,o=r,T=r,f=r,k=r,a=r;for(L&&(b.$$p=null),k=0,a=arguments.length,f=new Array(a);k<a;k++)f[k]=arguments[k];return null==R&&(R=c(z,"EMPTY_HASH")),!$(R.$fetch("fallback",!0))||$(R["$[]"]("fallback_in_progress"))?B(l,e.find_super_dispatcher(l,"translate",b,!1,!0),"translate",f,L):($(R["$[]"]("default"))&&(_=l["$extract_non_symbol_default!"](R)),o=R.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),d(c(z,"I18n").$fallbacks()["$[]"](S),"each",[],((g=function(U){var Q,Z=null==g.$$s?this:g.$$s;null==U&&(U=r);try{return d(Z,"catch",["exception"],((Q=function(){var ue=null==Q.$$s?this:Q.$$s,ye=r;if(ye=B(ue,e.find_iter_super_dispatcher(ue,"translate",Q.$$def||g.$$def||b,!1,!1),"translate",[U,h,o],null),$(ye["$nil?"]()))return r;$(S.$to_s()["$!="](U.$to_s()))&&ue.$on_fallback(S,U,h,R),e.ret(ye)}).$$s=Z,Q.$$arity=0,Q))}catch(ae){if(!e.rescue(ae,[P(c(z,"I18n"),"InvalidLocale")]))throw ae;try{return r}finally{e.pop_exception()}}}).$$s=l,g.$$arity=1,g)),$($(T=R["$key?"]("default"))?R["$[]"]("default")["$nil?"]():T)?r:$(_)?B(l,e.find_super_dispatcher(l,"translate",b,!1,!0),"translate",[S,r,R.$merge(t(["default"],{default:_}))],null):l.$throw("exception",P(c(z,"I18n"),"MissingTranslation").$new(S,h,R)))}catch(p){if(p===e.returner)return p.$v;throw p}},b.$$arity=-3),e.def(q,"$extract_non_symbol_default!",n=function(S){var h,L,g=r,j=r;return g=[S["$[]"]("default")].$flatten(),L=d(g,"detect",[],((h=function(_){return null==_&&(_=r),_["$is_a?"](c(z,"Symbol"))["$!"]()}).$$s=this,h.$$arity=1,h)),$(L)&&(j=["default",g["$[]"](0,g.$index(L))],d(S,"[]=",e.to_a(j)),X(j.length,1)),L},n.$$arity=1),e.def(q,"$exists?",v=function(S,h,R){try{var g,L=v.$$p,l=this,_=r,o=r,T=r;for(L&&(v.$$p=null),o=0,T=arguments.length,_=new Array(T);o<T;o++)_[o]=arguments[o];return null==R&&(R=c(z,"EMPTY_HASH")),$(R.$fetch("fallback",!0))?(d(c(z,"I18n").$fallbacks()["$[]"](S),"each",[],((g=function(k){var a=null==g.$$s?this:g.$$s;null==k&&(k=r);try{if(!$(B(a,e.find_iter_super_dispatcher(a,"exists?",g.$$def||v,!1,!1),"exists?",[k,h],null)))return r;e.ret(!0)}catch(p){if(!e.rescue(p,[P(c(z,"I18n"),"InvalidLocale")]))throw p;try{return r}finally{e.pop_exception()}}}).$$s=l,g.$$arity=1,g)),!1):B(l,e.find_super_dispatcher(l,"exists?",v,!1,!0),"exists?",_,L)}catch(f){if(f===e.returner)return f.$v;throw f}},v.$$arity=-3),q.$private(),e.def(q,"$on_fallback",u=function(S,h,R,g){return r},u.$$arity=4)}(G[0],G)}(Y[0],Y)},Opal.modules["bcdice/randomizer"]=function(e){function X(m,x){return"number"==typeof m&&"number"==typeof x?m>x:m["$>"](x)}function O(m,x){return"number"==typeof m&&"number"==typeof x?m+x:m["$+"](x)}function E(m,x){return"number"==typeof m&&"number"==typeof x?m<=x:m["$<="](x)}function r(m,x){return"number"==typeof m&&"number"==typeof x?m-x:m["$-"](x)}function P(m,x){return"number"==typeof m&&"number"==typeof x?m*x:m["$*"](x)}var x,q,n,v,u,y,S,h,R,g,L,j,l,z,b,G,$=[],d=e.nil,B=e.$$$,t=e.$$,i=e.klass,A=e.truthy,Y=e.send;return x=$,q=G=[(0,e.module)($[0],"BCDice")].concat(x),z=i(G[0],null,"Randomizer"),b=[z].concat(q),z.$$prototype.rand_results=z.$$prototype.detailed_rand_results=d,e.const_set(b[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(b[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(b[0],"UPPER_LIMIT_RANDS",1e4),e.def(z,"$initialize",n=function(){return this.rand_results=[],this.detailed_rand_results=[]},n.$$arity=0),z.$attr_reader("rand_results"),z.$attr_reader("detailed_rand_results"),e.const_set(b[0],"DetailedRandResult",t(b,"Struct").$new("kind","sides","value")),e.def(z,"$roll_barabara",v=function(o,T){var f,a,k=this;return A(X(O(k.rand_results.$size(),o),t(b,"UPPER_LIMIT_RANDS")))&&k.$raise(t(b,"TooManyRandsError")),A(A(a=E(o,0))?a:X(o,t(b,"UPPER_LIMIT_DICE_TIMES")))?[]:Y(t(b,"Array"),"new",[o],((f=function(){return(null==f.$$s?this:f.$$s).$roll_once(T)}).$$s=k,f.$$arity=0,f))},v.$$arity=2),e.def(z,"$roll_sum",u=function(o,T){return this.$roll_barabara(o,T).$sum()},u.$$arity=2),e.def(z,"$roll_once",y=function(o){var f,k=d;return A(A(f=E(o,0))?f:X(o,t(b,"UPPER_LIMIT_DICE_SIDES")))?0:(k=this.$rand_inner(o),this.$push_to_detail("normal",o,k),k)},y.$$arity=1),e.def(z,"$roll_index",S=function(o){return r(this.$roll_once(o),1)},S.$$arity=1),e.def(z,"$roll_tens_d10",h=function(){var f,T=d;return(T=this.$rand_inner(10))["$=="](10)&&(T=0),f=P(T,10),this.$push_to_detail("tens_d10",10,f),f},h.$$arity=0),e.def(z,"$roll_d9",R=function(){var T;return T=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,T),T},R.$$arity=0),e.def(z,"$roll_d66",g=function(o){var T,a,k=d;return k=Y(t(b,"Array"),"new",[2],((T=function(){return(null==T.$$s?this:T.$$s).$roll_once(6)}).$$s=this,T.$$arity=0,T)),a=o,B(t(b,"D66SortType"),"ASC")["$==="](a)?k["$sort!"]():B(t(b,"D66SortType"),"DESC")["$==="](a)&&k["$sort!"]()["$reverse!"](),O(P(k["$[]"](0),10),k["$[]"](1))},g.$$arity=1),z.$private(),e.def(z,"$rand_inner",L=function(o){var f,T=this;return A(function(m,x){return"number"==typeof m&&"number"==typeof x?m>=x:m["$>="](x)}(T.rand_results.$size(),t(b,"UPPER_LIMIT_RANDS")))&&T.$raise(t(b,"TooManyRandsError")),f=T.$random(o),T.rand_results["$<<"]([f,o]),f},L.$$arity=1),e.def(z,"$random",j=function(o){return O(t(b,"Kernel").$rand(o),1)},j.$$arity=1),e.def(z,"$push_to_detail",l=function(o,T,f){var a;return a=t(b,"DetailedRandResult").$new(o,T,f),this.detailed_rand_results.$push(a)},l.$$arity=3),void function(w,V,q){[i(w,V,"TooManyRandsError")].concat(q)}(G[0],t(G,"StandardError"),G)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var B,A,G,q,z,b,n,w,V,m,M,O=[],E=e.nil,P=e.$$,c=e.module,F=e.klass,$=e.truthy;return B=O,A=M=[c(O[0],"BCDice")].concat(B),G=m=[c(M[0],"DiceTable")].concat(A),w=F(m[0],null,"RollResult"),V=[w].concat(G),w.$$prototype.table_name=w.$$prototype.value=w.$$prototype.body=E,e.def(w,"$initialize",q=function(u,y,S){var h=this;return h.table_name=u,h.value=y,h.body=S},q.$$arity=3),w.$attr_reader("table_name"),w.$attr_reader("value"),w.$attr_reader("body"),e.def(w,"$to_s",z=function(){var u=this;return u.table_name+"("+u.value+") \uff1e "+u.body},z.$$arity=0),e.def(w,"$last_body",b=function(){var u=this;return $(u.body["$is_a?"](P(V,"RollResult")))?u.body.$last_body():u.body},b.$$arity=0),void e.def(w,"$empty?",n=function(){return!1},n.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,Y,w,z,b,V,q,x,i,E=[],r=e.nil,c=e.$$,F=e.module,$=e.klass,d=e.truthy;return t=E,Y=i=[F(E[0],"BCDice")].concat(t),w=x=[F(i[0],"DiceTable")].concat(Y),V=$(x[0],null,"ChainTable"),q=[V].concat(w),V.$$prototype.times=V.$$prototype.sides=V.$$prototype.items=V.$$prototype.name=r,e.def(V,"$initialize",z=function(v,u,y){var S=this,h=r;return S.name=v,S.items=y.$freeze(),h=/(\d+)D(\d+)/i.$match(u),d(h)||S.$raise(c(q,"ArgumentError"),"Unexpected table type: "+u),S.times=h["$[]"](1).$to_i(),S.sides=h["$[]"](2).$to_i()},z.$$arity=3),void e.def(V,"$roll",b=function(v){var y,S,u=this,h=r;return S=function(B,t){return"number"==typeof B&&"number"==typeof t?B-t:B["$-"](t)}(y=v.$roll_sum(u.times,u.sides),u.times),h=u.items["$[]"](S),d(h["$respond_to?"]("roll"))&&(h=h.$roll(v)),c(q,"RollResult").$new(u.name,y,h)},b.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function E(M,i){return"number"==typeof M&&"number"==typeof i?M-i:M["$-"](i)}var i,x,q,n,v,u,z,b,G,Y,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.hash2;return i=P,x=Y=[d(P[0],"BCDice")].concat(i),q=G=[d(Y[0],"DiceTable")].concat(x),z=B(G[0],null,"D66GridTable"),b=[z].concat(q),z.$$prototype.name=z.$$prototype.items=c,e.defs(z,"$from_i18n",n=function(S,h){var g=c;return g=$(b,"I18n").$t(S,t(["locale","raise"],{locale:h,raise:!0})),this.$new(g["$[]"]("name"),g["$[]"]("items"))},n.$$arity=2),e.def(z,"$initialize",v=function(S,h){return this.name=S,this.items=h.$freeze()},v.$$arity=2),void e.def(z,"$roll",u=function(S){var R,g,L,j,l,M;return R=S.$roll_once(6),g=S.$roll_once(6),L=function(M,i){return"number"==typeof M&&"number"==typeof i?M+i:M["$+"](i)}("number"==typeof(M=R)?10*M:M["$*"](10),g),j=E(R,1),l=E(g,1),$(b,"RollResult").$new(this.name,L,this.items["$[]"](j)["$[]"](l))},u.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var B,A,G,q,z,w,V,m,M,O=[],E=e.nil,P=e.$$,c=e.module,F=e.klass,$=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=O,A=M=[c(O[0],"BCDice")].concat(B),G=m=[c(M[0],"DiceTable")].concat(A),w=F(m[0],P(m,"D66GridTable"),"D66HalfGridTable"),V=[w].concat(G),e.defs(w,"$from_i18n",q=function(n,v){var y=E;return y=P(V,"I18n").$t(n,$(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2_3"),y["$[]"]("items_4_5_6"))},q.$$arity=2),void e.def(w,"$initialize",z=function(n,v,u){return this.name=n,this.items=[v,v,v,u,u,u].$freeze()},z.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var B,A,G,q,z,w,V,m,M,O=[],E=e.nil,P=e.$$,c=e.module,F=e.klass,$=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),B=O,A=M=[c(O[0],"BCDice")].concat(B),G=m=[c(M[0],"DiceTable")].concat(A),w=F(m[0],P(m,"D66GridTable"),"D66OneThirdTable"),V=[w].concat(G),e.defs(w,"$from_i18n",q=function(n,v){var y=E;return y=P(V,"I18n").$t(n,$(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items_1_2"),y["$[]"]("items_3_4"),y["$[]"]("items_5_6"))},q.$$arity=2),void e.def(w,"$initialize",z=function(n,v,u,y){return this.name=n,this.items=[v,v,u,u,y,y].$freeze()},z.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var i,x,q,n,v,u,z,b,G,Y,r=[],P=e.nil,c=e.$$$,F=e.$$,$=e.module,d=e.klass,B=e.hash2,t=e.truthy;return i=r,x=Y=[$(r[0],"BCDice")].concat(i),q=G=[$(Y[0],"DiceTable")].concat(x),z=d(G[0],null,"D66Table"),b=[z].concat(q),z.$$prototype.sort_type=z.$$prototype.items=z.$$prototype.name=P,e.defs(z,"$from_i18n",n=function(S,h){var L,g=P;return g=F(b,"I18n").$t(S,B(["locale"],{locale:h})),L=F(b,"D66SortType").$const_get(g["$[]"]("d66_sort_type")),this.$new(g["$[]"]("name"),L,g["$[]"]("items"))},n.$$arity=2),e.def(z,"$initialize",v=function(S,h,R){var g=this;return g.name=S,g.sort_type=h,g.items=R.$freeze()},v.$$arity=3),void e.def(z,"$roll",u=function(S){var g,l,M,h=this,R=P,L=P,j=P;return R=S.$roll_barabara(2,6),g=h.sort_type,c(F(b,"D66SortType"),"ASC")["$==="](g)?R["$sort!"]():c(F(b,"D66SortType"),"DESC")["$==="](g)&&R["$sort!"]()["$reverse!"](),L=function(M,i){return"number"==typeof M&&"number"==typeof i?M+i:M["$+"](i)}("number"==typeof(M=R["$[]"](0))?10*M:M["$*"](10),R["$[]"](1)),j=t(l=h.items["$[]"](L))?l:h.items["$[]"](L.$to_s()),t(j["$respond_to?"]("roll"))&&(j=j.$roll(S)),F(b,"RollResult").$new(h.name,L,j)},u.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function X(A,Y){return"number"==typeof A&&"number"==typeof Y?A+Y:A["$+"](Y)}var Y,b,u,n,G,V,x,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.hash2,M=e.send,i=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),Y=P,G=x=[d(P[0],"BCDice")].concat(Y),b=V=[d(x[0],"DiceTable")].concat(G),[n=B(V[0],$(V,"D66Table"),"D66LeftRangeTable")].concat(b),void e.def(n,"$initialize",u=function(S,h,R){var g,_,l=this;return u.$$p&&(u.$$p=null),_=t([],{}),M(R,"each",[],((g=function(o){function T(f){return o.apply(this,arguments)}return T.toString=function(){return o.toString()},T}(function(o){var f,a,U,T=null==g.$$s?this:g.$$s;return null==o&&(o=c),f=e.to_ary(o),U=null==f[1]?c:f[1],M(null==f[0]?c:f[0],"each",[],((a=function(Q){var ue;return null==Q&&(Q=c),M(U,"each_with_index",[],((ue=function(De,Pe){var Be,me,A;return null==De&&(De=c),null==Pe&&(Pe=c),Be=X("number"==typeof(A=Q)?10*A:A["$*"](10),X(Pe,1)),M(_,"[]=",e.to_a(me=[Be,De])),me[function(A,Y){return"number"==typeof A?A-1:A["$-"](1)}(me.length)]}).$$s=null==a.$$s?this:a.$$s,ue.$$arity=2,ue))}).$$s=T,a.$$arity=1,a))})).$$s=l,g.$$arity=1,g)),i(l,e.find_super_dispatcher(l,"initialize",u,!1,!0),"initialize",[S,h,_],null)},u.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var i,x,q,n,v,z,b,G,Y,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.truthy;return i=P,x=Y=[d(P[0],"BCDice")].concat(i),q=G=[d(Y[0],"DiceTable")].concat(x),z=B(G[0],null,"D66ParityTable"),b=[z].concat(q),z.$$prototype.odd=z.$$prototype.even=z.$$prototype.name=c,e.def(z,"$initialize",n=function(y,S,h){var R=this;return R.name=y,R.odd=S.$freeze(),R.even=h.$freeze()},n.$$arity=3),void e.def(z,"$roll",v=function(y){var R,L,j,M,S=this,h=c;return h=y.$roll_once(6),R=y.$roll_once(6),L=(t(h["$odd?"]())?S.odd:S.even)["$[]"]("number"==typeof(M=R)?M-1:M["$-"](1)),j=function(M,i){return"number"==typeof M&&"number"==typeof i?M+i:M["$+"](i)}(function(M,i){return"number"==typeof M?10*M:M["$*"](10)}(h),R),$(b,"RollResult").$new(S.name,j,L)},v.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var M,m,V,b,n,q,z,K,A,r=[],P=e.nil,F=e.$$,$=e.module,d=e.klass,B=e.send;return M=r,m=A=[$(r[0],"BCDice")].concat(M),V=K=[$(A[0],"DiceTable")].concat(m),q=d(K[0],null,"D66RangeTable"),z=[q].concat(V),q.$$prototype.items=q.$$prototype.name=P,e.def(q,"$initialize",b=function(u,y){return this.name=u,this.items=y.$freeze()},b.$$arity=2),void e.def(q,"$roll",n=function(u){var y,h,R,g,t,S=this,L=P;return h=u.$roll_once(6),R=u.$roll_once(6),g=function(t,M){return"number"==typeof t&&"number"==typeof M?t+M:t["$+"](M)}("number"==typeof(t=h)?10*t:t["$*"](10),R),L=B(S.items,"find",[],((y=function(l){return null==l&&(l=P),l["$[]"](0)["$include?"](g)}).$$s=S,y.$$arity=1,y)),F(z,"RollResult").$new(S.name,g,L["$[]"](1))},n.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var A,K,z,v,u,y,S,h,R,g,L,j,b,n,w,m,P=[],c=e.nil,$=e.$$,d=e.module,B=e.klass,t=e.send,M=e.truthy;return A=P,K=m=[d(P[0],"BCDice")].concat(A),z=w=[d(m[0],"DiceTable")].concat(K),b=B(w[0],null,"RangeTable"),n=[b].concat(z),b.$$prototype.name=b.$$prototype.items=b.$$prototype.num_of_dice=b.$$prototype.num_of_sides=b.$$prototype.formatter=c,e.const_set(n[0],"RollResult",t($(n,"Struct"),"new",["sum","values","content","formatted"],((v=function(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")}).$$s=b,v.$$arity=0,v))),e.const_set(n[0],"Item",$(n,"Struct").$new("range","content")),e.const_set(n[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(n[0],"DEFAULT_FORMATTER",t(b,"lambda",[],($$2=function(l){function _(o,T){return l.apply(this,arguments)}return _.toString=function(){return l.toString()},_}(function(l,_){return null==$$2.$$s||$$2,null==l&&(l=c),null==_&&(_=c),l.$name()+"("+_.$sum()+") \uff1e "+_.$content()}),$$2.$$s=b,$$2.$$arity=2,$$2))),b.$attr_reader("name"),b.$attr_reader("num_of_dice"),b.$attr_reader("num_of_sides"),e.def(b,"$initialize",u=function(_,o,T){var p,f=u.$$p,k=f||c,a=this,U=c;return f&&(u.$$p=null),f&&(u.$$p=null),a.name=_.$freeze(),a.formatter=M(p=k)?p:$(n,"DEFAULT_FORMATTER"),U=$(n,"DICE_ROLL_METHOD_RE").$match(o),M(U)||a.$raise($(n,"ArgumentError"),a.name+": invalid dice roll method: "+o),a.num_of_dice=U["$[]"](1).$to_i(),a.num_of_sides=U["$[]"](2).$to_i(),a.$store(T)},u.$$arity=3),e.def(b,"$fetch",y=function(_){var o,f,T=this;return f=t(T.items,"find",[],((o=function(a){return null==a&&(a=c),a.$range()["$include?"](_)}).$$s=T,o.$$arity=1,o)),M(f)||T.$raise($(n,"RangeError"),T.name+": value is out of range: "+_),f},y.$$arity=1),e.def(b,"$roll",S=function(_){var f,k,a,i,o=this,T=c;return f=(T=_.$roll_barabara(o.num_of_dice,o.num_of_sides)).$sum(),k=$(n,"RollResult").$new(f,T,o.$fetch(f).$content()),a=[o.formatter["$[]"](o,k)],t(k,"formatted=",e.to_a(a)),"number"==typeof(i=a.length)||i["$-"](1),k},S.$$arity=1),b.$private(),e.def(b,"$store",h=function(_){var o,T,f,a,p,k=this;return a=t(_,"map",[],((o=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),[(null==o.$$s?this:o.$$s).$coerce_to_int_range(Z),Q]}).$$s=k,o.$$arity=2,o)),p=t(a,"sort_by",[],((T=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),Z.$min()}).$$s=k,T.$$arity=2,T)),k.$assert_min_sum_is_covered(p),k.$assert_max_sum_is_covered(p),k.$assert_no_gap_or_overlap_in_ranges(p),k.items=t(p,"map",[],(f=function(Z,Q){return null==Z&&(Z=c),null==Q&&(Q=c),$(n,"Item").$new(Z,Q.$freeze()).$freeze()},f.$$s=k,f.$$arity=2,f)).$freeze(),k},h.$$arity=1),e.def(b,"$coerce_to_int_range",R=function(_){var T,f=c;return T=_,$(n,"Integer")["$==="](T)?$(n,"Range").$new(_,_):$(n,"Range")["$==="](T)&&M(M(f=_.$begin()["$is_a?"]($(n,"Integer")))?_.$end()["$is_a?"]($(n,"Integer")):f)?_:this.$raise($(n,"TypeError"),this.name+": "+_+" ("+_.$class()+") must be an Integer or a Range with Integers ")},R.$$arity=1),e.def(b,"$assert_min_sum_is_covered",g=function(_){var T,o=this,f=c;return T=o.num_of_dice,f=_.$first()["$[]"](0),M(f["$include?"](T))||o.$raise($(n,"RangeError"),o.name+": min value ("+T+") is not covered: "+f),o},g.$$arity=1),e.def(b,"$assert_max_sum_is_covered",L=function(_){var T,o=this,f=c;return T=function(i,A){return"number"==typeof i&&"number"==typeof A?i*A:i["$*"](A)}(o.num_of_dice,o.num_of_sides),f=_.$last()["$[]"](0),M(f["$include?"](T))||o.$raise($(n,"RangeError"),o.name+": max value ("+T+") is not covered: "+f),o},L.$$arity=1),void e.def(b,"$assert_no_gap_or_overlap_in_ranges",j=function(_){var o;return t(_,"each_cons",[2],((o=function(k,a){var Q,ae,i,p=null==o.$$s?this:o.$$s,U=c,Z=c;return null==p.name&&(p.name=c),null==k&&(k=c),null==a&&(a=c),U=k["$[]"](0),Z=a["$[]"](0),ae="number"==typeof(i=Q=U.$max())?i+1:i["$+"](1),M(Z["$include?"](Q))&&p.$raise($(n,"RangeError"),p.name+": Range overlap: "+U+" and "+Z),M(Z["$include?"](ae))?c:p.$raise($(n,"RangeError"),p.name+": Range gap: "+U+" and "+Z)}).$$s=this,o.$$arity=2,o)),this},j.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,Y,w,n,y,S,h,v,u,q,x,i,E=[],r=e.nil,P=e.$$$,c=e.$$,F=e.module,$=e.klass,d=e.send;return t=E,Y=i=[F(E[0],"BCDice")].concat(t),w=x=[F(i[0],"DiceTable")].concat(Y),n=q=[$(x[0],null,"SaiFicSkillTable")].concat(w),v=$(q[0],null,"Category"),u=[v].concat(n),v.$$prototype.name=r,e.def(v,"$initialize",y=function(g,L,j,l){var _,o=this;return o.name=g,o.skills=d(L.$map(),"with_index",[2],((_=function(T){function f(k,a){return T.apply(this,arguments)}return f.toString=function(){return T.toString()},f}(function(T,f){return null==T&&(T=r),null==f&&(f=r),P(c(u,"SaiFicSkillTable"),"Skill").$new(g,T,j,f,l)})).$$s=o,_.$$arity=2,_)),o.dice=j},y.$$arity=4),e.def(v,"$roll",S=function(g){return this.$skills()["$[]"]("number"==typeof(B=g.$roll_sum(2,6))?B-2:B["$-"](2));var B},S.$$arity=1),e.def(v,"$to_s",h=function(){return this.name},h.$$arity=0),void v.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var B,A,b,u,y,n,G,V,m,M,O=[],E=e.nil,c=e.module,F=e.klass,$=e.hash2;return B=O,A=M=[c(O[0],"BCDice")].concat(B),G=m=[c(M[0],"DiceTable")].concat(A),b=V=[F(m[0],null,"SaiFicSkillTable")].concat(G),[n=F(V[0],null,"Skill")].concat(b),n.$$prototype.s_format=n.$$prototype.category_dice=n.$$prototype.row_dice=n.$$prototype.category_name=n.$$prototype.name=E,e.def(n,"$initialize",u=function(h,R,g,L,j){var l=this;return l.category_name=h,l.name=R,l.category_dice=g,l.row_dice=L,l.s_format=j},u.$$arity=5),e.def(n,"$to_s",y=function(){var h=this;return h.$format(h.s_format,$(["category_dice","row_dice","category_name","skill_name"],{category_dice:h.category_dice,row_dice:h.row_dice,category_name:h.category_name,skill_name:h.name}))},y.$$arity=0),void n.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var Y,G,b,u,y,S,h,R,g,L,n,v,V,x,E=e.top,r=[],P=e.nil,c=e.$$$,F=e.$$,$=e.module,d=e.klass,B=e.hash2,t=e.send,i=e.truthy;return E.$require("bcdice/dice_table/sai_fic_skill_table/category"),E.$require("bcdice/dice_table/sai_fic_skill_table/skill"),Y=r,G=x=[$(r[0],"BCDice")].concat(Y),b=V=[$(x[0],"DiceTable")].concat(G),n=d(V[0],null,"SaiFicSkillTable"),v=[n].concat(b),n.$$prototype.rtt=n.$$prototype.rtt_format=n.$$prototype.rct=n.$$prototype.rct_format=n.$$prototype.rttn=n.$$prototype.rttn_format=n.$$prototype.categories=P,e.defs(n,"$from_i18n",u=function(l,_,o){var T,f,k,a,Q,Z=P;if(null==o)o=B([],{});else if(!o.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(T=o.$$smap.rtt)&&(T=P),null==(f=o.$$smap.rct)&&(f=P),null==(k=o.$$smap.rttn)&&(k=P),Q=(Z=F(v,"I18n").$t("RTT",B(["locale","raise","default"],{locale:_,raise:!1,default:B([],{})})).$merge(F(v,"I18n").$t(l,B(["locale","raise"],{locale:_,raise:!0}))))["$[]"]("items"),Z=t(Z,"select",[],((a=function(ae){function ue(ye,De){return ae.apply(this,arguments)}return ue.toString=function(){return ae.toString()},ue}(function(ae,ue){return null==ae&&(ae=P),null==ue&&(ue=P),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](ae)})).$$s=this,a.$$arity=2,a)),this.$new(Q,e.to_hash(Z).$merge(B(["rtt","rct","rttn"],{rtt:T,rct:f,rttn:k})))},u.$$arity=-3),e.const_set(v[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(v[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(v[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(v[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(n,"$initialize",y=function(l,_){var o,T,f,k,a,p,U,Z,Q=this;if(null==_)_=B([],{});else if(!_.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(o=_.$$smap.rtt)&&(o=P),null==(T=_.$$smap.rct)&&(T=P),null==(f=_.$$smap.rttn)&&(f=P),null==(k=_.$$smap.rtt_format)&&(k=F(v,"DEFAULT_RTT")),null==(a=_.$$smap.rct_format)&&(a=F(v,"DEFAULT_RCT")),null==(p=_.$$smap.rttn_format)&&(p=F(v,"DEFAULT_RTTN")),null==(U=_.$$smap.s_format)&&(U=F(v,"DEFAULT_S")),Q.categories=t(l.$map(),"with_index",[1],((Z=function(ue,ye){var Pe,Be,me;return null==ue&&(ue=P),null==ye&&(ye=P),Be=null==(Pe=e.to_ary(ue))[0]?P:Pe[0],me=null==Pe[1]?P:Pe[1],c(F(v,"SaiFicSkillTable"),"Category").$new(Be,me,ye,U)}).$$s=Q,Z.$$arity=2,Z.$$has_top_level_mlhs_arg=!0,Z)),Q.rtt=o,Q.rct=T,Q.rttn=f.$to_a(),Q.rtt_format=k,Q.rct_format=a,Q.rttn_format=p},y.$$arity=-2),e.const_set(v[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),n.$attr_reader("categories"),e.def(n,"$roll_command",S=function(l,_){var T,o=this,f=P,k=P,a=P;return i(["RTT",o.rtt]["$include?"](T=_))?o.$format_skill(o.rtt_format,o.$roll_skill(l)):i(["RCT",o.rct]["$include?"](T))?(f=o.$roll_category(l),o.$format(o.rct_format,B(["category_dice","category_name"],{category_dice:f.$dice(),category_name:f.$name()}))):i(i(k=a=F(v,"RTTN").$index(T))?k:a=o.rttn.$index(T))?o.$format_skill(o.rttn_format,o.categories["$[]"](a).$roll(l)):P},S.$$arity=2),e.def(n,"$roll_category",h=function(l){return this.categories["$[]"]("number"==typeof(A=l.$roll_once(6))?A-1:A["$-"](1));var A},h.$$arity=1),e.def(n,"$roll_skill",R=function(l){return this.$roll_category(l).$roll(l)},R.$$arity=1),e.def(n,"$prefixes",g=function(){var l=this;return function(A,Y){return"number"==typeof A&&"number"==typeof Y?A+Y:A["$+"](Y)}(["RTT[1-6]?","RCT",l.rtt,l.rct],l.rttn).$compact()},g.$$arity=0),n.$private(),void e.def(n,"$format_skill",L=function(l,_){return this.$format(l,B(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:_.$category_dice(),row_dice:_.$row_dice(),category_name:_.$category_name(),skill_name:_.$name(),text:_.$to_s()}))},L.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var M,m,V,b,n,v,u,q,z,K,A,E=[],r=e.nil,c=e.$$,F=e.module,$=e.klass,d=e.hash2,B=e.truthy;return M=E,m=A=[F(E[0],"BCDice")].concat(M),V=K=[F(A[0],"DiceTable")].concat(m),q=$(K[0],null,"Table"),z=[q].concat(V),q.$$prototype.times=q.$$prototype.sides=q.$$prototype.name=q.$$prototype.items=r,e.defs(q,"$from_i18n",b=function(S,h){var g=r;return g=c(z,"I18n").$t(S,d(["locale"],{locale:h})),this.$new(g["$[]"]("name"),g["$[]"]("type"),g["$[]"]("items"))},b.$$arity=2),e.def(q,"$initialize",n=function(S,h,R){var g=this,L=r;return g.name=S,g.items=R.$freeze(),L=/(\d+)D(\d+)/i.$match(h),B(L)||g.$raise(c(z,"ArgumentError"),"Unexpected table type: "+h),g.times=L["$[]"](1).$to_i(),g.sides=L["$[]"](2).$to_i()},n.$$arity=3),e.def(q,"$roll",v=function(S){var R,h=this;return R=S.$roll_sum(h.times,h.sides),h.$choice(R)},v.$$arity=1),void e.def(q,"$choice",u=function(S){var R,h=this;return R=function(t,M){return"number"==typeof t&&"number"==typeof M?t-M:t["$-"](M)}(S,h.times),c(z,"RollResult").$new(h.name,S,h.items["$[]"](R))},u.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var X=e.top;return X.$require("bcdice/dice_table/roll_result"),X.$require("bcdice/dice_table/chain_table"),X.$require("bcdice/dice_table/d66_grid_table"),X.$require("bcdice/dice_table/d66_half_grid_table"),X.$require("bcdice/dice_table/d66_one_third_table"),X.$require("bcdice/dice_table/d66_left_range_table"),X.$require("bcdice/dice_table/d66_parity_table"),X.$require("bcdice/dice_table/d66_range_table"),X.$require("bcdice/dice_table/d66_table"),X.$require("bcdice/dice_table/range_table"),X.$require("bcdice/dice_table/sai_fic_skill_table"),X.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var $,M,A,B,O=[],c=e.module;return $=O,M=B=[c(O[0],"BCDice")].concat($),A=[c(B[0],"D66SortType")].concat(M),e.const_set(A[0],"NO_SORT","no_sort"),e.const_set(A[0],"ASC","asc"),e.const_set(A[0],"DESC","desc"),void function(t,M){var A=[c(t,"RoundType")].concat(M);e.const_set(A[0],"CEIL","ceil"),e.const_set(A[0],"FLOOR","floor"),e.const_set(A[0],"ROUND","round")}(B[0],B)},Opal.modules["bcdice/translate"]=function(e){var B,A,x,Y,m,M,O=[],E=e.nil,P=e.$$,c=e.module,F=e.hash2;return B=O,A=M=[c(O[0],"BCDice")].concat(B),Y=c(M[0],"Translate"),m=[Y].concat(A),void e.def(Y,"$translate",x=function(G,w){var V,q=this;if(null==q.locale&&(q.locale=E),null==w)w=F([],{});else if(!w.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return V=e.kwrestargs(w,{}),P(m,"I18n").$translate(G,F(["locale","raise"],{locale:q.locale,raise:!0}).$merge(e.to_hash(V)))},x.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function X(B,t){return"number"==typeof B&&"number"==typeof t?B-t:B["$-"](t)}var t,v,S,h,R,g,L,m,G,w,V,q,z,b,n,x,K,i,E=[],r=e.nil,$=e.klass,d=e.send;return t=E,m=i=[(0,e.module)(E[0],"BCDice")].concat(t),K=[x=$(i[0],null,"Result")].concat(m),x.$$prototype.secret=x.$$prototype.success=x.$$prototype.failure=x.$$prototype.critical=x.$$prototype.fumble=r,[v=e.get_singleton_class(x)].concat(K),e.def(v,"$success",S=function(l){var _;return d(this.$new(),"tap",[],((_=function(T){function f(k){return T.apply(this,arguments)}return f.toString=function(){return T.toString()},f}(function(T){var k=r;return null==T&&(T=r),d(T,"text=",e.to_a(k=[l])),X(k.length,1),d(T,"success=",e.to_a(k=[!0])),k[X(k.length,1)]})).$$s=this,_.$$arity=1,_))},S.$$arity=1),e.def(v,"$failure",h=function(l){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[l])),X(a.length,1),d(f,"failure=",e.to_a(a=[!0])),a[X(a.length,1)]}).$$s=this,_.$$arity=1,_))},h.$$arity=1),e.def(v,"$critical",R=function(l){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[l])),X(a.length,1),d(f,"critical=",e.to_a(a=[!0])),X(a.length,1),d(f,"success=",e.to_a(a=[!0])),a[X(a.length,1)]}).$$s=this,_.$$arity=1,_))},R.$$arity=1),e.def(v,"$fumble",g=function(l){var _;return d(this.$new(),"tap",[],((_=function(f){var a=r;return null==f&&(f=r),d(f,"text=",e.to_a(a=[l])),X(a.length,1),d(f,"fumble=",e.to_a(a=[!0])),X(a.length,1),d(f,"failure=",e.to_a(a=[!0])),a[X(a.length,1)]}).$$s=this,_.$$arity=1,_))},g.$$arity=1),e.def(v,"$nothing",L=function(){return"nothing"},L.$$arity=0),e.def(x,"$initialize",G=function(u){var y=this;return null==u&&(u=r),y.text=u,y.rands=r,y.detailed_rands=r,y.secret=!1,y.success=!1,y.failure=!1,y.critical=!1,y.fumble=!1},G.$$arity=-1),x.$attr_accessor("text","rands","detailed_rands"),x.$attr_writer("secret","success","failure","critical","fumble"),e.def(x,"$secret?",w=function(){return this.secret},w.$$arity=0),e.def(x,"$success?",V=function(){return this.success},V.$$arity=0),e.def(x,"$failure?",q=function(){return this.failure},q.$$arity=0),e.def(x,"$critical?",z=function(){return this.critical},z.$$arity=0),e.def(x,"$fumble?",b=function(){return this.fumble},b.$$arity=0),void e.def(x,"$condition=",n=function(u){return this.success=u,this.failure=u["$!"]()},n.$$arity=1)},Opal.modules["racc/parser"]=function(e){function X(G,w){return"number"==typeof G&&"number"==typeof w?G<w:G["$<"](w)}function O(G,w){return"number"==typeof G&&"number"==typeof w?G-w:G["$-"](w)}function E(G,w){return"number"==typeof G&&"number"==typeof w?G+w:G["$+"](w)}function r(G,w){return"number"==typeof G&&"number"==typeof w?G>=w:G["$>="](w)}function P(G,w){return"number"==typeof G&&"number"==typeof w?G>w:G["$>"](w)}function c(G,w){return"number"==typeof G&&"number"==typeof w?G<=w:G["$<="](w)}var z,b,n,w,q,B=[],t=e.nil,M=e.$$$,i=e.$$,A=e.module,Y=e.klass,m=e.truthy,x=e.gvars,K=e.send;return w=B,z=(q=[A(B[0],"Racc")].concat(w))[0],b=i(q,"StandardError"),n=q,[Y(z,b,"ParseError")].concat(n),m(M("::","ParseError","skip_raise")?"constant":t)||e.const_set(B[0],"ParseError",M(i(B,"Racc"),"ParseError")),function(G,w){var v,S,h,R,g,L,j,l,_,o,T,f,k,a,p,U,Z,Q,ae,ue,ye,De,Pe,ze,Be,u,y,q=[A(G,"Racc")].concat(w);m(i(q,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(q[0],"Racc_No_Extensions",!1),v=q,u=Y(q[0],null,"Parser"),y=[u].concat(v),u.$$prototype.yydebug=u.$$prototype.racc_debug_out=u.$$prototype.racc_error_status=u.$$prototype.racc_t=u.$$prototype.racc_vstack=u.$$prototype.racc_val=u.$$prototype.racc_state=u.$$prototype.racc_tstack=t,e.const_set(y[0],"Racc_Runtime_Version","1.4.6"),e.const_set(y[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(y[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(y[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(y[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(y[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(y[0],"Racc_Runtime_Core_Version",i(y,"Racc_Runtime_Core_Version_R")),e.const_set(y[0],"Racc_Runtime_Core_Revision",i(y,"Racc_Runtime_Core_Revision_R")),e.const_set(y[0],"Racc_Runtime_Type","ruby"),e.defs(i(y,"Parser"),"$racc_runtime_type",S=function(){return i(y,"Racc_Runtime_Type")},S.$$arity=0),e.def(u,"$_racc_setup",h=function(){var re,ee,s=this,I=t,C=t,D=t;return null==x.stderr&&(x.stderr=t),m(M(s.$class(),"Racc_debug_parser"))||(s.yydebug=!1),m(null!=(re=s.yydebug)&&re!==t?"instance-variable":t)||(s.yydebug=!1),m(s.yydebug)&&(m(null!=(ee=s.racc_debug_out)&&ee!==t?"instance-variable":t)||(s.racc_debug_out=x.stderr),s.racc_debug_out=m(I=s.racc_debug_out)?I:x.stderr),C=M(s.$class(),"Racc_arg"),m(X(C.$size(),14))&&(K(C,"[]=",e.to_a(D=[13,!0])),O(D.length,1)),C},h.$$arity=0),e.def(u,"$_racc_init_sysvars",R=function(){var re=this;return re.racc_state=[0],re.racc_tstack=[],re.racc_vstack=[],re.racc_t=t,re.racc_val=t,re.racc_read_next=!0,re.racc_user_yyerror=!1,re.racc_error_status=0},R.$$arity=0),e.def(u,"$do_parse",g=function(){return this.$__send__(i(y,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},g.$$arity=0),e.def(u,"$next_token",L=function(){return this.$raise(i(y,"NotImplementedError"),this.$class()+"#next_token is not defined")},L.$$arity=0),e.def(u,"$_racc_do_parse_rb",j=function(re,ee){var s,C,D=this,J=t,te=t,$e=t,be=t,ie=t,ve=t,ge=t,de=t;return s=e.to_ary(re),J=null==s[0]?t:s[0],te=null==s[1]?t:s[1],$e=null==s[2]?t:s[2],be=null==s[3]?t:s[3],ie=null==s[10]?t:s[10],D.$_racc_init_sysvars(),ve=ge=de=t,K(D,"catch",["racc_end_parse"],((C=function(){var Ce,Ae,se=null==C.$$s?this:C.$$s,Re=t,Ie=t,Me=t;for(null==se.racc_state&&(se.racc_state=t),null==se.racc_read_next&&(se.racc_read_next=t),null==se.racc_t&&(se.racc_t=t),null==se.yydebug&&(se.yydebug=t),null==se.racc_val&&(se.racc_val=t);m(!0);)for(m(de=be["$[]"](se.racc_state["$[]"](-1)))?(m(se.racc_read_next)&&m(se.racc_t["$!="](0))&&(Ae=se.$next_token(),Ce=e.to_ary(Ae),ve=null==Ce[0]?t:Ce[0],se.racc_val=null==Ce[1]?t:Ce[1],se.racc_t=m(ve)?m(Re=ie["$[]"](ve))?Re:1:0,m(se.yydebug)&&se.$racc_read_token(se.racc_t,ve,se.racc_val),se.racc_read_next=!1),de=E(de,se.racc_t),m(m(Ie=m(Me=r(de,0))?ge=J["$[]"](de):Me)?te["$[]"](de)["$=="](se.racc_state["$[]"](-1)):Ie)||(ge=$e["$[]"](se.racc_state["$[]"](-1)))):ge=$e["$[]"](se.racc_state["$[]"](-1));m(ge=se.$_racc_evalact(ge,re)););}).$$s=D,C.$$arity=0,C))},j.$$arity=2),e.def(u,"$yyparse",l=function(re,ee){return this.$__send__(i(y,"Racc_YY_Parse_Method"),re,ee,this.$_racc_setup(),!0)},l.$$arity=2),e.def(u,"$_racc_yyparse_rb",_=function(re,ee,s,I){var C,J,$e=t,be=t,ne=t,ie=t,ge=t,de=t,Te=t;return C=e.to_ary(s),$e=null==C[0]?t:C[0],be=null==C[1]?t:C[1],ne=null==C[2]?t:C[2],ie=null==C[3]?t:C[3],ge=null==C[10]?t:C[10],this.$_racc_init_sysvars(),de=t,Te=t,K(this,"catch",["racc_end_parse"],((J=function(){var Re,ke=null==J.$$s?this:J.$$s;for(null==ke.racc_state&&(ke.racc_state=t);!m(Te=ie["$[]"](ke.racc_state["$[]"](-1)));)for(;m(de=ke.$_racc_evalact(ne["$[]"](ke.racc_state["$[]"](-1)),s)););return K(re,"__send__",[ee],((Re=function(Me,we){var We,Ue,Se=null==Re.$$s?this:Re.$$s,qe=t,Ge=t,je=t,He=t,ce=t,W=t,le=t;for(null==Se.racc_t&&(Se.racc_t=t),null==Se.racc_state&&(Se.racc_state=t),null==Se.racc_read_next&&(Se.racc_read_next=t),null==Me&&(Me=t),null==we&&(we=t),Se.racc_t=m(Me)?m(qe=ge["$[]"](Me))?qe:1:0,Se.racc_val=we,Se.racc_read_next=!1,Te=E(Te,Se.racc_t),m(m(We=m(Ue=r(Te,0))?de=$e["$[]"](Te):Ue)?be["$[]"](Te)["$=="](Se.racc_state["$[]"](-1)):We)||(de=ne["$[]"](Se.racc_state["$[]"](-1)));m(de=Se.$_racc_evalact(de,s)););for(;m(m(Ge=m(je=(Te=ie["$[]"](Se.racc_state["$[]"](-1)))["$!"]())?je:Se.racc_read_next["$!"]())?Ge:Se.racc_t["$=="](0));)for(m(m(He=m(ce=m(W=m(le=Te)?Te=E(Te,Se.racc_t):le)?r(Te,0):W)?de=$e["$[]"](Te):ce)?be["$[]"](Te)["$=="](Se.racc_state["$[]"](-1)):He)||(de=ne["$[]"](Se.racc_state["$[]"](-1)));m(de=Se.$_racc_evalact(de,s)););}).$$s=ke,Re.$$arity=2,Re))}).$$s=this,J.$$arity=0,J))},_.$$arity=4),e.def(u,"$_racc_evalact",o=function(re,ee){var s,C,ne,ve,D=this,J=t,te=t,be=t,ie=t,ge=t,de=t,Te=t,se=t,ke=t,Ce=t;if(J=null==(s=e.to_ary(ee))[0]?t:s[0],te=null==s[1]?t:s[1],be=null==s[3]?t:s[3],ne=null==s[11]?t:s[11],ie=null==s[12]?t:s[12],m(m(ve=P(re,0))?X(re,ne):ve))m(P(D.racc_error_status,0))&&(D.racc_t["$=="](1)||(D.racc_error_status=O(D.racc_error_status,1))),D.racc_vstack.$push(D.racc_val),D.racc_state.$push(re),D.racc_read_next=!0,m(D.yydebug)&&(D.racc_tstack.$push(D.racc_t),D.$racc_shift(D.racc_t,D.racc_tstack,D.racc_vstack));else if(m(m(ge=X(re,0))?P(re,ie["$-@"]()):ge)){if(de=K(D,"catch",["racc_jump"],((C=function(){var Re=null==C.$$s?this:C.$$s;return null==Re.racc_state&&(Re.racc_state=t),Re.racc_state.$push(Re.$_racc_do_reduce(ee,re)),!1}).$$s=D,C.$$arity=0,C)),m(de)){if(1["$==="](Te=de))return D.racc_user_yyerror=!0,ie["$-@"]();if(2["$==="](Te))return ne;D.$raise("[Racc Bug] unknown jump code")}}else if(re["$=="](ne))m(D.yydebug)&&D.$racc_accept(),D.$throw("racc_end_parse",D.racc_vstack["$[]"](0));else{if(re["$=="](ie["$-@"]())){for((0)["$==="](Te=D.racc_error_status)?m(ee["$[]"](21))||D.$on_error(D.racc_t,D.racc_val,D.racc_vstack):3["$==="](Te)&&(D.racc_t["$=="](0)&&D.$throw("racc_end_parse",t),D.racc_read_next=!0),D.racc_user_yyerror=!1,D.racc_error_status=3;m(!0)&&(!m(se=be["$[]"](D.racc_state["$[]"](-1)))||(se=E(se,1),!m(m(ke=m(Ce=r(se,0))?re=J["$[]"](se):Ce)?te["$[]"](se)["$=="](D.racc_state["$[]"](-1)):ke)));)m(c(D.racc_state.$size(),1))&&D.$throw("racc_end_parse",t),D.racc_state.$pop(),D.racc_vstack.$pop(),m(D.yydebug)&&(D.racc_tstack.$pop(),D.$racc_e_pop(D.racc_state,D.racc_tstack,D.racc_vstack));return re}D.$raise("[Racc Bug] unknown action "+re.$inspect())}return m(D.yydebug)&&D.$racc_next_state(D.racc_state["$[]"](-1),D.racc_state),t},o.$$arity=2),e.def(u,"$_racc_do_reduce",T=function(re,ee){var s,ne,ve,Ce,Ae,Re,Se,C=this,J=t,te=t,$e=t,be=t,ie=t,ge=t,de=t,Te=t,se=t,ke=t,Ie=t,Me=t,we=t,Ne=t,Fe=t,qe=t;return J=null==(s=e.to_ary(re))[4]?t:s[4],te=null==s[5]?t:s[5],$e=null==s[6]?t:s[6],be=null==s[7]?t:s[7],ne=null==s[8]?t:s[8],ie=null==s[9]?t:s[9],ve=null==s[13]?t:s[13],ge=C.racc_state,de=C.racc_vstack,Te=C.racc_tstack,se=function(G,w){return"number"==typeof G?-3*G:G["$*"](-3)}(ee),ke=ie["$[]"](se),Ce=ie["$[]"](E(se,1)),Ae=ie["$[]"](E(se,2)),Re=[],m(C.yydebug)&&(Ie=Te["$[]"](ke["$-@"](),ke)),Me=de["$[]"](ke["$-@"](),ke),m(C.yydebug)&&(we=[ke["$-@"](),ke,Re],K(Te,"[]=",e.to_a(we)),O(we.length,1)),we=[ke["$-@"](),ke,Re],K(de,"[]=",e.to_a(we)),O(we.length,1),we=[ke["$-@"](),ke,Re],K(ge,"[]=",e.to_a(we)),O(we.length,1),m(ve)?de.$push(C.$__send__(Ae,Me,de,Me["$[]"](0))):de.$push(C.$__send__(Ae,Me,de)),Te.$push(Ce),m(C.yydebug)&&C.$racc_reduce(Ie,Ce,Te,de),Se=O(Ce,ne),m(se=be["$[]"](Se))&&(se=E(se,ge["$[]"](-1)),m(m(Ne=m(Fe=r(se,0))?qe=J["$[]"](se):Fe)?te["$[]"](se)["$=="](Se):Ne))?qe:$e["$[]"](Se)},T.$$arity=2),e.def(u,"$on_error",f=function(re,ee,s){var C,I=this;return I.$raise(i(y,"ParseError"),I.$sprintf("\nparse error on value %s (%s)",ee.$inspect(),m(C=I.$token_to_str(re))?C:"?"))},f.$$arity=3),e.def(u,"$yyerror",k=function(){return this.$throw("racc_jump",1)},k.$$arity=0),e.def(u,"$yyaccept",a=function(){return this.$throw("racc_jump",2)},a.$$arity=0),e.def(u,"$yyerrok",p=function(){return this.racc_error_status=0},p.$$arity=0),e.def(u,"$racc_read_token",U=function(re,ee,s){var I=this;return I.racc_debug_out.$print("read    "),I.racc_debug_out.$print(ee.$inspect(),"(",I.$racc_token2str(re),") "),I.racc_debug_out.$puts(s.$inspect()),I.racc_debug_out.$puts()},U.$$arity=3),e.def(u,"$racc_shift",Z=function(re,ee,s){var I=this;return I.racc_debug_out.$puts("shift   "+I.$racc_token2str(re)),I.$racc_print_stacks(ee,s),I.racc_debug_out.$puts()},Z.$$arity=3),e.def(u,"$racc_reduce",Q=function(re,ee,s,I){var C,D=this,J=t;return(J=D.racc_debug_out).$print("reduce "),m(re["$empty?"]())?J.$print(" <none>"):K(re,"each",[],((C=function($e){return null==$e&&($e=t),J.$print(" ",(null==C.$$s?this:C.$$s).$racc_token2str($e))}).$$s=D,C.$$arity=1,C)),J.$puts(" --\x3e "+D.$racc_token2str(ee)),D.$racc_print_stacks(s,I),D.racc_debug_out.$puts()},Q.$$arity=4),e.def(u,"$racc_accept",ae=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},ae.$$arity=0),e.def(u,"$racc_e_pop",ue=function(re,ee,s){var I=this;return I.racc_debug_out.$puts("error recovering mode: pop token"),I.$racc_print_states(re),I.$racc_print_stacks(ee,s),I.racc_debug_out.$puts()},ue.$$arity=3),e.def(u,"$racc_next_state",ye=function(re,ee){var s=this;return s.racc_debug_out.$puts("goto    "+re),s.$racc_print_states(ee),s.racc_debug_out.$puts()},ye.$$arity=2),e.def(u,"$racc_print_stacks",De=function(re,ee){var s,C=t;return(C=this.racc_debug_out).$print("        ["),K(re,"each_index",[],((s=function(J){return null==J&&(J=t),C.$print(" (",(null==s.$$s?this:s.$$s).$racc_token2str(re["$[]"](J))," ",ee["$[]"](J).$inspect(),")")}).$$s=this,s.$$arity=1,s)),C.$puts(" ]")},De.$$arity=2),e.def(u,"$racc_print_states",Pe=function(re){var ee,I=t;return(I=this.racc_debug_out).$print("        ["),K(re,"each",[],((ee=function(D){return null==D&&(D=t),I.$print(" ",D)}).$$s=this,ee.$$arity=1,ee)),I.$puts(" ]")},Pe.$$arity=1),e.def(u,"$racc_token2str",ze=function(re){var s;return m(s=M(this.$class(),"Racc_token_to_s_table")["$[]"](re))?s:this.$raise("[Racc Bug] can't convert token "+re+" to string")},ze.$$arity=1),e.def(u,"$token_to_str",Be=function(re){return M(this.$class(),"Racc_token_to_s_table")["$[]"](re)},Be.$$arity=1)}(B[0],B)},Opal.modules["bcdice/arithmetic/node"]=function(e){function X(B,t){return"number"==typeof B&&"number"==typeof t?B/t:B["$/"](t)}var t,Y,G,q,z,b,u,y,S,h,R,g,n,v,V,x,i,E=[],r=e.nil,P=e.$$$,c=e.$$,F=e.module,$=e.klass,d=e.send2;return t=E,Y=i=[F(E[0],"BCDice")].concat(t),G=x=[F(i[0],"Arithmetic")].concat(Y),function(q,z,b){var u,y,S,h,R,n=$(q,null,"BinaryOp");[n].concat(b),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",u=function(L,j,l){var _=this;return _.lhs=L,_.op=j,_.rhs=l},u.$$arity=3),e.def(n,"$eval",y=function(L){var _,j=this,l=r;return l=j.lhs.$eval(L),_=j.rhs.$eval(L),l.$send(j.op,_)},y.$$arity=1),e.def(n,"$output",S=function(){var L=this;return""+L.lhs.$output()+L.op+L.rhs.$output()},S.$$arity=0),e.def(n,"$s_exp",h=function(){var L=this;return"("+L.$op_for_s_exp()+" "+L.lhs.$s_exp()+" "+L.rhs.$s_exp()+")"},h.$$arity=0),e.def(n,"$op_for_s_exp",R=function(){return this.op},R.$$arity=0)}((V=[F(x[0],"Node")].concat(G))[0],0,V),q=V[0],z=c(V,"BinaryOp"),b=V,n=$(q,z,"DivideBase"),v=[n].concat(b),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",u=function(j,l){return u.$$p&&(u.$$p=null),d(this,e.find_super_dispatcher(this,"initialize",u,!1,!0),"initialize",[j,"/",l],null)},u.$$arity=2),e.def(n,"$eval",y=function(j){var _,l=this,o=r;return _=l.lhs.$eval(j),(o=l.rhs.$eval(j))["$=="](0)&&l.$raise(c(v,"ZeroDivisionError")),l.$divide_and_round(_,o,j)},y.$$arity=1),e.def(n,"$output",S=function(){var j=S.$$p,_=this,o=r,T=r,f=r;for(j&&(S.$$p=null),T=0,f=arguments.length,o=new Array(f);T<f;T++)o[T]=arguments[T];return""+d(_,e.find_super_dispatcher(_,"output",S,!1,!0),"output",o,j)+_.$rounding_method()},S.$$arity=0),n.$private(),e.def(n,"$rounding_method",h=function(){return P(this.$class(),"ROUNDING_METHOD")},h.$$arity=0),e.def(n,"$op_for_s_exp",R=function(){return""+this.op+this.$rounding_method()},R.$$arity=0),e.def(n,"$divide_and_round",g=function(j,l,_){return this.$raise(c(v,"NotImplementedError"))},g.$$arity=3),function(q,z,b){var u,n=$(q,z,"DivideWithGameSystemDefault"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD",""),n.$private(),e.def(n,"$divide_and_round",u=function(S,h,R){var L;return L=R,P(c(v,"RoundType"),"CEIL")["$==="](L)?X(S.$to_f(),h).$ceil():P(c(v,"RoundType"),"ROUND")["$==="](L)?X(S.$to_f(),h).$round():X(S,h).$to_i()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,n=$(q,z,"DivideWithCeil"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","C"),n.$private(),e.def(n,"$divide_and_round",u=function(S,h,R){return X(S.$to_f(),h).$ceil()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,n=$(q,z,"DivideWithRound"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","R"),n.$private(),e.def(n,"$divide_and_round",u=function(S,h,R){return X(S.$to_f(),h).$round()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,n=$(q,z,"DivideWithFloor"),v=[n].concat(b);e.const_set(v[0],"ROUNDING_METHOD","F"),n.$private(),e.def(n,"$divide_and_round",u=function(S,h,R){return X(S,h).$to_i()},u.$$arity=3)}(V[0],c(V,"DivideBase"),V),function(q,z,b){var u,y,S,h,n=$(q,null,"Negative");[n].concat(b),n.$$prototype.body=r,e.def(n,"$initialize",u=function(g){return this.body=g},u.$$arity=1),e.def(n,"$eval",y=function(g){return this.body.$eval(g)["$-@"]()},y.$$arity=1),e.def(n,"$output",S=function(){return"-"+this.body.$output()},S.$$arity=0),e.def(n,"$s_exp",h=function(){return"(- "+this.body.$s_exp()+")"},h.$$arity=0)}(V[0],0,V),function(q,z,b){var u,y,S,h,n=$(q,null,"Parenthesis");[n].concat(b),n.$$prototype.expr=r,e.def(n,"$initialize",u=function(g){return this.expr=g},u.$$arity=1),e.def(n,"$eval",y=function(g){return this.expr.$eval(g)},y.$$arity=1),e.def(n,"$output",S=function(){return"("+this.expr.$output()+")"},S.$$arity=0),e.def(n,"$s_exp",h=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},h.$$arity=0)}(V[0],0,V),void function(q,z,b){var u,y,S,n=$(q,null,"Number");[n].concat(b),n.$$prototype.value=r,e.def(n,"$initialize",u=function(R){return this.value=R},u.$$arity=1),e.def(n,"$eval",y=function(R){return this.value},y.$$arity=1),e.def(n,"$output",S=function(){return this.value.$to_s()},S.$$arity=0),e.alias(n,"s_exp","output")}(V[0],0,V)},Opal.modules.strscan=function(e){var M,Y,m,x,K,G,w,V,q,z,b,n,v,u,y,S,h,R,g,L,j,l,_,o,T,f,i,A,E=[],r=e.nil,c=e.$$,$=e.truthy,d=e.send;return M=E,i=(0,e.klass)(E[0],null,"StringScanner"),A=[i].concat(M),i.$$prototype.pos=i.$$prototype.string=i.$$prototype.working=i.$$prototype.matched=i.$$prototype.prev_pos=i.$$prototype.match=r,i.$attr_reader("pos"),i.$attr_reader("matched"),e.def(i,"$initialize",Y=function(a){var p=this;return p.string=a,p.pos=0,p.matched=r,p.working=a,p.match=[]},Y.$$arity=1),i.$attr_reader("string"),e.def(i,"$beginning_of_line?",m=function(){var a=this;return 0===a.pos||"\n"===a.string.charAt(a.pos-1)},m.$$arity=0),e.alias(i,"bol?","beginning_of_line?"),e.def(i,"$scan",x=function(a){var p=this,U=(a=p.$anchor(a)).exec(p.working);return null==U?p.matched=r:"object"==typeof U?(p.prev_pos=p.pos,p.pos+=U[0].length,p.working=p.working.substring(U[0].length),p.matched=U[0],p.match=U,U[0]):"string"==typeof U?(p.pos+=U.length,p.working=p.working.substring(U.length),U):r},x.$$arity=1),e.def(i,"$scan_until",K=function(a){var p=this;a=p.$anchor(a);for(var Q,U=p.pos,Z=p.working;;){if(Q=a.exec(Z),U+=1,Z=Z.substr(1),null!=Q)return p.matched=p.string.substr(p.pos,U-p.pos-1+Q[0].length),p.match=Q,p.prev_pos=U-1,p.pos=U,p.working=Z.substr(Q[0].length),p.matched;if(0===Z.length)return p.match=[],p.matched=r}},K.$$arity=1),e.def(i,"$[]",G=function(a){var U;if($(this.match["$empty?"]()))return r;U=a,c(A,"Symbol")["$==="](U)?a=a.$to_s():c(A,"String")["$==="](U)||(a=c(A,"Opal")["$coerce_to!"](a,c(A,"Integer"),"to_int"));var Z=this.match;return a<0&&(a+=Z.length),a<0||a>=Z.length||null==Z[a]?r:Z[a]},G.$$arity=1),e.def(i,"$check",w=function(a){var p=this,U=(a=p.$anchor(a)).exec(p.working);return p.matched=null==U?r:U[0]},w.$$arity=1),e.def(i,"$check_until",V=function(a){var p=this,U=p.prev_pos,Z=p.pos,Q=p.$scan_until(a);return Q!==r&&(p.matched=Q.substr(-1),p.working=p.string.substr(Z)),p.prev_pos=U,p.pos=Z,Q},V.$$arity=1),e.def(i,"$peek",q=function(a){return this.working.substring(0,a)},q.$$arity=1),e.def(i,"$eos?",z=function(){return 0===this.working.length},z.$$arity=0),e.def(i,"$exist?",b=function(a){var U=a.exec(this.working);return null==U?r:0==U.index?0:U.index+1},b.$$arity=1),e.def(i,"$skip",n=function(a){var p=this,U=(a=p.$anchor(a)).exec(p.working);if(null==U)return p.match=[],p.matched=r;var Z=U[0],Q=Z.length;return p.matched=Z,p.match=U,p.prev_pos=p.pos,p.pos+=Q,p.working=p.working.substring(Q),Q},n.$$arity=1),e.def(i,"$skip_until",v=function(a){var U=this.$scan_until(a);return U===r?r:(this.matched=U.substr(-1),U.length)},v.$$arity=1),e.def(i,"$get_byte",u=function(){var a=this,p=r;return a.pos<a.string.length?(a.prev_pos=a.pos,a.pos+=1,p=a.matched=a.working.substring(0,1),a.working=a.working.substring(1)):a.matched=r,p},u.$$arity=0),e.alias(i,"getch","get_byte"),e.def(i,"$match?",y=function(a){var p=this,U=(a=p.$anchor(a)).exec(p.working);return null==U?r:(p.prev_pos=p.pos,U[0].length)},y.$$arity=1),e.def(i,"$pos=",S=function(a){var p=this;return a<0&&(a+=p.string.$length()),p.pos=a,p.working=p.string.slice(a)},S.$$arity=1),e.def(i,"$matched_size",h=function(){return this.matched===r?r:this.matched.length},h.$$arity=0),e.def(i,"$post_match",R=function(){var a=this;return a.matched===r?r:a.string.substr(a.pos)},R.$$arity=0),e.def(i,"$pre_match",g=function(){var a=this;return a.matched===r?r:a.string.substr(0,a.prev_pos)},g.$$arity=0),e.def(i,"$reset",L=function(){var a=this;return a.working=a.string,a.matched=r,a.pos=0},L.$$arity=0),e.def(i,"$rest",j=function(){return this.working},j.$$arity=0),e.def(i,"$rest?",l=function(){return 0!==this.working.length},l.$$arity=0),e.def(i,"$rest_size",_=function(){return this.$rest().$size()},_.$$arity=0),e.def(i,"$terminate",o=function(){var p,B,a=this;return a.match=r,p=[a.string.$length()],d(a,"pos=",e.to_a(p)),p[(B=p.length,"number"==typeof B?B-1:B["$-"](1))]},o.$$arity=0),e.def(i,"$unscan",T=function(){var a=this;return a.pos=a.prev_pos,a.prev_pos=r,a.match=r,a},T.$$arity=0),i.$private(),e.def(i,"$anchor",f=function(a){var U=a.toString().match(/\/([^\/]+)$/);return U=U?U[1]:void 0,new RegExp("^(?:"+a.source+")",U)},f.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var M,Y,m,i,$,B,O=[],E=e.nil,c=e.module;return $=O,M=B=[c(O[0],"BCDice")].concat($),[i=c(B[0],"Normalize")].concat(M),i.$module_function(),e.def(i,"$comparison_operator",Y=function(K){var w;return/<=|=</["$==="](w=K)?"<=":/>=|=>/["$==="](w)?">=":/<>|!=|=!/["$==="](w)?"!=":/</["$==="](w)?"<":/>/["$==="](w)?">":/=/["$==="](w)?"==":E},Y.$$arity=1),void e.def(i,"$target_number",m=function(K){return K["$=="]("?")?K:K.$to_i()},m.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var M,m,V,b,n,v,q,z,K,A,X=e.top,O=[],E=e.nil,P=e.$$,c=e.module,F=e.klass,$=e.hash2,d=e.truthy,B=e.send;return X.$require("strscan"),X.$require("bcdice/normalize"),M=O,m=A=[c(O[0],"BCDice")].concat(M),V=K=[c(A[0],"Command")].concat(m),q=F(K[0],null,"Lexer"),z=[q].concat(V),q.$$prototype.scanner=q.$$prototype.notations=E,e.const_set(z[0],"SYMBOLS",$(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(q,"$initialize",b=function(y,S){var h,R,g,j,L=this;return y=d(j=(R=(h=y)===E||null==h?E:B(h,"split",[" ",2]))===E||null==R?E:B(R,"first",[]))?j:"",L.scanner=P(z,"StringScanner").$new(y),L.notations=B(S,"map",[],((g=function(l){function _(o){return l.apply(this,arguments)}return _.toString=function(){return l.toString()},_}(function(l){return null==l&&(l=E),d(l["$is_a?"](P(z,"String")))?P(z,"Regexp").$new(l):l})).$$s=L,g.$$arity=1,g))},b.$$arity=2),e.def(q,"$next_token",n=function(){try{var y,S=this,h=E,R=E,L=E,j=E;return d(S.scanner["$eos?"]())?[!1,"$"]:(B(S.notations,"each",[],((y=function(_){var T,o=null==y.$$s?this:y.$$s;if(null==o.scanner&&(o.scanner=E),null==_&&(_=E),T=o.scanner.$scan(_),!d(T))return E;e.ret(["NOTATION",T])}).$$s=S,y.$$arity=1,y)),d(h=S.scanner.$scan(/\d+/))?["NUMBER",h.$to_i()]:d(R=S.scanner.$scan(/[<>!=]+/))?(R=P(z,"Normalize").$comparison_operator(R),[d(R)?"CMP_OP":"ILLEGAL",R]):(L=S.scanner.$getch().$upcase(),[d(j=P(z,"SYMBOLS")["$[]"](L))?j:L.$to_sym(),L]))}catch(l){if(l===e.returner)return l.$v;throw l}},n.$$arity=0),void e.def(q,"$source",v=function(){return this.scanner.$string()},v.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var B,A,G,q,z,b,w,V,m,M,O=[],E=e.nil,P=e.$$,c=e.module,F=e.klass,$=e.truthy;return B=O,A=M=[c(O[0],"BCDice")].concat(B),G=m=[c(M[0],"Command")].concat(A),w=F(m[0],null,"Parsed"),V=[w].concat(G),w.$$prototype.question_target=w.$$prototype.critical=w.$$prototype.fumble=w.$$prototype.dollar=w.$$prototype.modify_number=w.$$prototype.target_number=w.$$prototype.prefix_number=w.$$prototype.command=w.$$prototype.suffix_number=w.$$prototype.cmp_op=E,w.$attr_accessor("command"),w.$attr_accessor("prefix_number"),w.$attr_accessor("suffix_number"),w.$attr_accessor("critical"),w.$attr_accessor("fumble"),w.$attr_accessor("dollar"),w.$attr_accessor("modify_number"),w.$attr_accessor("cmp_op"),w.$attr_accessor("target_number"),w.$attr_writer("question_target"),e.def(w,"$initialize",q=function(){var v=this;return v.prefix_number=E,v.suffix_number=E,v.critical=E,v.fumble=E,v.dollar=E,v.cmp_op=E,v.target_number=E,v.question_target=!1},q.$$arity=0),e.def(w,"$question_target?",z=function(){return this.question_target},z.$$arity=0),void e.def(w,"$to_s",b=function(v){var L,u=this,y=E,S=E,h=E,R=E,g=E;return null==v&&(v="after_command"),y=$(u.critical)?"@"+u.critical:E,S=$(u.fumble)?"#"+u.fumble:E,h=$(u.dollar)?"$"+u.dollar:E,R=P(V,"Format").$modifier(u.modify_number),g=$(u.question_target)?"?":u.target_number,"after_command"["$==="](L=v)?[u.prefix_number,u.command,u.suffix_number,y,S,h,R,u.cmp_op,g].$join():"after_modify_number"["$==="](L)?[u.prefix_number,u.command,u.suffix_number,R,y,S,h,u.cmp_op,g].$join():"after_target_number"["$==="](L)?[u.prefix_number,u.command,u.suffix_number,R,u.cmp_op,g,y,S,h].$join():E},b.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function X(A,Y){return"number"==typeof A&&"number"==typeof Y?A-Y:A["$-"](Y)}var Y,G,q,z,b,u,y,S,h,R,g,L,j,l,_,o,T,f,k,a,p,U,Z,Q,ae,ue,ye,De,Pe,ze,Be,me,re,ee,s,I,C,D,J,te,$e,be,ne,ie,ve,ge,de,Te,se,ke,Ce,Ae,Re,Ie,Me,we,Se,Ne,Fe,qe,Ge,n,v,V,x,O=e.top,E=[],r=e.nil,P=e.$$$,c=e.$$,F=e.klass,$=e.module,d=e.hash2,B=e.send2,t=e.send,M=e.hash,i=e.truthy;return O.$require("racc/parser.rb"),O.$require("bcdice/arithmetic/node"),O.$require("bcdice/command/lexer"),O.$require("bcdice/command/parsed"),function(A,Y,m){[F(A,Y,"Parser")].concat(m)}(P(c(E,"BCDice"),"Command"),P(c(E,"Racc"),"Parser"),E),Y=E,G=x=[$(E[0],"BCDice")].concat(Y),q=(V=[$(x[0],"Command")].concat(G))[0],z=P(c(V,"Racc"),"Parser"),b=V,n=F(q,z,"Parser"),v=[n].concat(b),n.$$prototype.notations=n.$$prototype.lexer=n.$$prototype.modifier=n.$$prototype.prefix_number=n.$$prototype.suffix_number=n.$$prototype.need_suffix_number=n.$$prototype.need_prefix_number=n.$$prototype.critical=n.$$prototype.fumble=n.$$prototype.dollar=n.$$prototype.allowed_cmp_op=n.$$prototype.question_target=r,e.def(n,"$initialize",u=function(W,le){var H,N,_e,xe,pe=u.$$p,fe=this;if(pe&&(u.$$p=null),H=e.slice.call(arguments,0,arguments.length),null==(N=e.extract_kwargs(H)))N=d([],{});else if(!N.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(_e=H,!e.hasOwnProperty.call(N.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return xe=N.$$smap.round_type,B(fe,e.find_super_dispatcher(fe,"initialize",u,!1,!0),"initialize",[],null),fe.notations=_e,fe.round_type=xe,fe.prefix_number=!1,fe.suffix_number=!1,fe.need_prefix_number=!1,fe.need_suffix_number=!1,fe.modifier=!0,fe.critical=!1,fe.fumble=!1,fe.dollar=!1,fe.allowed_cmp_op=[r,">=",">","<=","<","==","!="],fe.question_target=!1},u.$$arity=-2),e.def(n,"$disable_modifier",y=function(){return this.modifier=!1,this},y.$$arity=0),e.def(n,"$enable_prefix_number",S=function(){return this.prefix_number=!0,this},S.$$arity=0),e.def(n,"$enable_suffix_number",h=function(){return this.suffix_number=!0,this},h.$$arity=0),e.def(n,"$has_prefix_number",R=function(){var W=this;return W.prefix_number=!0,W.need_prefix_number=!0,W},R.$$arity=0),e.def(n,"$has_suffix_number",g=function(){var W=this;return W.suffix_number=!0,W.need_suffix_number=!0,W},g.$$arity=0),e.def(n,"$enable_critical",L=function(){return this.critical=!0,this},L.$$arity=0),e.def(n,"$enable_fumble",j=function(){return this.fumble=!0,this},j.$$arity=0),e.def(n,"$enable_dollar",l=function(){return this.dollar=!0,this},l.$$arity=0),e.def(n,"$restrict_cmp_op_to",_=function(W){var le,N=this;return le=e.slice.call(arguments,0,arguments.length),N.allowed_cmp_op=le,N},_.$$arity=-1),e.def(n,"$enable_question_target",o=function(){return this.question_target=!0,this},o.$$arity=0),e.def(n,"$parse",T=function(W){try{return this.lexer=c(v,"Lexer").$new(W,this.notations),this.$do_parse()}catch(H){if(!e.rescue(H,[c(v,"ParseError"),c(v,"ZeroDivisionError")]))throw H;try{return r}finally{e.pop_exception()}}},T.$$arity=1),n.$private(),e.def(n,"$parsed",f=function(W,le,H,N){var _e;return t(c(v,"Parsed").$new(),"tap",[],((_e=function(he){var Ee,Le,Ke,Xe,Ye,Ve,fe=null==_e.$$s?this:_e.$$s,oe=r;return null==fe.round_type&&(fe.round_type=r),null==he&&(he=r),oe=[W["$[]"]("command")],t(he,"command=",e.to_a(oe)),X(oe.length,1),oe=[(Ee=W["$[]"]("prefix"),Ee===r||null==Ee?r:t(Ee,"eval",[fe.round_type]))],t(he,"prefix_number=",e.to_a(oe)),X(oe.length,1),oe=[(Le=W["$[]"]("suffix"),Le===r||null==Le?r:t(Le,"eval",[fe.round_type]))],t(he,"suffix_number=",e.to_a(oe)),X(oe.length,1),oe=[(Ke=le["$[]"]("critical"),Ke===r||null==Ke?r:t(Ke,"eval",[fe.round_type]))],t(he,"critical=",e.to_a(oe)),X(oe.length,1),oe=[(Xe=le["$[]"]("fumble"),Xe===r||null==Xe?r:t(Xe,"eval",[fe.round_type]))],t(he,"fumble=",e.to_a(oe)),X(oe.length,1),oe=[(Ye=le["$[]"]("dollar"),Ye===r||null==Ye?r:t(Ye,"eval",[fe.round_type]))],t(he,"dollar=",e.to_a(oe)),X(oe.length,1),oe=[H.$eval(fe.round_type)],t(he,"modify_number=",e.to_a(oe)),X(oe.length,1),oe=[N["$[]"]("cmp_op")],t(he,"cmp_op=",e.to_a(oe)),X(oe.length,1),N["$[]"]("target")["$=="]("?")?(t(he,"question_target=",e.to_a(oe=[!0])),X(oe.length,1),t(he,"target_number=",e.to_a(oe=[0])),oe[X(oe.length,1)]):(t(he,"question_target=",e.to_a(oe=[!1])),X(oe.length,1),oe=[(Ve=N["$[]"]("target"),Ve===r||null==Ve?r:t(Ve,"eval",[fe.round_type]))],t(he,"target_number=",e.to_a(oe)),oe[X(oe.length,1)])}).$$s=this,_e.$$arity=1,_e))},f.$$arity=4),e.def(n,"$next_token",k=function(){return this.lexer.$next_token()},k.$$arity=0),Ae=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],Re=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],Ie=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],Me=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],we=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],Se=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],Ne=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Fe=[r,r,r,r,r,r,19,16,15,r,r],qe=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ge=M(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(v[0],"Racc_arg",[Ae,Re,Me,Ie,we,Se,Fe,Ne,19,qe,Ge,58,35,!0]),e.const_set(v[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(v[0],"Racc_debug_parser",!1),e.def(n,"$_reduce_1",a=function(W,le,H){var N;return i(this.modifier)||this.$raise(c(v,"ParseError")),N=e.to_ary(W),this.$parsed(null==N[0]?r:N[0],null==N[1]?r:N[1],null==N[2]?r:N[2],null==N[3]?r:N[3])},a.$$arity=3),e.def(n,"$_reduce_2",p=function(W,le,H){var N;return i(this.modifier)||this.$raise(c(v,"ParseError")),N=e.to_ary(W),this.$parsed(null==N[0]?r:N[0],null==N[2]?r:N[2],null==N[1]?r:N[1],null==N[3]?r:N[3])},p.$$arity=3),e.def(n,"$_reduce_3",U=function(W,le,H){var N,fe;return fe=null==(N=e.to_ary(W))[2]?r:N[2],this.$parsed(null==N[0]?r:N[0],null==N[1]?r:N[1],P(P(c(v,"Arithmetic"),"Node"),"Number").$new(0),fe)},U.$$arity=3),e.def(n,"$_reduce_4",Z=function(W,le,H){var _e,N=this;return i(i(_e=N.prefix_number)?N.suffix_number:_e)||N.$raise(c(v,"ParseError")),d(["command","prefix","suffix"],{command:W["$[]"](1),prefix:W["$[]"](0),suffix:W["$[]"](2)})},Z.$$arity=3),e.def(n,"$_reduce_5",Q=function(W,le,H){var N=this;return i(N.prefix_number)||N.$raise(c(v,"ParseError")),i(N.need_suffix_number)&&N.$raise(c(v,"ParseError")),d(["command","prefix"],{command:W["$[]"](1),prefix:W["$[]"](0)})},Q.$$arity=3),e.def(n,"$_reduce_6",ae=function(W,le,H){var N=this;return i(N.suffix_number)||N.$raise(c(v,"ParseError")),i(N.need_prefix_number)&&N.$raise(c(v,"ParseError")),d(["command","suffix"],{command:W["$[]"](0),suffix:W["$[]"](1)})},ae.$$arity=3),e.def(n,"$_reduce_7",ue=function(W,le,H){var _e,N=this;return i(i(_e=N.need_prefix_number)?_e:N.need_suffix_number)&&N.$raise(c(v,"ParseError")),d(["command"],{command:W["$[]"](0)})},ue.$$arity=3),e.def(n,"$_reduce_8",ye=function(W,le,H){return d([],{})},ye.$$arity=3),e.def(n,"$_reduce_9",De=function(W,le,H){var N,fe,Le,Ee,pe=r;return pe=null==(N=e.to_ary(W))[0]?r:N[0],fe=null==N[2]?r:N[2],i(i(Ee=this.critical)?pe["$[]"]("critical")["$nil?"]():Ee)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Le=["critical",fe])),X(Le.length,1),pe},De.$$arity=3),e.def(n,"$_reduce_10",Pe=function(W,le,H){var N,fe,Le,Ee,pe=r;return pe=null==(N=e.to_ary(W))[0]?r:N[0],fe=null==N[2]?r:N[2],i(i(Ee=this.fumble)?pe["$[]"]("fumble")["$nil?"]():Ee)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Le=["fumble",fe])),X(Le.length,1),pe},Pe.$$arity=3),e.def(n,"$_reduce_11",ze=function(W,le,H){var N,fe,Le,Ee,pe=r;return pe=null==(N=e.to_ary(W))[0]?r:N[0],fe=null==N[2]?r:N[2],i(i(Ee=this.dollar)?pe["$[]"]("dollar")["$nil?"]():Ee)||this.$raise(c(v,"ParseError")),t(pe,"[]=",e.to_a(Le=["dollar",fe])),X(Le.length,1),pe},ze.$$arity=3),e.def(n,"$_reduce_12",Be=function(W,le,H){return W["$[]"](1)},Be.$$arity=3),e.def(n,"$_reduce_13",me=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"Negative").$new(W["$[]"](1))},me.$$arity=3),e.def(n,"$_reduce_14",re=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"+",W["$[]"](2))},re.$$arity=3),e.def(n,"$_reduce_15",ee=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"-",W["$[]"](2))},ee.$$arity=3),e.def(n,"$_reduce_16",s=function(W,le,H){return i(this.allowed_cmp_op["$include?"](r))||this.$raise(c(v,"ParseError")),d([],{})},s.$$arity=3),e.def(n,"$_reduce_17",I=function(W,le,H){var N,pe,he;return he=null==(N=e.to_ary(W))[1]?r:N[1],i(this.allowed_cmp_op["$include?"](pe=null==N[0]?r:N[0]))||this.$raise(c(v,"ParseError")),d(["cmp_op","target"],{cmp_op:pe,target:he})},I.$$arity=3),e.def(n,"$_reduce_18",C=function(W,le,H){var _e,N=this;return _e=W["$[]"](0),i(N.question_target)||N.$raise(c(v,"ParseError")),i(N.allowed_cmp_op["$include?"](_e))||N.$raise(c(v,"ParseError")),d(["cmp_op","target"],{cmp_op:_e,target:"?"})},C.$$arity=3),e.def(n,"$_reduce_19",D=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"+",W["$[]"](2))},D.$$arity=3),e.def(n,"$_reduce_20",J=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"-",W["$[]"](2))},J.$$arity=3),e.def(n,"$_reduce_22",te=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"BinaryOp").$new(W["$[]"](0),"*",W["$[]"](2))},te.$$arity=3),e.def(n,"$_reduce_23",$e=function(W,le,H){return W["$[]"](3).$new(W["$[]"](0),W["$[]"](2))},$e.$$arity=3),e.def(n,"$_reduce_25",be=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},be.$$arity=3),e.def(n,"$_reduce_26",ne=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithCeil")},ne.$$arity=3),e.def(n,"$_reduce_27",ie=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithCeil")},ie.$$arity=3),e.def(n,"$_reduce_28",ve=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithRound")},ve.$$arity=3),e.def(n,"$_reduce_29",ge=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"DivideWithFloor")},ge.$$arity=3),e.def(n,"$_reduce_30",de=function(W,le,H){return W["$[]"](1)},de.$$arity=3),e.def(n,"$_reduce_31",Te=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"Negative").$new(W["$[]"](1))},Te.$$arity=3),e.def(n,"$_reduce_33",se=function(W,le,H){return W["$[]"](1)},se.$$arity=3),e.def(n,"$_reduce_34",ke=function(W,le,H){return P(P(c(v,"Arithmetic"),"Node"),"Number").$new(W["$[]"](0))},ke.$$arity=3),void e.def(n,"$_reduce_none",Ce=function(W,le,H){return W["$[]"](0)},Ce.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var B,A,K,V,q,z,b,n,v,G,w,m,M,O=[],E=e.nil,P=e.$$,c=e.module,F=e.send,$=e.truthy;return B=O,A=M=[c(O[0],"BCDice")].concat(B),K=m=[c(M[0],"Deprecated")].concat(A),G=c(m[0],"Checker"),w=[G].concat(K),G.$private(),e.def(G,"$check_result_legacy",V=function(y,S,h,R){var l,T,g=this,L=E,j=E,_=E,o=E,f=E;return L=F(S,"map",[],"sides".$to_proc()),l=(j=F(S,"map",[],"value".$to_proc())).$sum(),_=[100]["$==="](o=L)?g.$check_1D100(y,l,h,R):[20]["$==="](o)?g.$check_1D20(y,l,h,R):[6,6]["$==="](o)?g.$check_2D6(y,l,j,h,R):E,$($(T=_["$nil?"]())?T:_["$empty?"]())&&(o=L.$uniq(),_=[10]["$==="](o)?g.$check_nD10(y,l,j,h,R):[6]["$==="](o)?g.$check_nD6(y,l,j,h,R):E,$($(f=_["$nil?"]())?f:_["$empty?"]()))?E:P(w,"Result").$new(_.$delete_prefix(" \uff1e "))},V.$$arity=4),e.def(G,"$check_1D100",q=function(y,S,h,R){return E},q.$$arity=4),e.def(G,"$check_1D20",z=function(y,S,h,R){return E},z.$$arity=4),e.def(G,"$check_nD10",b=function(y,S,h,R,g){return E},b.$$arity=5),e.def(G,"$check_2D6",n=function(y,S,h,R,g){return E},n.$$arity=5),void e.def(G,"$check_nD6",v=function(y,S,h,R,g){return E},v.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function X(x,K){return"number"==typeof x&&"number"==typeof K?x+K:x["$+"](K)}function O(x,K){return"number"==typeof x&&"number"==typeof K?x-K:x["$-"](K)}var K,z,v,u,y,S,h,R,g,L,j,l,_,o,T,f,k,a,p,U,Z,Q,ae,ue,ye,De,Pe,ze,Be,me,re,ee,C,D,J,te,$e,I,b,n,w,c=e.top,F=[],$=e.nil,d=e.$$$,B=e.$$,t=e.module,M=e.klass,i=e.truthy,A=e.send,Y=e.range,m=$;return c.$require("i18n"),c.$require("i18n/backend/fallbacks"),c.$require("bcdice/randomizer"),c.$require("bcdice/dice_table"),c.$require("bcdice/enum"),c.$require("bcdice/translate"),c.$require("bcdice/result"),c.$require("bcdice/command/parser"),c.$require("bcdice/deprecated/checker"),K=F,z=w=[t(F[0],"BCDice")].concat(K),b=M(w[0],null,"Base"),n=[b].concat(z),b.$$prototype.sort_add_dice=b.$$prototype.sort_barabara_dice=b.$$prototype.enabled_d9=b.$$prototype.raw_input=b.$$prototype.randomizer=b.$$prototype.enabled_upcase_input=b.$$prototype.debug=$,ee=e.get_singleton_class(b),I=[ee].concat(n),ee.$attr_reader("prefixes"),e.def(ee,"$register_prefix",C=function(ne){var ve,ge=this,de=$;return null==ge.prefixes&&(ge.prefixes=$),ve=e.slice.call(arguments,0,arguments.length),ge.prefixes=i(de=ge.prefixes)?de:[],ge.prefixes.$concat(ve.$flatten())},C.$$arity=-1),e.def(ee,"$register_prefix_from_super_class",D=function(){return this.$register_prefix(this.$superclass().$prefixes())},D.$$arity=0),e.def(ee,"$prefixes_pattern",J=function(){var ie,ne=this,ve=$;return null==ne.prefixes_pattern&&(ne.prefixes_pattern=$),null==ne.prefixes&&(ne.prefixes=$),ne.prefixes_pattern=i(ie=ne.prefixes_pattern)?ie:$,i(ne.prefixes_pattern)?ne.prefixes_pattern:(ne.prefixes=i(ve=ne.prefixes)?ve:[],ne.prefixes.$freeze(),ne.prefixes_pattern=(i(ne.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",ne.prefixes.$join("|"),")"],"i")).$freeze())},J.$$arity=0),e.def(ee,"$command_pattern",te=function(){var ne,ve,ie=this,ge=$,de=$;return null==ie.command_pattern&&(ie.command_pattern=$),null==ie.prefixes&&(ie.prefixes=$),ie.command_pattern=i(ve=ie.command_pattern)?ve:$,i(ie.command_pattern)?ie.command_pattern:(ie.prefixes=i(ge=ie.prefixes)?ge:[],ie.prefixes.$freeze(),de=X(A(d(B(I,"CommonCommand"),"COMMANDS"),"map",[],((ne=function(se){return null==se&&(se=$),d(se,"PREFIX_PATTERN").$source()}).$$s=ie,ne.$$arity=1,ne)),ie.prefixes),ie.command_pattern=e.regexp(["^S?(",de.$join("|"),")"],"i").$freeze())},te.$$arity=0),e.def(ee,"$eval",$e=function(ne){return this.$new(ne).$eval()},$e.$$arity=1),b.$include(B(n,"Translate")),b.$include(d(B(n,"Deprecated"),"Checker")),e.def(b,"$initialize",v=function(s){var I=this;return I.raw_input=s,I.sort_add_dice=!1,I.sort_barabara_dice=!1,I.d66_sort_type=d(B(n,"D66SortType"),"NO_SORT"),I.enabled_d9=!1,I.round_type=d(B(n,"RoundType"),"FLOOR"),I.sides_implicit_d=6,I.upper_dice_reroll_threshold=$,I.reroll_dice_reroll_threshold=$,I.default_cmp_op=$,I.default_target_number=$,I.enabled_upcase_input=!0,I.locale="ja_jp",I.randomizer=d(B(n,"BCDice"),"Randomizer").$new(),I.debug=!1},v.$$arity=1),b.$attr_accessor("randomizer"),b.$attr_reader("d66_sort_type"),b.$attr_reader("round_type"),b.$attr_reader("sides_implicit_d"),b.$attr_reader("upper_dice_reroll_threshold"),b.$attr_reader("reroll_dice_reroll_threshold"),b.$attr_reader("default_cmp_op"),b.$attr_reader("default_target_number"),e.def(b,"$sort_add_dice?",u=function(){return this.sort_add_dice},u.$$arity=0),e.def(b,"$sort_barabara_dice?",y=function(){return this.sort_barabara_dice},y.$$arity=0),e.def(b,"$enabled_d9?",S=function(){return this.enabled_d9},S.$$arity=0),e.def(b,"$enable_debug",h=function(){return this.debug=!0},h.$$arity=0),e.def(b,"$eval",R=function(){var I,C,D,s=this,J=$;return I=d(B(n,"BCDice"),"Preprocessor").$process(s.raw_input,s),C=i(D=s.$dice_command(I))?D:s.$eval_common_command(s.raw_input),i(C)?(J=[s.randomizer.$rand_results()],A(C,"rands=",e.to_a(J)),O(J.length,1),J=[s.randomizer.$detailed_rand_results()],A(C,"detailed_rands=",e.to_a(J)),O(J.length,1),C):$},R.$$arity=0),e.def(b,"$change_text",g=function(s){return s},g.$$arity=1),e.def(b,"$check_result",L=function(s,I,C,D){var J=this,te=$,$e=$,be=$,ne=$,ie=$;return te=J.$check_result_legacy(s,I,C,D),i(te)?te:($e=A(I,"map",[],"sides".$to_proc()),ne=(be=A(I,"map",[],"value".$to_proc())).$sum(),(te=[100]["$==="](ie=$e)?J.$result_1d100(s,ne,C,D):[20]["$==="](ie)?J.$result_1d20(s,ne,C,D):[6,6]["$==="](ie)?J.$result_2d6(s,ne,be,C,D):$)["$=="](B(n,"Result").$nothing())?$:i(te)?te:(ie=$e.$uniq(),(te=[10]["$==="](ie)?J.$result_nd10(s,ne,be,C,D):[6]["$==="](ie)?J.$result_nd6(s,ne,be,C,D):$)["$=="](B(n,"Result").$nothing())?$:i(te)?te:J.$result_ndx(s,C,D)))},L.$$arity=4),e.def(b,"$grich_text",j=function(s,I,C){return $},j.$$arity=3),b.$private(),e.def(b,"$eval_common_command",l=function(s){try{var I;return s=this.$change_text(s),A(d(B(n,"CommonCommand"),"COMMANDS"),"each",[],((I=function(J){var $e,te=null==I.$$s?this:I.$$s;if(null==te.randomizer&&(te.randomizer=$),null==J&&(J=$),$e=J.$eval(s,te,te.randomizer),!i($e))return $;e.ret($e)}).$$s=this,I.$$arity=1,I)),$}catch(D){if(D===e.returner)return D.$v;throw D}},l.$$arity=1),e.def(b,"$dice_command",_=function(s){var I,C=this,D=$,J=$,te=$,$e=$,be=$,ne=$,ie=$;return i(C.enabled_upcase_input)&&(s=s.$upcase()),D=C.$class().$prefixes_pattern().$match(s),i(D)?(J=D["$[]"](1)["$nil?"]()["$!"](),i(J)&&(s=s["$[]"](Y(1,-1,!1))),te=C.$eval_game_system_specific_command(s),i(te["$is_a?"](B(n,"Result")))?($e=[i(be=te["$secret?"]())?be:J],A(te,"secret=",e.to_a($e)),O($e.length,1),te):i(i(ne=i(ie=te["$nil?"]())?ie:te["$empty?"]())?ne:te["$=="]("1"))?$:A(B(n,"Result").$new(),"tap",[],((I=function(ge){return null==ge&&(ge=$),$e=[te.$to_s()],A(ge,"text=",e.to_a($e)),O($e.length,1),A(ge,"secret=",e.to_a($e=[J])),$e[O($e.length,1)]}).$$s=C,I.$$arity=1,I))):$},_.$$arity=1),e.def(b,"$eval_game_system_specific_command",o=function(s){return $},o.$$arity=1),e.def(b,"$result_ndx",T=function(s,I,C){return i(C["$is_a?"](B(n,"String")))?$:i(s.$send(I,C))?B(n,"Result").$success(this.$translate("success")):B(n,"Result").$failure(this.$translate("failure"))},T.$$arity=3),e.def(b,"$result_1d100",f=function(s,I,C,D){return $},f.$$arity=4),e.def(b,"$result_1d20",k=function(s,I,C,D){return $},k.$$arity=4),e.def(b,"$result_nd10",a=function(s,I,C,D,J){return $},a.$$arity=5),e.def(b,"$result_2d6",p=function(s,I,C,D,J){return $},p.$$arity=5),e.def(b,"$result_nd6",U=function(s,I,C,D,J){return $},U.$$arity=5),e.def(b,"$get_table_by_2d6",Z=function(s){return this.$get_table_by_nD6(s,2)},Z.$$arity=1),e.def(b,"$get_table_by_1d6",Q=function(s){return this.$get_table_by_nD6(s,1)},Q.$$arity=1),e.def(b,"$get_table_by_nD6",ae=function(s,I){return this.$get_table_by_nDx(s,I,6)},ae.$$arity=2),e.def(b,"$get_table_by_nDx",ue=function(s,I,C){var J,te=$;return J=this.randomizer.$roll_sum(I,C),te=this.$get_table_value(s["$[]"](O(J,I))),i(te["$nil?"]())?["1",0]:[te,J]},ue.$$arity=3),e.def(b,"$get_table_by_1d3",ye=function(s){var D,J,x,I=this,te=$;return I.$debug("get_table_by_1d3"),D=I.randomizer.$roll_sum(1,6),I.$debug("num",D),J=(x=O(D,1),"number"==typeof x?x/2:x["$/"](2)).$to_i(),I.$debug("index",J),te=s["$[]"](J),i(te["$nil?"]())?["1",0]:[te,D]},ye.$$arity=1),e.def(b,"$get_table_by_d66_swap",De=function(s){var C;return C=this.randomizer.$roll_d66(d(B(n,"D66SortType"),"ASC")),[this.$get_table_by_number(C,s),C]},De.$$arity=1),e.def(b,"$get_table_by_d66",Pe=function(s){var C,D,J,$e,x,te=$;return C=this.randomizer.$roll_once(6),D=this.randomizer.$roll_once(6),J=X("number"==typeof(x=O(C,1))?6*x:x["$*"](6),O(D,1)),te=s["$[]"](J),$e=""+C+D,i(te["$nil?"]())?["1",$e]:[te,$e]},Pe.$$arity=1),e.def(b,"$get_table_by_number",ze=function(s,I,C){try{var D;return null==C&&(C="1"),A(I,"each",[],((D=function($e){var ne,be=null==D.$$s?this:D.$$s;if(null==$e&&($e=$),ne=$e["$[]"](0),!i(function(x,K){return"number"==typeof x&&"number"==typeof K?x>=K:x["$>="](K)}(ne,s)))return $;e.ret(be.$get_table_value($e["$[]"](1)))}).$$s=this,D.$$arity=1,D)),this.$get_table_value(C)}catch(te){if(te===e.returner)return te.$v;throw te}},ze.$$arity=-3),e.def(b,"$get_table_value",Be=function(s){return i(s["$is_a?"](B(n,"Proc")))?s.$call():s},Be.$$arity=1),e.def(b,"$roll_tables",me=function(s,I){var D=$;return D=I["$[]"](s),i(D)?D.$roll(this.randomizer).$to_s():$},me.$$arity=2),e.def(b,"$debug",re=function(s,I){var D,J,te=this,$e=$,be=$;return D=e.slice.call(arguments,1,arguments.length),i(te.debug)?($e=i(s["$is_a?"](B(n,"String")))?s:s.$inspect(),i(D["$empty?"]())?te.$warn($e):(be=A(D,"map",[],((J=function(ie){return null==ie&&(ie=$),i(ie["$is_a?"](B(n,"String")))?'"'+ie+'"':ie.$inspect()}).$$s=te,J.$$arity=1,J)),te.$warn($e+": "+be.$join(", ")))):$},re.$$arity=-2),d(d(B(F,"I18n"),"Backend"),"Simple").$include(d(d(B(F,"I18n"),"Backend"),"Fallbacks")),B(F,"I18n").$load_path()["$<<"](B(F,"Dir")["$[]"](B(F,"File").$join(c.$__dir__(),"../../i18n/**/*.yml"))),m=["ja_jp"],A(B(F,"I18n"),"default_locale=",e.to_a(m)),O(m.length,1),m=[["ja_jp"]],A(B(F,"I18n").$fallbacks(),"defaults=",e.to_a(m)),m[O(m.length,1)]},function(e){function X(m,x){return"number"==typeof m&&"number"==typeof x?m<=x:m["$<="](x)}function O(m,x){return"number"==typeof m&&"number"==typeof x?m>=x:m["$>="](x)}function E(m,x){return"number"==typeof m&&"number"==typeof x?m+x:m["$+"](x)}function r(m,x){return"number"==typeof m&&"number"==typeof x?m-x:m["$-"](x)}var x,V,b,n,v,S,h,R,g,l,T,f,k,a,p,_,o,u,y,z,G,c=[],F=e.nil,$=e.$$$,d=e.$$,B=e.module,t=e.klass,M=e.send2,i=e.truthy,A=e.send,Y=e.hash2;e.top.$require("bcdice/base"),x=c,V=G=[B(c[0],"BCDice")].concat(x),b=(z=[B(G[0],"GameSystem")].concat(V))[0],n=d(z,"Base"),v=z,u=t(b,n,"MagicaLogia"),y=[u].concat(v),u.$$prototype.randomizer=F,e.const_set(y[0],"ID","MagicaLogia"),e.const_set(y[0],"NAME","\u30de\u30ae\u30ab\u30ed\u30ae\u30a2"),e.const_set(y[0],"SORT_KEY","\u307e\u304d\u304b\u308d\u304d\u3042"),e.const_set(y[0],"HELP_MESSAGE","\u30fb\u5224\u5b9a\n\u30b9\u30da\u30b7\u30e3\u30eb\uff0f\u30d5\u30a1\u30f3\u30d6\u30eb\uff0f\u6210\u529f\uff0f\u5931\u6557\u3092\u5224\u5b9a\n\u30fb\u5404\u7a2e\u8868\n\u7d4c\u6b74\u8868\u3000BGT/\u521d\u671f\u30a2\u30f3\u30ab\u30fc\u8868\u3000DAT/\u904b\u547d\u5c5e\u6027\u8868\u3000FAT\n\u9858\u3044\u8868\u3000WIT/\u30d7\u30e9\u30a4\u30ba\u8868\u3000PT\n\u6642\u306e\u6d41\u308c\u8868\u3000TPT/\u5927\u5224\u6642\u306e\u6d41\u308c\u8868\u3000TPTB\n\u4e8b\u4ef6\u8868\u3000AT\n\u30d5\u30a1\u30f3\u30d6\u30eb\u8868\u3000FT\uff0f\u5909\u8abf\u8868\u3000WT\n\u904b\u547d\u5909\u8ee2\u8868\u3000FCT\n\u3000\u5178\u578b\u7684\u707d\u5384 TCT\uff0f\u7269\u7406\u7684\u707d\u5384 PCT\uff0f\u7cbe\u795e\u7684\u707d\u5384 MCT\uff0f\u72c2\u6c17\u7684\u707d\u5384 ICT\n\u3000\u793e\u4f1a\u7684\u707d\u5384 SCT\uff0f\u8d85\u5e38\u7684\u707d\u5384 XCT\uff0f\u4e0d\u601d\u8b70\u7cfb\u707d\u5384 WCT\uff0f\u30b3\u30df\u30ab\u30eb\u7cfb\u707d\u5384 CCT\n\u3000\u9b54\u6cd5\u4f7f\u3044\u306e\u707d\u5384 MGCT\n\u30b7\u30fc\u30f3\u8868\u3000ST\uff0f\u5927\u5224\u30b7\u30fc\u30f3\u8868\u3000STB\n\u3000\u6975\u9650\u74b0\u5883 XEST\uff0f\u5185\u9762\u4e16\u754c IWST\uff0f\u9b54\u6cd5\u90fd\u5e02 MCST\n\u3000\u6b7b\u5f8c\u4e16\u754c WDST\uff0f\u8ff7\u5bae\u4e16\u754c LWST\n\u3000\u9b54\u6cd5\u66f8\u67b6 MBST\uff0f\u9b54\u6cd5\u5b66\u9662 MAST\uff0f\u30af\u30ec\u30c9\u306e\u5854 TCST\n\u3000\u4e26\u884c\u4e16\u754c PWST\uff0f\u7d42\u672b\u3000\u3000 PAST\uff0f\u7570\u4e16\u754c\u9152\u5834 GBST\n\u3000\u307b\u3057\u304b\u3052 SLST\uff0f\u65e7\u56f3\u66f8\u9928 OLST\n\u4e16\u754c\u6cd5\u5247\u8ffd\u52a0\u8868 WLAT/\u3055\u307e\u3088\u3046\u602a\u7269\u8868 WMT\n\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868\u3000RCT\n\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868\u3000RTT\n\u3000\u661f\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTS, RTT1\n\u3000\u7363\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTB, RTT2\n\u3000\u529b\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTF, RTT3\n\u3000\u6b4c\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTP, RTT4\n\u3000\u5922\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTD, RTT5\n\u3000\u95c7\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868  RTN, RTT6\n\u30d6\u30e9\u30f3\u30af\u79d8\u5bc6\u8868\u3000BST/\n\u3000\u5bbf\u6575\u8868\u3000MIT/\u8b00\u7565\u8868\u3000MOT/\u56e0\u7e01\u8868\u3000MAT\n\u3000\u5947\u4eba\u8868\u3000MUT/\u529b\u5834\u8868\u3000MFT/\u540c\u76df\u8868\u3000MLT\n\u843d\u82b1\u8868\u3000FFT\n\u305d\u306e\u5f8c\u8868 FLT\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),e.def(u,"$initialize",S=function(j){var o=this;return S.$$p&&(S.$$p=null),M(o,e.find_super_dispatcher(o,"initialize",S,!1,!0),"initialize",[j],null),o.sort_add_dice=!0,o.sort_barabara_dice=!0,o.d66_sort_type=$(d(y,"D66SortType"),"ASC")},S.$$arity=1),e.def(u,"$result_2d6",h=function(j,l,_,o,T){var f=this,k=F,a=F;return T["$=="]("?")||!o["$=="](">=")?F:(a=[E((k=i(X(l,2))?d(y,"Result").$fumble(f.$translate("fumble")):i(O(l,12))?d(y,"Result").$critical(f.$translate("MagicaLogia.special")):i(O(j,T))?d(y,"Result").$success(f.$translate("success")):d(y,"Result").$failure(f.$translate("failure"))).$text(),f.$gain_magic_element(_["$[]"](0),_["$[]"](1)))],A(k,"text=",e.to_a(a)),r(a.length,1),k)},h.$$arity=5),e.def(u,"$eval_game_system_specific_command",R=function(j){var _,l=this;return i(_=$(l.$class(),"SKILL_TABLE").$roll_command(l.randomizer,j))?_:l.$roll_tables(j,$(l.$class(),"TABLES"))},R.$$arity=1),u.$private(),e.def(u,"$gain_magic_element",g=function(j,l){var _=this,o=F;return j["$=="](l)?(o=_.$translate("MagicaLogia.elements.items")["$[]"](r(j,1)),E(" \uff1e ",_.$format(_.$translate("MagicaLogia.elements.format"),Y(["text"],{text:o})))):""},g.$$arity=2),l=y,_=t(y[0],null,"SkillExpandTable"),o=[_].concat(l),_.$$prototype.times=_.$$prototype.sides=_.$$prototype.items=_.$$prototype.name=_.$$prototype.skill_table=F,e.defs(_,"$from_i18n",T=function(Z,Q,ae){var ye=F;return ye=d(o,"I18n").$t(Z,Y(["locale","raise"],{locale:Q,raise:!1})),this.$new(ye["$[]"]("name"),ye["$[]"]("type"),ye["$[]"]("items"),ae)},T.$$arity=3),e.def(_,"$initialize",f=function(Z,Q,ae,ue){var ye=this,De=F;return ye.name=Z,ye.items=ae.$freeze(),ye.skill_table=ue,De=/(\d+)D(\d+)/i.$match(Q),i(De)||ye.$raise(d(o,"ArgumentError"),"Unexpected table type: "+Q),ye.times=De["$[]"](1).$to_i(),ye.sides=De["$[]"](2).$to_i()},f.$$arity=4),e.def(_,"$roll",k=function(Z){var ae,ue,Q=this;return ae=Z.$roll_sum(Q.times,Q.sides),ue=Q.$expand(Q.items["$[]"](r(ae,Q.times)),Z),$(d(o,"DiceTable"),"RollResult").$new(Q.name,ae,ue)},k.$$arity=1),_.$private(),e.def(_,"$expand",a=function(Z,Q){var ae;return A(Z,"gsub",[/%{([a-z]+)}/],((ae=function(){var ze,De=null==ae.$$s?this:ae.$$s;return ze=d(o,"Regexp").$last_match()["$[]"](1).$to_sym(),De.$roll_skill(ze,Q)}).$$s=this,ae.$$arity=0,ae))},a.$$arity=2),e.const_set(o[0],"CATEGORIES",["star","beast","force","poem","dream","night"].$freeze()),e.def(_,"$roll_skill",p=function(Z,Q){var ue=F;return Z["$=="]("skill")?this.skill_table.$roll_skill(Q):Z["$=="]("element")?this.skill_table.$roll_category(Q):(ue=d(o,"CATEGORIES").$index(Z),i(ue)||this.$raise(d(o,"ArgumentError")),this.skill_table.$categories()["$[]"](ue).$roll(Q).$name())},p.$$arity=2),function(L,j,l){var T,f,k,_=t(L,null,"FallenAfterTable"),o=[_].concat(l);_.$$prototype.lower=_.$$prototype.higher=_.$$prototype.name=F,e.defs(_,"$from_i18n",T=function(p,U){var Q=F;return Q=d(o,"I18n").$t(p,Y(["locale","raise"],{locale:U,raise:!0})),this.$new(Q["$[]"]("name"),Q["$[]"]("items_lower"),Q["$[]"]("items_higher"))},T.$$arity=2),e.def(_,"$initialize",f=function(p,U,Z){var Q=this;return Q.name=p,Q.lower=U,Q.higher=Z},f.$$arity=3),e.def(_,"$roll",k=function(p){var U,Z,ae,ue,Q=this,ye=F;return Z=p.$roll_barabara(2,6),ue=null==(U=e.to_ary(Z))[1]?F:U[1],ye=i(X(ae=null==U[0]?F:U[0],3))?Q.lower:Q.higher,Q.name+"("+ae+","+ue+") \uff1e "+ye["$[]"](r(ue,1))},k.$$arity=1)}(y[0],0,y),function(L,j){var _,o,l=[L].concat(j);L.$private(),e.def(L,"$translate_skill_table",_=function(f){return $(d(l,"DiceTable"),"SaiFicSkillTable").$from_i18n("MagicaLogia.skill_table",f,Y(["rttn"],{rttn:["RTS","RTB","RTF","RTP","RTD","RTN"]}))},_.$$arity=1),e.def(L,"$translate_tables",o=function(f,k){var p,U,Z,Q,ae,ue;return p=d(l,"SkillExpandTable").$from_i18n("MagicaLogia.inveterate_enemy_table",f,k),U=$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.conspiracy_table",f),Z=$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.fate_table",f),Q=$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.cueball_table",f),ae=$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.force_field_table",f),ue=d(l,"SkillExpandTable").$from_i18n("MagicaLogia.alliance_table",f,k),Y(["TPT","ST","FT","WT","FCT","AT","BGT","DAT","FAT","WIT","TCT","PCT","MCT","ICT","SCT","XCT","WCT","CCT","MIT","MOT","MAT","MUT","MFT","MLT","BST","PT","XEST","IWST","MCST","WDST","LWST","STB","MGCT","MBST","MAST","TCST","PWST","PAST","GBST","SLST","WLAT","WMT","FFT","OLST","TPTB","FLT"],{TPT:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TPT",f,k),ST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.ST",f,k),FT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FT",f),WT:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WT",f,k),FCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FCT",f),AT:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.AT",f,k),BGT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.BGT",f),DAT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.DAT",f),FAT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FAT",f),WIT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WIT",f),TCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.TCT",f),PCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.PCT",f),MCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.MCT",f),ICT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.ICT",f),SCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.SCT",f),XCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.XCT",f),WCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WCT",f),CCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.CCT",f),MIT:p,MOT:U,MAT:Z,MUT:Q,MFT:ae,MLT:ue,BST:$(d(l,"DiceTable"),"ChainTable").$new(d(l,"I18n").$translate("MagicaLogia.tables.BST.name",Y(["raise","locale"],{raise:!0,locale:f})),"1D6",[p,U,Z,Q,ae,ue]),PT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.PT",f),XEST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.XEST",f,k),IWST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.IWST",f,k),MCST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MCST",f,k),WDST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WDST",f,k),LWST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.LWST",f,k),STB:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.STB",f,k),MGCT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.MGCT",f),MBST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MBST",f,k),MAST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.MAST",f,k),TCST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TCST",f,k),PWST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.PWST",f,k),PAST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.PAST",f,k),GBST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.GBST",f,k),SLST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.SLST",f,k),WLAT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.WLAT",f),WMT:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.WMT",f,k),FFT:$(d(l,"DiceTable"),"Table").$from_i18n("MagicaLogia.tables.FFT",f),OLST:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.OLST",f,k),TPTB:d(l,"SkillExpandTable").$from_i18n("MagicaLogia.tables.TPTB",f,k),FLT:d(l,"FallenAfterTable").$from_i18n("MagicaLogia.tables.FLT",f)})},o.$$arity=2)}(e.get_singleton_class(u),y),e.const_set(y[0],"SKILL_TABLE",u.$translate_skill_table("ja_jp")),e.const_set(y[0],"TABLES",u.$translate_tables("ja_jp",d(y,"SKILL_TABLE"))),u.$register_prefix(d(y,"SKILL_TABLE").$prefixes()),u.$register_prefix(d(y,"TABLES").$keys())}(Opal)}}]);