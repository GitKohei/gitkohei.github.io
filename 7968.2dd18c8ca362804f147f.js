(self.webpackChunkudonarium_lily_gk=self.webpackChunkudonarium_lily_gk||[]).push([[7968],{7968:function(Xe,Je,Ze){Ze(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function Q(D,i){return"number"==typeof D&&"number"==typeof i?D-i:D["$-"](i)}var i,f,G,x,j,C,Y,T=[],r=e.nil,m=e.$$$,s=e.$$,F=e.module,_=e.truthy,L=e.send,E=e.send2,t=e.hash2;return i=T,Y=[C=F(T[0],"I18n")].concat(i),e.class_variable_set(Y[0],"@@fallbacks",r),f=e.get_singleton_class(C),j=[f].concat(Y),e.def(f,"$fallbacks",G=function(){var q,n,o;return e.class_variable_set(j[1],"@@fallbacks",_(o=null==(q=j[1].$$cvars["@@fallbacks"])?r:q)?o:m(m(s(j,"I18n"),"Locale"),"Fallbacks").$new()),_(n=s(j,"Thread").$current()["$[]"]("i18n_fallbacks"))?n:null==(q=j[1].$$cvars["@@fallbacks"])?r:q},G.$$arity=0),e.def(f,"$fallbacks=",x=function(q){var z,n;return e.class_variable_set(j[1],"@@fallbacks",_(q["$is_a?"](s(j,"Array")))?m(m(s(j,"I18n"),"Locale"),"Fallbacks").$new(q):q),n=["i18n_fallbacks",null==(z=j[1].$$cvars["@@fallbacks"])?r:z],L(s(j,"Thread").$current(),"[]=",e.to_a(n)),n[Q(n.length,1)]},x.$$arity=1),void function(f,A){var G=[F(f,"Backend")].concat(A);!function(x,K){var o,n,c,$,q=F(x,"Fallbacks"),z=[q].concat(K);e.def(q,"$translate",o=function(h,v,p){try{var y,B=o.$$p,P=this,d=r,l=r,g=r,R=r,N=r,u=r;for(B&&(o.$$p=null),N=0,u=arguments.length,R=new Array(u);N<u;N++)R[N]=arguments[N];return null==p&&(p=s(z,"EMPTY_HASH")),!_(p.$fetch("fallback",!0))||_(p["$[]"]("fallback_in_progress"))?E(P,e.find_super_dispatcher(P,"translate",o,!1,!0),"translate",R,B):(_(p["$[]"]("default"))&&(d=P["$extract_non_symbol_default!"](p)),l=p.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),L(s(z,"I18n").$fallbacks()["$[]"](h),"each",[],((y=function(Z){var W,re=null==y.$$s?this:y.$$s;null==Z&&(Z=r);try{return L(re,"catch",["exception"],((W=function(){var ue=null==W.$$s?this:W.$$s,fe=r;if(fe=E(ue,e.find_iter_super_dispatcher(ue,"translate",W.$$def||y.$$def||o,!1,!1),"translate",[Z,v,l],null),_(fe["$nil?"]()))return r;_(h.$to_s()["$!="](Z.$to_s()))&&ue.$on_fallback(h,Z,v,p),e.ret(fe)}).$$s=re,W.$$arity=0,W))}catch(ie){if(!e.rescue(ie,[m(s(z,"I18n"),"InvalidLocale")]))throw ie;try{return r}finally{e.pop_exception()}}}).$$s=P,y.$$arity=1,y)),_(_(g=p["$key?"]("default"))?p["$[]"]("default")["$nil?"]():g)?r:_(d)?E(P,e.find_super_dispatcher(P,"translate",o,!1,!0),"translate",[h,r,p.$merge(t(["default"],{default:d}))],null):P.$throw("exception",m(s(z,"I18n"),"MissingTranslation").$new(h,v,p)))}catch(S){if(S===e.returner)return S.$v;throw S}},o.$$arity=-3),e.def(q,"$extract_non_symbol_default!",n=function(h){var v,B,y=r,V=r;return y=[h["$[]"]("default")].$flatten(),B=L(y,"detect",[],((v=function(d){return null==d&&(d=r),d["$is_a?"](s(z,"Symbol"))["$!"]()}).$$s=this,v.$$arity=1,v)),_(B)&&(V=["default",y["$[]"](0,y.$index(B))],L(h,"[]=",e.to_a(V)),Q(V.length,1)),B},n.$$arity=1),e.def(q,"$exists?",c=function(h,v,p){try{var y,B=c.$$p,P=this,d=r,l=r,g=r;for(B&&(c.$$p=null),l=0,g=arguments.length,d=new Array(g);l<g;l++)d[l]=arguments[l];return null==p&&(p=s(z,"EMPTY_HASH")),_(p.$fetch("fallback",!0))?(L(s(z,"I18n").$fallbacks()["$[]"](h),"each",[],((y=function(N){var u=null==y.$$s?this:y.$$s;null==N&&(N=r);try{if(!_(E(u,e.find_iter_super_dispatcher(u,"exists?",y.$$def||c,!1,!1),"exists?",[N,v],null)))return r;e.ret(!0)}catch(S){if(!e.rescue(S,[m(s(z,"I18n"),"InvalidLocale")]))throw S;try{return r}finally{e.pop_exception()}}}).$$s=P,y.$$arity=1,y)),!1):E(P,e.find_super_dispatcher(P,"exists?",c,!1,!0),"exists?",d,B)}catch(R){if(R===e.returner)return R.$v;throw R}},c.$$arity=-3),q.$private(),e.def(q,"$on_fallback",$=function(h,v,p,y){return r},$.$$arity=4)}(G[0],G)}(Y[0],Y)},Opal.modules["bcdice/randomizer"]=function(e){function Q(f,A){return"number"==typeof f&&"number"==typeof A?f>A:f["$>"](A)}function O(f,A){return"number"==typeof f&&"number"==typeof A?f+A:f["$+"](A)}function T(f,A){return"number"==typeof f&&"number"==typeof A?f<=A:f["$<="](A)}function r(f,A){return"number"==typeof f&&"number"==typeof A?f-A:f["$-"](A)}function m(f,A){return"number"==typeof f&&"number"==typeof A?f*A:f["$*"](A)}var A,q,n,c,$,b,h,v,p,y,B,V,P,z,o,G,_=[],L=e.nil,E=e.$$$,t=e.$$,i=e.klass,C=e.truthy,Y=e.send;return A=_,q=G=[(0,e.module)(_[0],"BCDice")].concat(A),z=i(G[0],null,"Randomizer"),o=[z].concat(q),z.$$prototype.rand_results=z.$$prototype.detailed_rand_results=L,e.const_set(o[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(o[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(o[0],"UPPER_LIMIT_RANDS",1e4),e.def(z,"$initialize",n=function(){return this.rand_results=[],this.detailed_rand_results=[]},n.$$arity=0),z.$attr_reader("rand_results"),z.$attr_reader("detailed_rand_results"),e.const_set(o[0],"DetailedRandResult",t(o,"Struct").$new("kind","sides","value")),e.def(z,"$roll_barabara",c=function(l,g){var R,u,N=this;return C(Q(O(N.rand_results.$size(),l),t(o,"UPPER_LIMIT_RANDS")))&&N.$raise(t(o,"TooManyRandsError")),C(C(u=T(l,0))?u:Q(l,t(o,"UPPER_LIMIT_DICE_TIMES")))?[]:Y(t(o,"Array"),"new",[l],((R=function(){return(null==R.$$s?this:R.$$s).$roll_once(g)}).$$s=N,R.$$arity=0,R))},c.$$arity=2),e.def(z,"$roll_sum",$=function(l,g){return this.$roll_barabara(l,g).$sum()},$.$$arity=2),e.def(z,"$roll_once",b=function(l){var R,N=L;return C(C(R=T(l,0))?R:Q(l,t(o,"UPPER_LIMIT_DICE_SIDES")))?0:(N=this.$rand_inner(l),this.$push_to_detail("normal",l,N),N)},b.$$arity=1),e.def(z,"$roll_index",h=function(l){return r(this.$roll_once(l),1)},h.$$arity=1),e.def(z,"$roll_tens_d10",v=function(){var R,g=L;return(g=this.$rand_inner(10))["$=="](10)&&(g=0),R=m(g,10),this.$push_to_detail("tens_d10",10,R),R},v.$$arity=0),e.def(z,"$roll_d9",p=function(){var g;return g=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,g),g},p.$$arity=0),e.def(z,"$roll_d66",y=function(l){var g,u,N=L;return N=Y(t(o,"Array"),"new",[2],((g=function(){return(null==g.$$s?this:g.$$s).$roll_once(6)}).$$s=this,g.$$arity=0,g)),u=l,E(t(o,"D66SortType"),"ASC")["$==="](u)?N["$sort!"]():E(t(o,"D66SortType"),"DESC")["$==="](u)&&N["$sort!"]()["$reverse!"](),O(m(N["$[]"](0),10),N["$[]"](1))},y.$$arity=1),z.$private(),e.def(z,"$rand_inner",B=function(l){var R,g=this;return C(function(f,A){return"number"==typeof f&&"number"==typeof A?f>=A:f["$>="](A)}(g.rand_results.$size(),t(o,"UPPER_LIMIT_RANDS")))&&g.$raise(t(o,"TooManyRandsError")),R=g.$random(l),g.rand_results["$<<"]([R,l]),R},B.$$arity=1),e.def(z,"$random",V=function(l){return O(t(o,"Kernel").$rand(l),1)},V.$$arity=1),e.def(z,"$push_to_detail",P=function(l,g,R){var u;return u=t(o,"DetailedRandResult").$new(l,g,R),this.detailed_rand_results.$push(u)},P.$$arity=3),void function(x,K,q){[i(x,K,"TooManyRandsError")].concat(q)}(G[0],t(G,"StandardError"),G)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var E,C,G,q,z,o,n,x,K,f,D,O=[],T=e.nil,m=e.$$,s=e.module,F=e.klass,_=e.truthy;return E=O,C=D=[s(O[0],"BCDice")].concat(E),G=f=[s(D[0],"DiceTable")].concat(C),x=F(f[0],null,"RollResult"),K=[x].concat(G),x.$$prototype.table_name=x.$$prototype.value=x.$$prototype.body=T,e.def(x,"$initialize",q=function($,b,h){var v=this;return v.table_name=$,v.value=b,v.body=h},q.$$arity=3),x.$attr_reader("table_name"),x.$attr_reader("value"),x.$attr_reader("body"),e.def(x,"$to_s",z=function(){var $=this;return $.table_name+"("+$.value+") \uff1e "+$.body},z.$$arity=0),e.def(x,"$last_body",o=function(){var $=this;return _($.body["$is_a?"](m(K,"RollResult")))?$.body.$last_body():$.body},o.$$arity=0),void e.def(x,"$empty?",n=function(){return!1},n.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,Y,x,z,o,K,q,A,i,T=[],r=e.nil,s=e.$$,F=e.module,_=e.klass,L=e.truthy;return t=T,Y=i=[F(T[0],"BCDice")].concat(t),x=A=[F(i[0],"DiceTable")].concat(Y),K=_(A[0],null,"ChainTable"),q=[K].concat(x),K.$$prototype.times=K.$$prototype.sides=K.$$prototype.items=K.$$prototype.name=r,e.def(K,"$initialize",z=function(c,$,b){var h=this,v=r;return h.name=c,h.items=b.$freeze(),v=/(\d+)D(\d+)/i.$match($),L(v)||h.$raise(s(q,"ArgumentError"),"Unexpected table type: "+$),h.times=v["$[]"](1).$to_i(),h.sides=v["$[]"](2).$to_i()},z.$$arity=3),void e.def(K,"$roll",o=function(c){var b,h,$=this,v=r;return h=function(E,t){return"number"==typeof E&&"number"==typeof t?E-t:E["$-"](t)}(b=c.$roll_sum($.times,$.sides),$.times),v=$.items["$[]"](h),L(v["$respond_to?"]("roll"))&&(v=v.$roll(c)),s(q,"RollResult").$new($.name,b,v)},o.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function T(D,i){return"number"==typeof D&&"number"==typeof i?D-i:D["$-"](i)}var i,A,q,n,c,$,z,o,G,Y,m=[],s=e.nil,_=e.$$,L=e.module,E=e.klass,t=e.hash2;return i=m,A=Y=[L(m[0],"BCDice")].concat(i),q=G=[L(Y[0],"DiceTable")].concat(A),z=E(G[0],null,"D66GridTable"),o=[z].concat(q),z.$$prototype.name=z.$$prototype.items=s,e.defs(z,"$from_i18n",n=function(h,v){var y=s;return y=_(o,"I18n").$t(h,t(["locale","raise"],{locale:v,raise:!0})),this.$new(y["$[]"]("name"),y["$[]"]("items"))},n.$$arity=2),e.def(z,"$initialize",c=function(h,v){return this.name=h,this.items=v.$freeze()},c.$$arity=2),void e.def(z,"$roll",$=function(h){var p,y,B,V,P,D;return p=h.$roll_once(6),y=h.$roll_once(6),B=function(D,i){return"number"==typeof D&&"number"==typeof i?D+i:D["$+"](i)}("number"==typeof(D=p)?10*D:D["$*"](10),y),V=T(p,1),P=T(y,1),_(o,"RollResult").$new(this.name,B,this.items["$[]"](V)["$[]"](P))},$.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var E,C,G,q,z,x,K,f,D,O=[],T=e.nil,m=e.$$,s=e.module,F=e.klass,_=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),E=O,C=D=[s(O[0],"BCDice")].concat(E),G=f=[s(D[0],"DiceTable")].concat(C),x=F(f[0],m(f,"D66GridTable"),"D66HalfGridTable"),K=[x].concat(G),e.defs(x,"$from_i18n",q=function(n,c){var b=T;return b=m(K,"I18n").$t(n,_(["locale","raise"],{locale:c,raise:!0})),this.$new(b["$[]"]("name"),b["$[]"]("items_1_2_3"),b["$[]"]("items_4_5_6"))},q.$$arity=2),void e.def(x,"$initialize",z=function(n,c,$){return this.name=n,this.items=[c,c,c,$,$,$].$freeze()},z.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var E,C,G,q,z,x,K,f,D,O=[],T=e.nil,m=e.$$,s=e.module,F=e.klass,_=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),E=O,C=D=[s(O[0],"BCDice")].concat(E),G=f=[s(D[0],"DiceTable")].concat(C),x=F(f[0],m(f,"D66GridTable"),"D66OneThirdTable"),K=[x].concat(G),e.defs(x,"$from_i18n",q=function(n,c){var b=T;return b=m(K,"I18n").$t(n,_(["locale","raise"],{locale:c,raise:!0})),this.$new(b["$[]"]("name"),b["$[]"]("items_1_2"),b["$[]"]("items_3_4"),b["$[]"]("items_5_6"))},q.$$arity=2),void e.def(x,"$initialize",z=function(n,c,$,b){return this.name=n,this.items=[c,c,$,$,b,b].$freeze()},z.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var i,A,q,n,c,$,z,o,G,Y,r=[],m=e.nil,s=e.$$$,F=e.$$,_=e.module,L=e.klass,E=e.hash2,t=e.truthy;return i=r,A=Y=[_(r[0],"BCDice")].concat(i),q=G=[_(Y[0],"DiceTable")].concat(A),z=L(G[0],null,"D66Table"),o=[z].concat(q),z.$$prototype.sort_type=z.$$prototype.items=z.$$prototype.name=m,e.defs(z,"$from_i18n",n=function(h,v){var B,y=m;return y=F(o,"I18n").$t(h,E(["locale"],{locale:v})),B=F(o,"D66SortType").$const_get(y["$[]"]("d66_sort_type")),this.$new(y["$[]"]("name"),B,y["$[]"]("items"))},n.$$arity=2),e.def(z,"$initialize",c=function(h,v,p){var y=this;return y.name=h,y.sort_type=v,y.items=p.$freeze()},c.$$arity=3),void e.def(z,"$roll",$=function(h){var y,P,D,v=this,p=m,B=m,V=m;return p=h.$roll_barabara(2,6),y=v.sort_type,s(F(o,"D66SortType"),"ASC")["$==="](y)?p["$sort!"]():s(F(o,"D66SortType"),"DESC")["$==="](y)&&p["$sort!"]()["$reverse!"](),B=function(D,i){return"number"==typeof D&&"number"==typeof i?D+i:D["$+"](i)}("number"==typeof(D=p["$[]"](0))?10*D:D["$*"](10),p["$[]"](1)),V=t(P=v.items["$[]"](B))?P:v.items["$[]"](B.$to_s()),t(V["$respond_to?"]("roll"))&&(V=V.$roll(h)),F(o,"RollResult").$new(v.name,B,V)},$.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function Q(C,Y){return"number"==typeof C&&"number"==typeof Y?C+Y:C["$+"](Y)}var Y,o,$,n,G,K,A,m=[],s=e.nil,_=e.$$,L=e.module,E=e.klass,t=e.hash2,D=e.send,i=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),Y=m,G=A=[L(m[0],"BCDice")].concat(Y),o=K=[L(A[0],"DiceTable")].concat(G),[n=E(K[0],_(K,"D66Table"),"D66LeftRangeTable")].concat(o),void e.def(n,"$initialize",$=function(h,v,p){var y,d,P=this;return $.$$p&&($.$$p=null),d=t([],{}),D(p,"each",[],((y=function(l){function g(R){return l.apply(this,arguments)}return g.toString=function(){return l.toString()},g}(function(l){var R,u,Z,g=null==y.$$s?this:y.$$s;return null==l&&(l=s),R=e.to_ary(l),Z=null==R[1]?s:R[1],D(null==R[0]?s:R[0],"each",[],((u=function(W){var ue;return null==W&&(W=s),D(Z,"each_with_index",[],((ue=function(Se,xe){var Ee,ye,C;return null==Se&&(Se=s),null==xe&&(xe=s),Ee=Q("number"==typeof(C=W)?10*C:C["$*"](10),Q(xe,1)),D(d,"[]=",e.to_a(ye=[Ee,Se])),ye[function(C,Y){return"number"==typeof C?C-1:C["$-"](1)}(ye.length)]}).$$s=null==u.$$s?this:u.$$s,ue.$$arity=2,ue))}).$$s=g,u.$$arity=1,u))})).$$s=P,y.$$arity=1,y)),i(P,e.find_super_dispatcher(P,"initialize",$,!1,!0),"initialize",[h,v,d],null)},$.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var i,A,q,n,c,z,o,G,Y,m=[],s=e.nil,_=e.$$,L=e.module,E=e.klass,t=e.truthy;return i=m,A=Y=[L(m[0],"BCDice")].concat(i),q=G=[L(Y[0],"DiceTable")].concat(A),z=E(G[0],null,"D66ParityTable"),o=[z].concat(q),z.$$prototype.odd=z.$$prototype.even=z.$$prototype.name=s,e.def(z,"$initialize",n=function(b,h,v){var p=this;return p.name=b,p.odd=h.$freeze(),p.even=v.$freeze()},n.$$arity=3),void e.def(z,"$roll",c=function(b){var p,B,V,D,h=this,v=s;return v=b.$roll_once(6),p=b.$roll_once(6),B=(t(v["$odd?"]())?h.odd:h.even)["$[]"]("number"==typeof(D=p)?D-1:D["$-"](1)),V=function(D,i){return"number"==typeof D&&"number"==typeof i?D+i:D["$+"](i)}(function(D,i){return"number"==typeof D?10*D:D["$*"](10)}(v),p),_(o,"RollResult").$new(h.name,V,B)},c.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var D,f,K,o,n,q,z,j,C,r=[],m=e.nil,F=e.$$,_=e.module,L=e.klass,E=e.send;return D=r,f=C=[_(r[0],"BCDice")].concat(D),K=j=[_(C[0],"DiceTable")].concat(f),q=L(j[0],null,"D66RangeTable"),z=[q].concat(K),q.$$prototype.items=q.$$prototype.name=m,e.def(q,"$initialize",o=function($,b){return this.name=$,this.items=b.$freeze()},o.$$arity=2),void e.def(q,"$roll",n=function($){var b,v,p,y,t,h=this,B=m;return v=$.$roll_once(6),p=$.$roll_once(6),y=function(t,D){return"number"==typeof t&&"number"==typeof D?t+D:t["$+"](D)}("number"==typeof(t=v)?10*t:t["$*"](10),p),B=E(h.items,"find",[],((b=function(P){return null==P&&(P=m),P["$[]"](0)["$include?"](y)}).$$s=h,b.$$arity=1,b)),F(z,"RollResult").$new(h.name,y,B["$[]"](1))},n.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var C,j,z,c,$,b,h,v,p,y,B,V,o,n,x,f,m=[],s=e.nil,_=e.$$,L=e.module,E=e.klass,t=e.send,D=e.truthy;return C=m,j=f=[L(m[0],"BCDice")].concat(C),z=x=[L(f[0],"DiceTable")].concat(j),o=E(x[0],null,"RangeTable"),n=[o].concat(z),o.$$prototype.name=o.$$prototype.items=o.$$prototype.num_of_dice=o.$$prototype.num_of_sides=o.$$prototype.formatter=s,e.const_set(n[0],"RollResult",t(_(n,"Struct"),"new",["sum","values","content","formatted"],((c=function(){return(null==c.$$s?this:c.$$s).$alias_method("to_s","formatted")}).$$s=o,c.$$arity=0,c))),e.const_set(n[0],"Item",_(n,"Struct").$new("range","content")),e.const_set(n[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(n[0],"DEFAULT_FORMATTER",t(o,"lambda",[],($$2=function(P){function d(l,g){return P.apply(this,arguments)}return d.toString=function(){return P.toString()},d}(function(P,d){return null==$$2.$$s||$$2,null==P&&(P=s),null==d&&(d=s),P.$name()+"("+d.$sum()+") \uff1e "+d.$content()}),$$2.$$s=o,$$2.$$arity=2,$$2))),o.$attr_reader("name"),o.$attr_reader("num_of_dice"),o.$attr_reader("num_of_sides"),e.def(o,"$initialize",$=function(d,l,g){var S,R=$.$$p,N=R||s,u=this,Z=s;return R&&($.$$p=null),R&&($.$$p=null),u.name=d.$freeze(),u.formatter=D(S=N)?S:_(n,"DEFAULT_FORMATTER"),Z=_(n,"DICE_ROLL_METHOD_RE").$match(l),D(Z)||u.$raise(_(n,"ArgumentError"),u.name+": invalid dice roll method: "+l),u.num_of_dice=Z["$[]"](1).$to_i(),u.num_of_sides=Z["$[]"](2).$to_i(),u.$store(g)},$.$$arity=3),e.def(o,"$fetch",b=function(d){var l,R,g=this;return R=t(g.items,"find",[],((l=function(u){return null==u&&(u=s),u.$range()["$include?"](d)}).$$s=g,l.$$arity=1,l)),D(R)||g.$raise(_(n,"RangeError"),g.name+": value is out of range: "+d),R},b.$$arity=1),e.def(o,"$roll",h=function(d){var R,N,u,i,l=this,g=s;return R=(g=d.$roll_barabara(l.num_of_dice,l.num_of_sides)).$sum(),N=_(n,"RollResult").$new(R,g,l.$fetch(R).$content()),u=[l.formatter["$[]"](l,N)],t(N,"formatted=",e.to_a(u)),"number"==typeof(i=u.length)||i["$-"](1),N},h.$$arity=1),o.$private(),e.def(o,"$store",v=function(d){var l,g,R,u,S,N=this;return u=t(d,"map",[],((l=function(re,W){return null==re&&(re=s),null==W&&(W=s),[(null==l.$$s?this:l.$$s).$coerce_to_int_range(re),W]}).$$s=N,l.$$arity=2,l)),S=t(u,"sort_by",[],((g=function(re,W){return null==re&&(re=s),null==W&&(W=s),re.$min()}).$$s=N,g.$$arity=2,g)),N.$assert_min_sum_is_covered(S),N.$assert_max_sum_is_covered(S),N.$assert_no_gap_or_overlap_in_ranges(S),N.items=t(S,"map",[],(R=function(re,W){return null==re&&(re=s),null==W&&(W=s),_(n,"Item").$new(re,W.$freeze()).$freeze()},R.$$s=N,R.$$arity=2,R)).$freeze(),N},v.$$arity=1),e.def(o,"$coerce_to_int_range",p=function(d){var g,R=s;return g=d,_(n,"Integer")["$==="](g)?_(n,"Range").$new(d,d):_(n,"Range")["$==="](g)&&D(D(R=d.$begin()["$is_a?"](_(n,"Integer")))?d.$end()["$is_a?"](_(n,"Integer")):R)?d:this.$raise(_(n,"TypeError"),this.name+": "+d+" ("+d.$class()+") must be an Integer or a Range with Integers ")},p.$$arity=1),e.def(o,"$assert_min_sum_is_covered",y=function(d){var g,l=this,R=s;return g=l.num_of_dice,R=d.$first()["$[]"](0),D(R["$include?"](g))||l.$raise(_(n,"RangeError"),l.name+": min value ("+g+") is not covered: "+R),l},y.$$arity=1),e.def(o,"$assert_max_sum_is_covered",B=function(d){var g,l=this,R=s;return g=function(i,C){return"number"==typeof i&&"number"==typeof C?i*C:i["$*"](C)}(l.num_of_dice,l.num_of_sides),R=d.$last()["$[]"](0),D(R["$include?"](g))||l.$raise(_(n,"RangeError"),l.name+": max value ("+g+") is not covered: "+R),l},B.$$arity=1),void e.def(o,"$assert_no_gap_or_overlap_in_ranges",V=function(d){var l;return t(d,"each_cons",[2],((l=function(N,u){var W,ie,i,S=null==l.$$s?this:l.$$s,Z=s,re=s;return null==S.name&&(S.name=s),null==N&&(N=s),null==u&&(u=s),Z=N["$[]"](0),re=u["$[]"](0),ie="number"==typeof(i=W=Z.$max())?i+1:i["$+"](1),D(re["$include?"](W))&&S.$raise(_(n,"RangeError"),S.name+": Range overlap: "+Z+" and "+re),D(re["$include?"](ie))?s:S.$raise(_(n,"RangeError"),S.name+": Range gap: "+Z+" and "+re)}).$$s=this,l.$$arity=2,l)),this},V.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,Y,x,n,b,h,v,c,$,q,A,i,T=[],r=e.nil,m=e.$$$,s=e.$$,F=e.module,_=e.klass,L=e.send;return t=T,Y=i=[F(T[0],"BCDice")].concat(t),x=A=[F(i[0],"DiceTable")].concat(Y),n=q=[_(A[0],null,"SaiFicSkillTable")].concat(x),c=_(q[0],null,"Category"),$=[c].concat(n),c.$$prototype.name=r,e.def(c,"$initialize",b=function(y,B,V,P){var d,l=this;return l.name=y,l.skills=L(B.$map(),"with_index",[2],((d=function(g){function R(N,u){return g.apply(this,arguments)}return R.toString=function(){return g.toString()},R}(function(g,R){return null==g&&(g=r),null==R&&(R=r),m(s($,"SaiFicSkillTable"),"Skill").$new(y,g,V,R,P)})).$$s=l,d.$$arity=2,d)),l.dice=V},b.$$arity=4),e.def(c,"$roll",h=function(y){return this.$skills()["$[]"]("number"==typeof(E=y.$roll_sum(2,6))?E-2:E["$-"](2));var E},h.$$arity=1),e.def(c,"$to_s",v=function(){return this.name},v.$$arity=0),void c.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var E,C,o,$,b,n,G,K,f,D,O=[],T=e.nil,s=e.module,F=e.klass,_=e.hash2;return E=O,C=D=[s(O[0],"BCDice")].concat(E),G=f=[s(D[0],"DiceTable")].concat(C),o=K=[F(f[0],null,"SaiFicSkillTable")].concat(G),[n=F(K[0],null,"Skill")].concat(o),n.$$prototype.s_format=n.$$prototype.category_dice=n.$$prototype.row_dice=n.$$prototype.category_name=n.$$prototype.name=T,e.def(n,"$initialize",$=function(v,p,y,B,V){var P=this;return P.category_name=v,P.name=p,P.category_dice=y,P.row_dice=B,P.s_format=V},$.$$arity=5),e.def(n,"$to_s",b=function(){var v=this;return v.$format(v.s_format,_(["category_dice","row_dice","category_name","skill_name"],{category_dice:v.category_dice,row_dice:v.row_dice,category_name:v.category_name,skill_name:v.name}))},b.$$arity=0),void n.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var Y,G,o,$,b,h,v,p,y,B,n,c,K,A,T=e.top,r=[],m=e.nil,s=e.$$$,F=e.$$,_=e.module,L=e.klass,E=e.hash2,t=e.send,i=e.truthy;return T.$require("bcdice/dice_table/sai_fic_skill_table/category"),T.$require("bcdice/dice_table/sai_fic_skill_table/skill"),Y=r,G=A=[_(r[0],"BCDice")].concat(Y),o=K=[_(A[0],"DiceTable")].concat(G),n=L(K[0],null,"SaiFicSkillTable"),c=[n].concat(o),n.$$prototype.rtt=n.$$prototype.rtt_format=n.$$prototype.rct=n.$$prototype.rct_format=n.$$prototype.rttn=n.$$prototype.rttn_format=n.$$prototype.categories=m,e.defs(n,"$from_i18n",$=function(P,d,l){var g,R,N,u,W,re=m;if(null==l)l=E([],{});else if(!l.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(g=l.$$smap.rtt)&&(g=m),null==(R=l.$$smap.rct)&&(R=m),null==(N=l.$$smap.rttn)&&(N=m),W=(re=F(c,"I18n").$t("RTT",E(["locale","raise","default"],{locale:d,raise:!1,default:E([],{})})).$merge(F(c,"I18n").$t(P,E(["locale","raise"],{locale:d,raise:!0}))))["$[]"]("items"),re=t(re,"select",[],((u=function(ie){function ue(fe,Se){return ie.apply(this,arguments)}return ue.toString=function(){return ie.toString()},ue}(function(ie,ue){return null==ie&&(ie=m),null==ue&&(ue=m),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](ie)})).$$s=this,u.$$arity=2,u)),this.$new(W,e.to_hash(re).$merge(E(["rtt","rct","rttn"],{rtt:g,rct:R,rttn:N})))},$.$$arity=-3),e.const_set(c[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(c[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(c[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(c[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(n,"$initialize",b=function(P,d){var l,g,R,N,u,S,Z,re,W=this;if(null==d)d=E([],{});else if(!d.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(l=d.$$smap.rtt)&&(l=m),null==(g=d.$$smap.rct)&&(g=m),null==(R=d.$$smap.rttn)&&(R=m),null==(N=d.$$smap.rtt_format)&&(N=F(c,"DEFAULT_RTT")),null==(u=d.$$smap.rct_format)&&(u=F(c,"DEFAULT_RCT")),null==(S=d.$$smap.rttn_format)&&(S=F(c,"DEFAULT_RTTN")),null==(Z=d.$$smap.s_format)&&(Z=F(c,"DEFAULT_S")),W.categories=t(P.$map(),"with_index",[1],((re=function(ue,fe){var xe,Ee,ye;return null==ue&&(ue=m),null==fe&&(fe=m),Ee=null==(xe=e.to_ary(ue))[0]?m:xe[0],ye=null==xe[1]?m:xe[1],s(F(c,"SaiFicSkillTable"),"Category").$new(Ee,ye,fe,Z)}).$$s=W,re.$$arity=2,re.$$has_top_level_mlhs_arg=!0,re)),W.rtt=l,W.rct=g,W.rttn=R.$to_a(),W.rtt_format=N,W.rct_format=u,W.rttn_format=S},b.$$arity=-2),e.const_set(c[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),n.$attr_reader("categories"),e.def(n,"$roll_command",h=function(P,d){var g,l=this,R=m,N=m,u=m;return i(["RTT",l.rtt]["$include?"](g=d))?l.$format_skill(l.rtt_format,l.$roll_skill(P)):i(["RCT",l.rct]["$include?"](g))?(R=l.$roll_category(P),l.$format(l.rct_format,E(["category_dice","category_name"],{category_dice:R.$dice(),category_name:R.$name()}))):i(i(N=u=F(c,"RTTN").$index(g))?N:u=l.rttn.$index(g))?l.$format_skill(l.rttn_format,l.categories["$[]"](u).$roll(P)):m},h.$$arity=2),e.def(n,"$roll_category",v=function(P){return this.categories["$[]"]("number"==typeof(C=P.$roll_once(6))?C-1:C["$-"](1));var C},v.$$arity=1),e.def(n,"$roll_skill",p=function(P){return this.$roll_category(P).$roll(P)},p.$$arity=1),e.def(n,"$prefixes",y=function(){var P=this;return function(C,Y){return"number"==typeof C&&"number"==typeof Y?C+Y:C["$+"](Y)}(["RTT[1-6]?","RCT",P.rtt,P.rct],P.rttn).$compact()},y.$$arity=0),n.$private(),void e.def(n,"$format_skill",B=function(P,d){return this.$format(P,E(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:d.$category_dice(),row_dice:d.$row_dice(),category_name:d.$category_name(),skill_name:d.$name(),text:d.$to_s()}))},B.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var D,f,K,o,n,c,$,q,z,j,C,T=[],r=e.nil,s=e.$$,F=e.module,_=e.klass,L=e.hash2,E=e.truthy;return D=T,f=C=[F(T[0],"BCDice")].concat(D),K=j=[F(C[0],"DiceTable")].concat(f),q=_(j[0],null,"Table"),z=[q].concat(K),q.$$prototype.times=q.$$prototype.sides=q.$$prototype.name=q.$$prototype.items=r,e.defs(q,"$from_i18n",o=function(h,v){var y=r;return y=s(z,"I18n").$t(h,L(["locale"],{locale:v})),this.$new(y["$[]"]("name"),y["$[]"]("type"),y["$[]"]("items"))},o.$$arity=2),e.def(q,"$initialize",n=function(h,v,p){var y=this,B=r;return y.name=h,y.items=p.$freeze(),B=/(\d+)D(\d+)/i.$match(v),E(B)||y.$raise(s(z,"ArgumentError"),"Unexpected table type: "+v),y.times=B["$[]"](1).$to_i(),y.sides=B["$[]"](2).$to_i()},n.$$arity=3),e.def(q,"$roll",c=function(h){var p,v=this;return p=h.$roll_sum(v.times,v.sides),v.$choice(p)},c.$$arity=1),void e.def(q,"$choice",$=function(h){var p,v=this;return p=function(t,D){return"number"==typeof t&&"number"==typeof D?t-D:t["$-"](D)}(h,v.times),s(z,"RollResult").$new(v.name,h,v.items["$[]"](p))},$.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var Q=e.top;return Q.$require("bcdice/dice_table/roll_result"),Q.$require("bcdice/dice_table/chain_table"),Q.$require("bcdice/dice_table/d66_grid_table"),Q.$require("bcdice/dice_table/d66_half_grid_table"),Q.$require("bcdice/dice_table/d66_one_third_table"),Q.$require("bcdice/dice_table/d66_left_range_table"),Q.$require("bcdice/dice_table/d66_parity_table"),Q.$require("bcdice/dice_table/d66_range_table"),Q.$require("bcdice/dice_table/d66_table"),Q.$require("bcdice/dice_table/range_table"),Q.$require("bcdice/dice_table/sai_fic_skill_table"),Q.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var _,D,C,E,O=[],s=e.module;return _=O,D=E=[s(O[0],"BCDice")].concat(_),C=[s(E[0],"D66SortType")].concat(D),e.const_set(C[0],"NO_SORT","no_sort"),e.const_set(C[0],"ASC","asc"),e.const_set(C[0],"DESC","desc"),void function(t,D){var C=[s(t,"RoundType")].concat(D);e.const_set(C[0],"CEIL","ceil"),e.const_set(C[0],"FLOOR","floor"),e.const_set(C[0],"ROUND","round")}(E[0],E)},Opal.modules["bcdice/translate"]=function(e){var E,C,A,Y,f,D,O=[],T=e.nil,m=e.$$,s=e.module,F=e.hash2;return E=O,C=D=[s(O[0],"BCDice")].concat(E),Y=s(D[0],"Translate"),f=[Y].concat(C),void e.def(Y,"$translate",A=function(G,x){var K,q=this;if(null==q.locale&&(q.locale=T),null==x)x=F([],{});else if(!x.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return K=e.kwrestargs(x,{}),m(f,"I18n").$translate(G,F(["locale","raise"],{locale:q.locale,raise:!0}).$merge(e.to_hash(K)))},A.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function Q(E,t){return"number"==typeof E&&"number"==typeof t?E-t:E["$-"](t)}var t,c,h,v,p,y,B,f,G,x,K,q,z,o,n,A,j,i,T=[],r=e.nil,_=e.klass,L=e.send;return t=T,f=i=[(0,e.module)(T[0],"BCDice")].concat(t),j=[A=_(i[0],null,"Result")].concat(f),A.$$prototype.secret=A.$$prototype.success=A.$$prototype.failure=A.$$prototype.critical=A.$$prototype.fumble=r,[c=e.get_singleton_class(A)].concat(j),e.def(c,"$success",h=function(P){var d;return L(this.$new(),"tap",[],((d=function(g){function R(N){return g.apply(this,arguments)}return R.toString=function(){return g.toString()},R}(function(g){var N=r;return null==g&&(g=r),L(g,"text=",e.to_a(N=[P])),Q(N.length,1),L(g,"success=",e.to_a(N=[!0])),N[Q(N.length,1)]})).$$s=this,d.$$arity=1,d))},h.$$arity=1),e.def(c,"$failure",v=function(P){var d;return L(this.$new(),"tap",[],((d=function(R){var u=r;return null==R&&(R=r),L(R,"text=",e.to_a(u=[P])),Q(u.length,1),L(R,"failure=",e.to_a(u=[!0])),u[Q(u.length,1)]}).$$s=this,d.$$arity=1,d))},v.$$arity=1),e.def(c,"$critical",p=function(P){var d;return L(this.$new(),"tap",[],((d=function(R){var u=r;return null==R&&(R=r),L(R,"text=",e.to_a(u=[P])),Q(u.length,1),L(R,"critical=",e.to_a(u=[!0])),Q(u.length,1),L(R,"success=",e.to_a(u=[!0])),u[Q(u.length,1)]}).$$s=this,d.$$arity=1,d))},p.$$arity=1),e.def(c,"$fumble",y=function(P){var d;return L(this.$new(),"tap",[],((d=function(R){var u=r;return null==R&&(R=r),L(R,"text=",e.to_a(u=[P])),Q(u.length,1),L(R,"fumble=",e.to_a(u=[!0])),Q(u.length,1),L(R,"failure=",e.to_a(u=[!0])),u[Q(u.length,1)]}).$$s=this,d.$$arity=1,d))},y.$$arity=1),e.def(c,"$nothing",B=function(){return"nothing"},B.$$arity=0),e.def(A,"$initialize",G=function($){var b=this;return null==$&&($=r),b.text=$,b.rands=r,b.detailed_rands=r,b.secret=!1,b.success=!1,b.failure=!1,b.critical=!1,b.fumble=!1},G.$$arity=-1),A.$attr_accessor("text","rands","detailed_rands"),A.$attr_writer("secret","success","failure","critical","fumble"),e.def(A,"$secret?",x=function(){return this.secret},x.$$arity=0),e.def(A,"$success?",K=function(){return this.success},K.$$arity=0),e.def(A,"$failure?",q=function(){return this.failure},q.$$arity=0),e.def(A,"$critical?",z=function(){return this.critical},z.$$arity=0),e.def(A,"$fumble?",o=function(){return this.fumble},o.$$arity=0),void e.def(A,"$condition=",n=function($){return this.success=$,this.failure=$["$!"]()},n.$$arity=1)},Opal.modules["racc/parser"]=function(e){function Q(G,x){return"number"==typeof G&&"number"==typeof x?G<x:G["$<"](x)}function O(G,x){return"number"==typeof G&&"number"==typeof x?G-x:G["$-"](x)}function T(G,x){return"number"==typeof G&&"number"==typeof x?G+x:G["$+"](x)}function r(G,x){return"number"==typeof G&&"number"==typeof x?G>=x:G["$>="](x)}function m(G,x){return"number"==typeof G&&"number"==typeof x?G>x:G["$>"](x)}function s(G,x){return"number"==typeof G&&"number"==typeof x?G<=x:G["$<="](x)}var z,o,n,x,q,E=[],t=e.nil,D=e.$$$,i=e.$$,C=e.module,Y=e.klass,f=e.truthy,A=e.gvars,j=e.send;return x=E,z=(q=[C(E[0],"Racc")].concat(x))[0],o=i(q,"StandardError"),n=q,[Y(z,o,"ParseError")].concat(n),f(D("::","ParseError","skip_raise")?"constant":t)||e.const_set(E[0],"ParseError",D(i(E,"Racc"),"ParseError")),function(G,x){var c,h,v,p,y,B,V,P,d,l,g,R,N,u,S,Z,re,W,ie,ue,fe,Se,xe,Be,Ee,$,b,q=[C(G,"Racc")].concat(x);f(i(q,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(q[0],"Racc_No_Extensions",!1),c=q,$=Y(q[0],null,"Parser"),b=[$].concat(c),$.$$prototype.yydebug=$.$$prototype.racc_debug_out=$.$$prototype.racc_error_status=$.$$prototype.racc_t=$.$$prototype.racc_vstack=$.$$prototype.racc_val=$.$$prototype.racc_state=$.$$prototype.racc_tstack=t,e.const_set(b[0],"Racc_Runtime_Version","1.4.6"),e.const_set(b[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(b[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(b[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(b[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(b[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(b[0],"Racc_Runtime_Core_Version",i(b,"Racc_Runtime_Core_Version_R")),e.const_set(b[0],"Racc_Runtime_Core_Revision",i(b,"Racc_Runtime_Core_Revision_R")),e.const_set(b[0],"Racc_Runtime_Type","ruby"),e.defs(i(b,"Parser"),"$racc_runtime_type",h=function(){return i(b,"Racc_Runtime_Type")},h.$$arity=0),e.def($,"$_racc_setup",v=function(){var ee,J,a=this,I=t,w=t,k=t;return null==A.stderr&&(A.stderr=t),f(D(a.$class(),"Racc_debug_parser"))||(a.yydebug=!1),f(null!=(ee=a.yydebug)&&ee!==t?"instance-variable":t)||(a.yydebug=!1),f(a.yydebug)&&(f(null!=(J=a.racc_debug_out)&&J!==t?"instance-variable":t)||(a.racc_debug_out=A.stderr),a.racc_debug_out=f(I=a.racc_debug_out)?I:A.stderr),w=D(a.$class(),"Racc_arg"),f(Q(w.$size(),14))&&(j(w,"[]=",e.to_a(k=[13,!0])),O(k.length,1)),w},v.$$arity=0),e.def($,"$_racc_init_sysvars",p=function(){var ee=this;return ee.racc_state=[0],ee.racc_tstack=[],ee.racc_vstack=[],ee.racc_t=t,ee.racc_val=t,ee.racc_read_next=!0,ee.racc_user_yyerror=!1,ee.racc_error_status=0},p.$$arity=0),e.def($,"$do_parse",y=function(){return this.$__send__(i(b,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},y.$$arity=0),e.def($,"$next_token",B=function(){return this.$raise(i(b,"NotImplementedError"),this.$class()+"#next_token is not defined")},B.$$arity=0),e.def($,"$_racc_do_parse_rb",V=function(ee,J){var a,w,k=this,X=t,te=t,$e=t,be=t,ae=t,ve=t,ge=t,me=t;return a=e.to_ary(ee),X=null==a[0]?t:a[0],te=null==a[1]?t:a[1],$e=null==a[2]?t:a[2],be=null==a[3]?t:a[3],ae=null==a[10]?t:a[10],k.$_racc_init_sysvars(),ve=ge=me=t,j(k,"catch",["racc_end_parse"],((w=function(){var Ce,qe,se=null==w.$$s?this:w.$$s,we=t,Le=t,Ie=t;for(null==se.racc_state&&(se.racc_state=t),null==se.racc_read_next&&(se.racc_read_next=t),null==se.racc_t&&(se.racc_t=t),null==se.yydebug&&(se.yydebug=t),null==se.racc_val&&(se.racc_val=t);f(!0);)for(f(me=be["$[]"](se.racc_state["$[]"](-1)))?(f(se.racc_read_next)&&f(se.racc_t["$!="](0))&&(qe=se.$next_token(),Ce=e.to_ary(qe),ve=null==Ce[0]?t:Ce[0],se.racc_val=null==Ce[1]?t:Ce[1],se.racc_t=f(ve)?f(we=ae["$[]"](ve))?we:1:0,f(se.yydebug)&&se.$racc_read_token(se.racc_t,ve,se.racc_val),se.racc_read_next=!1),me=T(me,se.racc_t),f(f(Le=f(Ie=r(me,0))?ge=X["$[]"](me):Ie)?te["$[]"](me)["$=="](se.racc_state["$[]"](-1)):Le)||(ge=$e["$[]"](se.racc_state["$[]"](-1)))):ge=$e["$[]"](se.racc_state["$[]"](-1));f(ge=se.$_racc_evalact(ge,ee)););}).$$s=k,w.$$arity=0,w))},V.$$arity=2),e.def($,"$yyparse",P=function(ee,J){return this.$__send__(i(b,"Racc_YY_Parse_Method"),ee,J,this.$_racc_setup(),!0)},P.$$arity=2),e.def($,"$_racc_yyparse_rb",d=function(ee,J,a,I){var w,X,$e=t,be=t,ne=t,ae=t,ge=t,me=t,pe=t;return w=e.to_ary(a),$e=null==w[0]?t:w[0],be=null==w[1]?t:w[1],ne=null==w[2]?t:w[2],ae=null==w[3]?t:w[3],ge=null==w[10]?t:w[10],this.$_racc_init_sysvars(),me=t,pe=t,j(this,"catch",["racc_end_parse"],((X=function(){var we,Te=null==X.$$s?this:X.$$s;for(null==Te.racc_state&&(Te.racc_state=t);!f(pe=ae["$[]"](Te.racc_state["$[]"](-1)));)for(;f(me=Te.$_racc_evalact(ne["$[]"](Te.racc_state["$[]"](-1)),a)););return j(ee,"__send__",[J],((we=function(Ie,Pe){var Fe,je,Re=null==we.$$s?this:we.$$s,Ne=t,Ge=t,He=t,We=t,ce=t,U=t,le=t;for(null==Re.racc_t&&(Re.racc_t=t),null==Re.racc_state&&(Re.racc_state=t),null==Re.racc_read_next&&(Re.racc_read_next=t),null==Ie&&(Ie=t),null==Pe&&(Pe=t),Re.racc_t=f(Ie)?f(Ne=ge["$[]"](Ie))?Ne:1:0,Re.racc_val=Pe,Re.racc_read_next=!1,pe=T(pe,Re.racc_t),f(f(Fe=f(je=r(pe,0))?me=$e["$[]"](pe):je)?be["$[]"](pe)["$=="](Re.racc_state["$[]"](-1)):Fe)||(me=ne["$[]"](Re.racc_state["$[]"](-1)));f(me=Re.$_racc_evalact(me,a)););for(;f(f(Ge=f(He=(pe=ae["$[]"](Re.racc_state["$[]"](-1)))["$!"]())?He:Re.racc_read_next["$!"]())?Ge:Re.racc_t["$=="](0));)for(f(f(We=f(ce=f(U=f(le=pe)?pe=T(pe,Re.racc_t):le)?r(pe,0):U)?me=$e["$[]"](pe):ce)?be["$[]"](pe)["$=="](Re.racc_state["$[]"](-1)):We)||(me=ne["$[]"](Re.racc_state["$[]"](-1)));f(me=Re.$_racc_evalact(me,a)););}).$$s=Te,we.$$arity=2,we))}).$$s=this,X.$$arity=0,X))},d.$$arity=4),e.def($,"$_racc_evalact",l=function(ee,J){var a,w,ne,ve,k=this,X=t,te=t,be=t,ae=t,ge=t,me=t,pe=t,se=t,Te=t,Ce=t;if(X=null==(a=e.to_ary(J))[0]?t:a[0],te=null==a[1]?t:a[1],be=null==a[3]?t:a[3],ne=null==a[11]?t:a[11],ae=null==a[12]?t:a[12],f(f(ve=m(ee,0))?Q(ee,ne):ve))f(m(k.racc_error_status,0))&&(k.racc_t["$=="](1)||(k.racc_error_status=O(k.racc_error_status,1))),k.racc_vstack.$push(k.racc_val),k.racc_state.$push(ee),k.racc_read_next=!0,f(k.yydebug)&&(k.racc_tstack.$push(k.racc_t),k.$racc_shift(k.racc_t,k.racc_tstack,k.racc_vstack));else if(f(f(ge=Q(ee,0))?m(ee,ae["$-@"]()):ge)){if(me=j(k,"catch",["racc_jump"],((w=function(){var we=null==w.$$s?this:w.$$s;return null==we.racc_state&&(we.racc_state=t),we.racc_state.$push(we.$_racc_do_reduce(J,ee)),!1}).$$s=k,w.$$arity=0,w)),f(me)){if(1["$==="](pe=me))return k.racc_user_yyerror=!0,ae["$-@"]();if(2["$==="](pe))return ne;k.$raise("[Racc Bug] unknown jump code")}}else if(ee["$=="](ne))f(k.yydebug)&&k.$racc_accept(),k.$throw("racc_end_parse",k.racc_vstack["$[]"](0));else{if(ee["$=="](ae["$-@"]())){for((0)["$==="](pe=k.racc_error_status)?f(J["$[]"](21))||k.$on_error(k.racc_t,k.racc_val,k.racc_vstack):3["$==="](pe)&&(k.racc_t["$=="](0)&&k.$throw("racc_end_parse",t),k.racc_read_next=!0),k.racc_user_yyerror=!1,k.racc_error_status=3;f(!0)&&(!f(se=be["$[]"](k.racc_state["$[]"](-1)))||(se=T(se,1),!f(f(Te=f(Ce=r(se,0))?ee=X["$[]"](se):Ce)?te["$[]"](se)["$=="](k.racc_state["$[]"](-1)):Te)));)f(s(k.racc_state.$size(),1))&&k.$throw("racc_end_parse",t),k.racc_state.$pop(),k.racc_vstack.$pop(),f(k.yydebug)&&(k.racc_tstack.$pop(),k.$racc_e_pop(k.racc_state,k.racc_tstack,k.racc_vstack));return ee}k.$raise("[Racc Bug] unknown action "+ee.$inspect())}return f(k.yydebug)&&k.$racc_next_state(k.racc_state["$[]"](-1),k.racc_state),t},l.$$arity=2),e.def($,"$_racc_do_reduce",g=function(ee,J){var a,ne,ve,Ce,qe,we,Re,w=this,X=t,te=t,$e=t,be=t,ae=t,ge=t,me=t,pe=t,se=t,Te=t,Le=t,Ie=t,Pe=t,Me=t,Ue=t,Ne=t;return X=null==(a=e.to_ary(ee))[4]?t:a[4],te=null==a[5]?t:a[5],$e=null==a[6]?t:a[6],be=null==a[7]?t:a[7],ne=null==a[8]?t:a[8],ae=null==a[9]?t:a[9],ve=null==a[13]?t:a[13],ge=w.racc_state,me=w.racc_vstack,pe=w.racc_tstack,se=function(G,x){return"number"==typeof G?-3*G:G["$*"](-3)}(J),Te=ae["$[]"](se),Ce=ae["$[]"](T(se,1)),qe=ae["$[]"](T(se,2)),we=[],f(w.yydebug)&&(Le=pe["$[]"](Te["$-@"](),Te)),Ie=me["$[]"](Te["$-@"](),Te),f(w.yydebug)&&(Pe=[Te["$-@"](),Te,we],j(pe,"[]=",e.to_a(Pe)),O(Pe.length,1)),Pe=[Te["$-@"](),Te,we],j(me,"[]=",e.to_a(Pe)),O(Pe.length,1),Pe=[Te["$-@"](),Te,we],j(ge,"[]=",e.to_a(Pe)),O(Pe.length,1),f(ve)?me.$push(w.$__send__(qe,Ie,me,Ie["$[]"](0))):me.$push(w.$__send__(qe,Ie,me)),pe.$push(Ce),f(w.yydebug)&&w.$racc_reduce(Le,Ce,pe,me),Re=O(Ce,ne),f(se=be["$[]"](Re))&&(se=T(se,ge["$[]"](-1)),f(f(Me=f(Ue=r(se,0))?Ne=X["$[]"](se):Ue)?te["$[]"](se)["$=="](Re):Me))?Ne:$e["$[]"](Re)},g.$$arity=2),e.def($,"$on_error",R=function(ee,J,a){var w,I=this;return I.$raise(i(b,"ParseError"),I.$sprintf("\nparse error on value %s (%s)",J.$inspect(),f(w=I.$token_to_str(ee))?w:"?"))},R.$$arity=3),e.def($,"$yyerror",N=function(){return this.$throw("racc_jump",1)},N.$$arity=0),e.def($,"$yyaccept",u=function(){return this.$throw("racc_jump",2)},u.$$arity=0),e.def($,"$yyerrok",S=function(){return this.racc_error_status=0},S.$$arity=0),e.def($,"$racc_read_token",Z=function(ee,J,a){var I=this;return I.racc_debug_out.$print("read    "),I.racc_debug_out.$print(J.$inspect(),"(",I.$racc_token2str(ee),") "),I.racc_debug_out.$puts(a.$inspect()),I.racc_debug_out.$puts()},Z.$$arity=3),e.def($,"$racc_shift",re=function(ee,J,a){var I=this;return I.racc_debug_out.$puts("shift   "+I.$racc_token2str(ee)),I.$racc_print_stacks(J,a),I.racc_debug_out.$puts()},re.$$arity=3),e.def($,"$racc_reduce",W=function(ee,J,a,I){var w,k=this,X=t;return(X=k.racc_debug_out).$print("reduce "),f(ee["$empty?"]())?X.$print(" <none>"):j(ee,"each",[],((w=function($e){return null==$e&&($e=t),X.$print(" ",(null==w.$$s?this:w.$$s).$racc_token2str($e))}).$$s=k,w.$$arity=1,w)),X.$puts(" --\x3e "+k.$racc_token2str(J)),k.$racc_print_stacks(a,I),k.racc_debug_out.$puts()},W.$$arity=4),e.def($,"$racc_accept",ie=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},ie.$$arity=0),e.def($,"$racc_e_pop",ue=function(ee,J,a){var I=this;return I.racc_debug_out.$puts("error recovering mode: pop token"),I.$racc_print_states(ee),I.$racc_print_stacks(J,a),I.racc_debug_out.$puts()},ue.$$arity=3),e.def($,"$racc_next_state",fe=function(ee,J){var a=this;return a.racc_debug_out.$puts("goto    "+ee),a.$racc_print_states(J),a.racc_debug_out.$puts()},fe.$$arity=2),e.def($,"$racc_print_stacks",Se=function(ee,J){var a,w=t;return(w=this.racc_debug_out).$print("        ["),j(ee,"each_index",[],((a=function(X){return null==X&&(X=t),w.$print(" (",(null==a.$$s?this:a.$$s).$racc_token2str(ee["$[]"](X))," ",J["$[]"](X).$inspect(),")")}).$$s=this,a.$$arity=1,a)),w.$puts(" ]")},Se.$$arity=2),e.def($,"$racc_print_states",xe=function(ee){var J,I=t;return(I=this.racc_debug_out).$print("        ["),j(ee,"each",[],((J=function(k){return null==k&&(k=t),I.$print(" ",k)}).$$s=this,J.$$arity=1,J)),I.$puts(" ]")},xe.$$arity=1),e.def($,"$racc_token2str",Be=function(ee){var a;return f(a=D(this.$class(),"Racc_token_to_s_table")["$[]"](ee))?a:this.$raise("[Racc Bug] can't convert token "+ee+" to string")},Be.$$arity=1),e.def($,"$token_to_str",Ee=function(ee){return D(this.$class(),"Racc_token_to_s_table")["$[]"](ee)},Ee.$$arity=1)}(E[0],E)},Opal.modules["bcdice/arithmetic/node"]=function(e){function Q(E,t){return"number"==typeof E&&"number"==typeof t?E/t:E["$/"](t)}var t,Y,G,q,z,o,$,b,h,v,p,y,n,c,K,A,i,T=[],r=e.nil,m=e.$$$,s=e.$$,F=e.module,_=e.klass,L=e.send2;return t=T,Y=i=[F(T[0],"BCDice")].concat(t),G=A=[F(i[0],"Arithmetic")].concat(Y),function(q,z,o){var $,b,h,v,p,n=_(q,null,"BinaryOp");[n].concat(o),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",$=function(B,V,P){var d=this;return d.lhs=B,d.op=V,d.rhs=P},$.$$arity=3),e.def(n,"$eval",b=function(B){var d,V=this,P=r;return P=V.lhs.$eval(B),d=V.rhs.$eval(B),P.$send(V.op,d)},b.$$arity=1),e.def(n,"$output",h=function(){var B=this;return""+B.lhs.$output()+B.op+B.rhs.$output()},h.$$arity=0),e.def(n,"$s_exp",v=function(){var B=this;return"("+B.$op_for_s_exp()+" "+B.lhs.$s_exp()+" "+B.rhs.$s_exp()+")"},v.$$arity=0),e.def(n,"$op_for_s_exp",p=function(){return this.op},p.$$arity=0)}((K=[F(A[0],"Node")].concat(G))[0],0,K),q=K[0],z=s(K,"BinaryOp"),o=K,n=_(q,z,"DivideBase"),c=[n].concat(o),n.$$prototype.lhs=n.$$prototype.rhs=n.$$prototype.op=r,e.def(n,"$initialize",$=function(V,P){return $.$$p&&($.$$p=null),L(this,e.find_super_dispatcher(this,"initialize",$,!1,!0),"initialize",[V,"/",P],null)},$.$$arity=2),e.def(n,"$eval",b=function(V){var d,P=this,l=r;return d=P.lhs.$eval(V),(l=P.rhs.$eval(V))["$=="](0)&&P.$raise(s(c,"ZeroDivisionError")),P.$divide_and_round(d,l,V)},b.$$arity=1),e.def(n,"$output",h=function(){var V=h.$$p,d=this,l=r,g=r,R=r;for(V&&(h.$$p=null),g=0,R=arguments.length,l=new Array(R);g<R;g++)l[g]=arguments[g];return""+L(d,e.find_super_dispatcher(d,"output",h,!1,!0),"output",l,V)+d.$rounding_method()},h.$$arity=0),n.$private(),e.def(n,"$rounding_method",v=function(){return m(this.$class(),"ROUNDING_METHOD")},v.$$arity=0),e.def(n,"$op_for_s_exp",p=function(){return""+this.op+this.$rounding_method()},p.$$arity=0),e.def(n,"$divide_and_round",y=function(V,P,d){return this.$raise(s(c,"NotImplementedError"))},y.$$arity=3),function(q,z,o){var $,n=_(q,z,"DivideWithGameSystemDefault"),c=[n].concat(o);e.const_set(c[0],"ROUNDING_METHOD",""),n.$private(),e.def(n,"$divide_and_round",$=function(h,v,p){var B;return B=p,m(s(c,"RoundType"),"CEIL")["$==="](B)?Q(h.$to_f(),v).$ceil():m(s(c,"RoundType"),"ROUND")["$==="](B)?Q(h.$to_f(),v).$round():Q(h,v).$to_i()},$.$$arity=3)}(K[0],s(K,"DivideBase"),K),function(q,z,o){var $,n=_(q,z,"DivideWithCeil"),c=[n].concat(o);e.const_set(c[0],"ROUNDING_METHOD","C"),n.$private(),e.def(n,"$divide_and_round",$=function(h,v,p){return Q(h.$to_f(),v).$ceil()},$.$$arity=3)}(K[0],s(K,"DivideBase"),K),function(q,z,o){var $,n=_(q,z,"DivideWithRound"),c=[n].concat(o);e.const_set(c[0],"ROUNDING_METHOD","R"),n.$private(),e.def(n,"$divide_and_round",$=function(h,v,p){return Q(h.$to_f(),v).$round()},$.$$arity=3)}(K[0],s(K,"DivideBase"),K),function(q,z,o){var $,n=_(q,z,"DivideWithFloor"),c=[n].concat(o);e.const_set(c[0],"ROUNDING_METHOD","F"),n.$private(),e.def(n,"$divide_and_round",$=function(h,v,p){return Q(h,v).$to_i()},$.$$arity=3)}(K[0],s(K,"DivideBase"),K),function(q,z,o){var $,b,h,v,n=_(q,null,"Negative");[n].concat(o),n.$$prototype.body=r,e.def(n,"$initialize",$=function(y){return this.body=y},$.$$arity=1),e.def(n,"$eval",b=function(y){return this.body.$eval(y)["$-@"]()},b.$$arity=1),e.def(n,"$output",h=function(){return"-"+this.body.$output()},h.$$arity=0),e.def(n,"$s_exp",v=function(){return"(- "+this.body.$s_exp()+")"},v.$$arity=0)}(K[0],0,K),function(q,z,o){var $,b,h,v,n=_(q,null,"Parenthesis");[n].concat(o),n.$$prototype.expr=r,e.def(n,"$initialize",$=function(y){return this.expr=y},$.$$arity=1),e.def(n,"$eval",b=function(y){return this.expr.$eval(y)},b.$$arity=1),e.def(n,"$output",h=function(){return"("+this.expr.$output()+")"},h.$$arity=0),e.def(n,"$s_exp",v=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},v.$$arity=0)}(K[0],0,K),void function(q,z,o){var $,b,h,n=_(q,null,"Number");[n].concat(o),n.$$prototype.value=r,e.def(n,"$initialize",$=function(p){return this.value=p},$.$$arity=1),e.def(n,"$eval",b=function(p){return this.value},b.$$arity=1),e.def(n,"$output",h=function(){return this.value.$to_s()},h.$$arity=0),e.alias(n,"s_exp","output")}(K[0],0,K)},Opal.modules.strscan=function(e){var D,Y,f,A,j,G,x,K,q,z,o,n,c,$,b,h,v,p,y,B,V,P,d,l,g,R,i,C,T=[],r=e.nil,s=e.$$,_=e.truthy,L=e.send;return D=T,i=(0,e.klass)(T[0],null,"StringScanner"),C=[i].concat(D),i.$$prototype.pos=i.$$prototype.string=i.$$prototype.working=i.$$prototype.matched=i.$$prototype.prev_pos=i.$$prototype.match=r,i.$attr_reader("pos"),i.$attr_reader("matched"),e.def(i,"$initialize",Y=function(u){var S=this;return S.string=u,S.pos=0,S.matched=r,S.working=u,S.match=[]},Y.$$arity=1),i.$attr_reader("string"),e.def(i,"$beginning_of_line?",f=function(){var u=this;return 0===u.pos||"\n"===u.string.charAt(u.pos-1)},f.$$arity=0),e.alias(i,"bol?","beginning_of_line?"),e.def(i,"$scan",A=function(u){var S=this,Z=(u=S.$anchor(u)).exec(S.working);return null==Z?S.matched=r:"object"==typeof Z?(S.prev_pos=S.pos,S.pos+=Z[0].length,S.working=S.working.substring(Z[0].length),S.matched=Z[0],S.match=Z,Z[0]):"string"==typeof Z?(S.pos+=Z.length,S.working=S.working.substring(Z.length),Z):r},A.$$arity=1),e.def(i,"$scan_until",j=function(u){var S=this;u=S.$anchor(u);for(var W,Z=S.pos,re=S.working;;){if(W=u.exec(re),Z+=1,re=re.substr(1),null!=W)return S.matched=S.string.substr(S.pos,Z-S.pos-1+W[0].length),S.match=W,S.prev_pos=Z-1,S.pos=Z,S.working=re.substr(W[0].length),S.matched;if(0===re.length)return S.match=[],S.matched=r}},j.$$arity=1),e.def(i,"$[]",G=function(u){var Z;if(_(this.match["$empty?"]()))return r;Z=u,s(C,"Symbol")["$==="](Z)?u=u.$to_s():s(C,"String")["$==="](Z)||(u=s(C,"Opal")["$coerce_to!"](u,s(C,"Integer"),"to_int"));var re=this.match;return u<0&&(u+=re.length),u<0||u>=re.length||null==re[u]?r:re[u]},G.$$arity=1),e.def(i,"$check",x=function(u){var S=this,Z=(u=S.$anchor(u)).exec(S.working);return S.matched=null==Z?r:Z[0]},x.$$arity=1),e.def(i,"$check_until",K=function(u){var S=this,Z=S.prev_pos,re=S.pos,W=S.$scan_until(u);return W!==r&&(S.matched=W.substr(-1),S.working=S.string.substr(re)),S.prev_pos=Z,S.pos=re,W},K.$$arity=1),e.def(i,"$peek",q=function(u){return this.working.substring(0,u)},q.$$arity=1),e.def(i,"$eos?",z=function(){return 0===this.working.length},z.$$arity=0),e.def(i,"$exist?",o=function(u){var Z=u.exec(this.working);return null==Z?r:0==Z.index?0:Z.index+1},o.$$arity=1),e.def(i,"$skip",n=function(u){var S=this,Z=(u=S.$anchor(u)).exec(S.working);if(null==Z)return S.match=[],S.matched=r;var re=Z[0],W=re.length;return S.matched=re,S.match=Z,S.prev_pos=S.pos,S.pos+=W,S.working=S.working.substring(W),W},n.$$arity=1),e.def(i,"$skip_until",c=function(u){var Z=this.$scan_until(u);return Z===r?r:(this.matched=Z.substr(-1),Z.length)},c.$$arity=1),e.def(i,"$get_byte",$=function(){var u=this,S=r;return u.pos<u.string.length?(u.prev_pos=u.pos,u.pos+=1,S=u.matched=u.working.substring(0,1),u.working=u.working.substring(1)):u.matched=r,S},$.$$arity=0),e.alias(i,"getch","get_byte"),e.def(i,"$match?",b=function(u){var S=this,Z=(u=S.$anchor(u)).exec(S.working);return null==Z?r:(S.prev_pos=S.pos,Z[0].length)},b.$$arity=1),e.def(i,"$pos=",h=function(u){var S=this;return u<0&&(u+=S.string.$length()),S.pos=u,S.working=S.string.slice(u)},h.$$arity=1),e.def(i,"$matched_size",v=function(){return this.matched===r?r:this.matched.length},v.$$arity=0),e.def(i,"$post_match",p=function(){var u=this;return u.matched===r?r:u.string.substr(u.pos)},p.$$arity=0),e.def(i,"$pre_match",y=function(){var u=this;return u.matched===r?r:u.string.substr(0,u.prev_pos)},y.$$arity=0),e.def(i,"$reset",B=function(){var u=this;return u.working=u.string,u.matched=r,u.pos=0},B.$$arity=0),e.def(i,"$rest",V=function(){return this.working},V.$$arity=0),e.def(i,"$rest?",P=function(){return 0!==this.working.length},P.$$arity=0),e.def(i,"$rest_size",d=function(){return this.$rest().$size()},d.$$arity=0),e.def(i,"$terminate",l=function(){var S,E,u=this;return u.match=r,S=[u.string.$length()],L(u,"pos=",e.to_a(S)),S[(E=S.length,"number"==typeof E?E-1:E["$-"](1))]},l.$$arity=0),e.def(i,"$unscan",g=function(){var u=this;return u.pos=u.prev_pos,u.prev_pos=r,u.match=r,u},g.$$arity=0),i.$private(),e.def(i,"$anchor",R=function(u){var Z=u.toString().match(/\/([^\/]+)$/);return Z=Z?Z[1]:void 0,new RegExp("^(?:"+u.source+")",Z)},R.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var D,Y,f,i,_,E,O=[],T=e.nil,s=e.module;return _=O,D=E=[s(O[0],"BCDice")].concat(_),[i=s(E[0],"Normalize")].concat(D),i.$module_function(),e.def(i,"$comparison_operator",Y=function(j){var x;return/<=|=</["$==="](x=j)?"<=":/>=|=>/["$==="](x)?">=":/<>|!=|=!/["$==="](x)?"!=":/</["$==="](x)?"<":/>/["$==="](x)?">":/=/["$==="](x)?"==":T},Y.$$arity=1),void e.def(i,"$target_number",f=function(j){return j["$=="]("?")?j:j.$to_i()},f.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var D,f,K,o,n,c,q,z,j,C,Q=e.top,O=[],T=e.nil,m=e.$$,s=e.module,F=e.klass,_=e.hash2,L=e.truthy,E=e.send;return Q.$require("strscan"),Q.$require("bcdice/normalize"),D=O,f=C=[s(O[0],"BCDice")].concat(D),K=j=[s(C[0],"Command")].concat(f),q=F(j[0],null,"Lexer"),z=[q].concat(K),q.$$prototype.scanner=q.$$prototype.notations=T,e.const_set(z[0],"SYMBOLS",_(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(q,"$initialize",o=function(b,h){var v,p,y,V,B=this;return b=L(V=(p=(v=b)===T||null==v?T:E(v,"split",[" ",2]))===T||null==p?T:E(p,"first",[]))?V:"",B.scanner=m(z,"StringScanner").$new(b),B.notations=E(h,"map",[],((y=function(P){function d(l){return P.apply(this,arguments)}return d.toString=function(){return P.toString()},d}(function(P){return null==P&&(P=T),L(P["$is_a?"](m(z,"String")))?m(z,"Regexp").$new(P):P})).$$s=B,y.$$arity=1,y))},o.$$arity=2),e.def(q,"$next_token",n=function(){try{var b,h=this,v=T,p=T,B=T,V=T;return L(h.scanner["$eos?"]())?[!1,"$"]:(E(h.notations,"each",[],((b=function(d){var g,l=null==b.$$s?this:b.$$s;if(null==l.scanner&&(l.scanner=T),null==d&&(d=T),g=l.scanner.$scan(d),!L(g))return T;e.ret(["NOTATION",g])}).$$s=h,b.$$arity=1,b)),L(v=h.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:L(p=h.scanner.$scan(/[<>!=]+/))?(p=m(z,"Normalize").$comparison_operator(p),[L(p)?"CMP_OP":"ILLEGAL",p]):(B=h.scanner.$getch().$upcase(),[L(V=m(z,"SYMBOLS")["$[]"](B))?V:B.$to_sym(),B]))}catch(P){if(P===e.returner)return P.$v;throw P}},n.$$arity=0),void e.def(q,"$source",c=function(){return this.scanner.$string()},c.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var E,C,G,q,z,o,x,K,f,D,O=[],T=e.nil,m=e.$$,s=e.module,F=e.klass,_=e.truthy;return E=O,C=D=[s(O[0],"BCDice")].concat(E),G=f=[s(D[0],"Command")].concat(C),x=F(f[0],null,"Parsed"),K=[x].concat(G),x.$$prototype.question_target=x.$$prototype.critical=x.$$prototype.fumble=x.$$prototype.dollar=x.$$prototype.modify_number=x.$$prototype.target_number=x.$$prototype.prefix_number=x.$$prototype.command=x.$$prototype.suffix_number=x.$$prototype.cmp_op=T,x.$attr_accessor("command"),x.$attr_accessor("prefix_number"),x.$attr_accessor("suffix_number"),x.$attr_accessor("critical"),x.$attr_accessor("fumble"),x.$attr_accessor("dollar"),x.$attr_accessor("modify_number"),x.$attr_accessor("cmp_op"),x.$attr_accessor("target_number"),x.$attr_writer("question_target"),e.def(x,"$initialize",q=function(){var c=this;return c.prefix_number=T,c.suffix_number=T,c.critical=T,c.fumble=T,c.dollar=T,c.cmp_op=T,c.target_number=T,c.question_target=!1},q.$$arity=0),e.def(x,"$question_target?",z=function(){return this.question_target},z.$$arity=0),void e.def(x,"$to_s",o=function(c){var B,$=this,b=T,h=T,v=T,p=T,y=T;return null==c&&(c="after_command"),b=_($.critical)?"@"+$.critical:T,h=_($.fumble)?"#"+$.fumble:T,v=_($.dollar)?"$"+$.dollar:T,p=m(K,"Format").$modifier($.modify_number),y=_($.question_target)?"?":$.target_number,"after_command"["$==="](B=c)?[$.prefix_number,$.command,$.suffix_number,b,h,v,p,$.cmp_op,y].$join():"after_modify_number"["$==="](B)?[$.prefix_number,$.command,$.suffix_number,p,b,h,v,$.cmp_op,y].$join():"after_target_number"["$==="](B)?[$.prefix_number,$.command,$.suffix_number,p,$.cmp_op,y,b,h,v].$join():T},o.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function Q(C,Y){return"number"==typeof C&&"number"==typeof Y?C-Y:C["$-"](Y)}var Y,G,q,z,o,$,b,h,v,p,y,B,V,P,d,l,g,R,N,u,S,Z,re,W,ie,ue,fe,Se,xe,Be,Ee,ye,ee,J,a,I,w,k,X,te,$e,be,ne,ae,ve,ge,me,pe,se,Te,Ce,qe,we,Le,Ie,Pe,Re,Me,Ue,Ne,Ge,n,c,K,A,O=e.top,T=[],r=e.nil,m=e.$$$,s=e.$$,F=e.klass,_=e.module,L=e.hash2,E=e.send2,t=e.send,D=e.hash,i=e.truthy;return O.$require("racc/parser.rb"),O.$require("bcdice/arithmetic/node"),O.$require("bcdice/command/lexer"),O.$require("bcdice/command/parsed"),function(C,Y,f){[F(C,Y,"Parser")].concat(f)}(m(s(T,"BCDice"),"Command"),m(s(T,"Racc"),"Parser"),T),Y=T,G=A=[_(T[0],"BCDice")].concat(Y),q=(K=[_(A[0],"Command")].concat(G))[0],z=m(s(K,"Racc"),"Parser"),o=K,n=F(q,z,"Parser"),c=[n].concat(o),n.$$prototype.notations=n.$$prototype.lexer=n.$$prototype.modifier=n.$$prototype.prefix_number=n.$$prototype.suffix_number=n.$$prototype.need_suffix_number=n.$$prototype.need_prefix_number=n.$$prototype.critical=n.$$prototype.fumble=n.$$prototype.dollar=n.$$prototype.allowed_cmp_op=n.$$prototype.question_target=r,e.def(n,"$initialize",$=function(U,le){var H,M,_e,De,ke=$.$$p,de=this;if(ke&&($.$$p=null),H=e.slice.call(arguments,0,arguments.length),null==(M=e.extract_kwargs(H)))M=L([],{});else if(!M.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(_e=H,!e.hasOwnProperty.call(M.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return De=M.$$smap.round_type,E(de,e.find_super_dispatcher(de,"initialize",$,!1,!0),"initialize",[],null),de.notations=_e,de.round_type=De,de.prefix_number=!1,de.suffix_number=!1,de.need_prefix_number=!1,de.need_suffix_number=!1,de.modifier=!0,de.critical=!1,de.fumble=!1,de.dollar=!1,de.allowed_cmp_op=[r,">=",">","<=","<","==","!="],de.question_target=!1},$.$$arity=-2),e.def(n,"$disable_modifier",b=function(){return this.modifier=!1,this},b.$$arity=0),e.def(n,"$enable_prefix_number",h=function(){return this.prefix_number=!0,this},h.$$arity=0),e.def(n,"$enable_suffix_number",v=function(){return this.suffix_number=!0,this},v.$$arity=0),e.def(n,"$has_prefix_number",p=function(){var U=this;return U.prefix_number=!0,U.need_prefix_number=!0,U},p.$$arity=0),e.def(n,"$has_suffix_number",y=function(){var U=this;return U.suffix_number=!0,U.need_suffix_number=!0,U},y.$$arity=0),e.def(n,"$enable_critical",B=function(){return this.critical=!0,this},B.$$arity=0),e.def(n,"$enable_fumble",V=function(){return this.fumble=!0,this},V.$$arity=0),e.def(n,"$enable_dollar",P=function(){return this.dollar=!0,this},P.$$arity=0),e.def(n,"$restrict_cmp_op_to",d=function(U){var le,M=this;return le=e.slice.call(arguments,0,arguments.length),M.allowed_cmp_op=le,M},d.$$arity=-1),e.def(n,"$enable_question_target",l=function(){return this.question_target=!0,this},l.$$arity=0),e.def(n,"$parse",g=function(U){try{return this.lexer=s(c,"Lexer").$new(U,this.notations),this.$do_parse()}catch(H){if(!e.rescue(H,[s(c,"ParseError"),s(c,"ZeroDivisionError")]))throw H;try{return r}finally{e.pop_exception()}}},g.$$arity=1),n.$private(),e.def(n,"$parsed",R=function(U,le,H,M){var _e;return t(s(c,"Parsed").$new(),"tap",[],((_e=function(he){var Ae,ze,Ye,Qe,Ke,Ve,de=null==_e.$$s?this:_e.$$s,oe=r;return null==de.round_type&&(de.round_type=r),null==he&&(he=r),oe=[U["$[]"]("command")],t(he,"command=",e.to_a(oe)),Q(oe.length,1),oe=[(Ae=U["$[]"]("prefix"),Ae===r||null==Ae?r:t(Ae,"eval",[de.round_type]))],t(he,"prefix_number=",e.to_a(oe)),Q(oe.length,1),oe=[(ze=U["$[]"]("suffix"),ze===r||null==ze?r:t(ze,"eval",[de.round_type]))],t(he,"suffix_number=",e.to_a(oe)),Q(oe.length,1),oe=[(Ye=le["$[]"]("critical"),Ye===r||null==Ye?r:t(Ye,"eval",[de.round_type]))],t(he,"critical=",e.to_a(oe)),Q(oe.length,1),oe=[(Qe=le["$[]"]("fumble"),Qe===r||null==Qe?r:t(Qe,"eval",[de.round_type]))],t(he,"fumble=",e.to_a(oe)),Q(oe.length,1),oe=[(Ke=le["$[]"]("dollar"),Ke===r||null==Ke?r:t(Ke,"eval",[de.round_type]))],t(he,"dollar=",e.to_a(oe)),Q(oe.length,1),oe=[H.$eval(de.round_type)],t(he,"modify_number=",e.to_a(oe)),Q(oe.length,1),oe=[M["$[]"]("cmp_op")],t(he,"cmp_op=",e.to_a(oe)),Q(oe.length,1),M["$[]"]("target")["$=="]("?")?(t(he,"question_target=",e.to_a(oe=[!0])),Q(oe.length,1),t(he,"target_number=",e.to_a(oe=[0])),oe[Q(oe.length,1)]):(t(he,"question_target=",e.to_a(oe=[!1])),Q(oe.length,1),oe=[(Ve=M["$[]"]("target"),Ve===r||null==Ve?r:t(Ve,"eval",[de.round_type]))],t(he,"target_number=",e.to_a(oe)),oe[Q(oe.length,1)])}).$$s=this,_e.$$arity=1,_e))},R.$$arity=4),e.def(n,"$next_token",N=function(){return this.lexer.$next_token()},N.$$arity=0),qe=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],we=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],Le=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],Ie=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],Pe=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],Re=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],Me=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Ue=[r,r,r,r,r,r,19,16,15,r,r],Ne=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ge=D(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(c[0],"Racc_arg",[qe,we,Ie,Le,Pe,Re,Ue,Me,19,Ne,Ge,58,35,!0]),e.const_set(c[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(c[0],"Racc_debug_parser",!1),e.def(n,"$_reduce_1",u=function(U,le,H){var M;return i(this.modifier)||this.$raise(s(c,"ParseError")),M=e.to_ary(U),this.$parsed(null==M[0]?r:M[0],null==M[1]?r:M[1],null==M[2]?r:M[2],null==M[3]?r:M[3])},u.$$arity=3),e.def(n,"$_reduce_2",S=function(U,le,H){var M;return i(this.modifier)||this.$raise(s(c,"ParseError")),M=e.to_ary(U),this.$parsed(null==M[0]?r:M[0],null==M[2]?r:M[2],null==M[1]?r:M[1],null==M[3]?r:M[3])},S.$$arity=3),e.def(n,"$_reduce_3",Z=function(U,le,H){var M,de;return de=null==(M=e.to_ary(U))[2]?r:M[2],this.$parsed(null==M[0]?r:M[0],null==M[1]?r:M[1],m(m(s(c,"Arithmetic"),"Node"),"Number").$new(0),de)},Z.$$arity=3),e.def(n,"$_reduce_4",re=function(U,le,H){var _e,M=this;return i(i(_e=M.prefix_number)?M.suffix_number:_e)||M.$raise(s(c,"ParseError")),L(["command","prefix","suffix"],{command:U["$[]"](1),prefix:U["$[]"](0),suffix:U["$[]"](2)})},re.$$arity=3),e.def(n,"$_reduce_5",W=function(U,le,H){var M=this;return i(M.prefix_number)||M.$raise(s(c,"ParseError")),i(M.need_suffix_number)&&M.$raise(s(c,"ParseError")),L(["command","prefix"],{command:U["$[]"](1),prefix:U["$[]"](0)})},W.$$arity=3),e.def(n,"$_reduce_6",ie=function(U,le,H){var M=this;return i(M.suffix_number)||M.$raise(s(c,"ParseError")),i(M.need_prefix_number)&&M.$raise(s(c,"ParseError")),L(["command","suffix"],{command:U["$[]"](0),suffix:U["$[]"](1)})},ie.$$arity=3),e.def(n,"$_reduce_7",ue=function(U,le,H){var _e,M=this;return i(i(_e=M.need_prefix_number)?_e:M.need_suffix_number)&&M.$raise(s(c,"ParseError")),L(["command"],{command:U["$[]"](0)})},ue.$$arity=3),e.def(n,"$_reduce_8",fe=function(U,le,H){return L([],{})},fe.$$arity=3),e.def(n,"$_reduce_9",Se=function(U,le,H){var M,de,ze,Ae,ke=r;return ke=null==(M=e.to_ary(U))[0]?r:M[0],de=null==M[2]?r:M[2],i(i(Ae=this.critical)?ke["$[]"]("critical")["$nil?"]():Ae)||this.$raise(s(c,"ParseError")),t(ke,"[]=",e.to_a(ze=["critical",de])),Q(ze.length,1),ke},Se.$$arity=3),e.def(n,"$_reduce_10",xe=function(U,le,H){var M,de,ze,Ae,ke=r;return ke=null==(M=e.to_ary(U))[0]?r:M[0],de=null==M[2]?r:M[2],i(i(Ae=this.fumble)?ke["$[]"]("fumble")["$nil?"]():Ae)||this.$raise(s(c,"ParseError")),t(ke,"[]=",e.to_a(ze=["fumble",de])),Q(ze.length,1),ke},xe.$$arity=3),e.def(n,"$_reduce_11",Be=function(U,le,H){var M,de,ze,Ae,ke=r;return ke=null==(M=e.to_ary(U))[0]?r:M[0],de=null==M[2]?r:M[2],i(i(Ae=this.dollar)?ke["$[]"]("dollar")["$nil?"]():Ae)||this.$raise(s(c,"ParseError")),t(ke,"[]=",e.to_a(ze=["dollar",de])),Q(ze.length,1),ke},Be.$$arity=3),e.def(n,"$_reduce_12",Ee=function(U,le,H){return U["$[]"](1)},Ee.$$arity=3),e.def(n,"$_reduce_13",ye=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"Negative").$new(U["$[]"](1))},ye.$$arity=3),e.def(n,"$_reduce_14",ee=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"BinaryOp").$new(U["$[]"](0),"+",U["$[]"](2))},ee.$$arity=3),e.def(n,"$_reduce_15",J=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"BinaryOp").$new(U["$[]"](0),"-",U["$[]"](2))},J.$$arity=3),e.def(n,"$_reduce_16",a=function(U,le,H){return i(this.allowed_cmp_op["$include?"](r))||this.$raise(s(c,"ParseError")),L([],{})},a.$$arity=3),e.def(n,"$_reduce_17",I=function(U,le,H){var M,ke,he;return he=null==(M=e.to_ary(U))[1]?r:M[1],i(this.allowed_cmp_op["$include?"](ke=null==M[0]?r:M[0]))||this.$raise(s(c,"ParseError")),L(["cmp_op","target"],{cmp_op:ke,target:he})},I.$$arity=3),e.def(n,"$_reduce_18",w=function(U,le,H){var _e,M=this;return _e=U["$[]"](0),i(M.question_target)||M.$raise(s(c,"ParseError")),i(M.allowed_cmp_op["$include?"](_e))||M.$raise(s(c,"ParseError")),L(["cmp_op","target"],{cmp_op:_e,target:"?"})},w.$$arity=3),e.def(n,"$_reduce_19",k=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"BinaryOp").$new(U["$[]"](0),"+",U["$[]"](2))},k.$$arity=3),e.def(n,"$_reduce_20",X=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"BinaryOp").$new(U["$[]"](0),"-",U["$[]"](2))},X.$$arity=3),e.def(n,"$_reduce_22",te=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"BinaryOp").$new(U["$[]"](0),"*",U["$[]"](2))},te.$$arity=3),e.def(n,"$_reduce_23",$e=function(U,le,H){return U["$[]"](3).$new(U["$[]"](0),U["$[]"](2))},$e.$$arity=3),e.def(n,"$_reduce_25",be=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},be.$$arity=3),e.def(n,"$_reduce_26",ne=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"DivideWithCeil")},ne.$$arity=3),e.def(n,"$_reduce_27",ae=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"DivideWithCeil")},ae.$$arity=3),e.def(n,"$_reduce_28",ve=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"DivideWithRound")},ve.$$arity=3),e.def(n,"$_reduce_29",ge=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"DivideWithFloor")},ge.$$arity=3),e.def(n,"$_reduce_30",me=function(U,le,H){return U["$[]"](1)},me.$$arity=3),e.def(n,"$_reduce_31",pe=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"Negative").$new(U["$[]"](1))},pe.$$arity=3),e.def(n,"$_reduce_33",se=function(U,le,H){return U["$[]"](1)},se.$$arity=3),e.def(n,"$_reduce_34",Te=function(U,le,H){return m(m(s(c,"Arithmetic"),"Node"),"Number").$new(U["$[]"](0))},Te.$$arity=3),void e.def(n,"$_reduce_none",Ce=function(U,le,H){return U["$[]"](0)},Ce.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var E,C,j,K,q,z,o,n,c,G,x,f,D,O=[],T=e.nil,m=e.$$,s=e.module,F=e.send,_=e.truthy;return E=O,C=D=[s(O[0],"BCDice")].concat(E),j=f=[s(D[0],"Deprecated")].concat(C),G=s(f[0],"Checker"),x=[G].concat(j),G.$private(),e.def(G,"$check_result_legacy",K=function(b,h,v,p){var P,g,y=this,B=T,V=T,d=T,l=T,R=T;return B=F(h,"map",[],"sides".$to_proc()),P=(V=F(h,"map",[],"value".$to_proc())).$sum(),d=[100]["$==="](l=B)?y.$check_1D100(b,P,v,p):[20]["$==="](l)?y.$check_1D20(b,P,v,p):[6,6]["$==="](l)?y.$check_2D6(b,P,V,v,p):T,_(_(g=d["$nil?"]())?g:d["$empty?"]())&&(l=B.$uniq(),d=[10]["$==="](l)?y.$check_nD10(b,P,V,v,p):[6]["$==="](l)?y.$check_nD6(b,P,V,v,p):T,_(_(R=d["$nil?"]())?R:d["$empty?"]()))?T:m(x,"Result").$new(d.$delete_prefix(" \uff1e "))},K.$$arity=4),e.def(G,"$check_1D100",q=function(b,h,v,p){return T},q.$$arity=4),e.def(G,"$check_1D20",z=function(b,h,v,p){return T},z.$$arity=4),e.def(G,"$check_nD10",o=function(b,h,v,p,y){return T},o.$$arity=5),e.def(G,"$check_2D6",n=function(b,h,v,p,y){return T},n.$$arity=5),void e.def(G,"$check_nD6",c=function(b,h,v,p,y){return T},c.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function Q(A,j){return"number"==typeof A&&"number"==typeof j?A+j:A["$+"](j)}function O(A,j){return"number"==typeof A&&"number"==typeof j?A-j:A["$-"](j)}var j,z,c,$,b,h,v,p,y,B,V,P,d,l,g,R,N,u,S,Z,re,W,ie,ue,fe,Se,xe,Be,Ee,ye,ee,J,w,k,X,te,$e,I,o,n,x,s=e.top,F=[],_=e.nil,L=e.$$$,E=e.$$,t=e.module,D=e.klass,i=e.truthy,C=e.send,Y=e.range,f=_;return s.$require("i18n"),s.$require("i18n/backend/fallbacks"),s.$require("bcdice/randomizer"),s.$require("bcdice/dice_table"),s.$require("bcdice/enum"),s.$require("bcdice/translate"),s.$require("bcdice/result"),s.$require("bcdice/command/parser"),s.$require("bcdice/deprecated/checker"),j=F,z=x=[t(F[0],"BCDice")].concat(j),o=D(x[0],null,"Base"),n=[o].concat(z),o.$$prototype.sort_add_dice=o.$$prototype.sort_barabara_dice=o.$$prototype.enabled_d9=o.$$prototype.raw_input=o.$$prototype.randomizer=o.$$prototype.enabled_upcase_input=o.$$prototype.debug=_,J=e.get_singleton_class(o),I=[J].concat(n),J.$attr_reader("prefixes"),e.def(J,"$register_prefix",w=function(ne){var ve,ge=this,me=_;return null==ge.prefixes&&(ge.prefixes=_),ve=e.slice.call(arguments,0,arguments.length),ge.prefixes=i(me=ge.prefixes)?me:[],ge.prefixes.$concat(ve.$flatten())},w.$$arity=-1),e.def(J,"$register_prefix_from_super_class",k=function(){return this.$register_prefix(this.$superclass().$prefixes())},k.$$arity=0),e.def(J,"$prefixes_pattern",X=function(){var ae,ne=this,ve=_;return null==ne.prefixes_pattern&&(ne.prefixes_pattern=_),null==ne.prefixes&&(ne.prefixes=_),ne.prefixes_pattern=i(ae=ne.prefixes_pattern)?ae:_,i(ne.prefixes_pattern)?ne.prefixes_pattern:(ne.prefixes=i(ve=ne.prefixes)?ve:[],ne.prefixes.$freeze(),ne.prefixes_pattern=(i(ne.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",ne.prefixes.$join("|"),")"],"i")).$freeze())},X.$$arity=0),e.def(J,"$command_pattern",te=function(){var ne,ve,ae=this,ge=_,me=_;return null==ae.command_pattern&&(ae.command_pattern=_),null==ae.prefixes&&(ae.prefixes=_),ae.command_pattern=i(ve=ae.command_pattern)?ve:_,i(ae.command_pattern)?ae.command_pattern:(ae.prefixes=i(ge=ae.prefixes)?ge:[],ae.prefixes.$freeze(),me=Q(C(L(E(I,"CommonCommand"),"COMMANDS"),"map",[],((ne=function(se){return null==se&&(se=_),L(se,"PREFIX_PATTERN").$source()}).$$s=ae,ne.$$arity=1,ne)),ae.prefixes),ae.command_pattern=e.regexp(["^S?(",me.$join("|"),")"],"i").$freeze())},te.$$arity=0),e.def(J,"$eval",$e=function(ne){return this.$new(ne).$eval()},$e.$$arity=1),o.$include(E(n,"Translate")),o.$include(L(E(n,"Deprecated"),"Checker")),e.def(o,"$initialize",c=function(a){var I=this;return I.raw_input=a,I.sort_add_dice=!1,I.sort_barabara_dice=!1,I.d66_sort_type=L(E(n,"D66SortType"),"NO_SORT"),I.enabled_d9=!1,I.round_type=L(E(n,"RoundType"),"FLOOR"),I.sides_implicit_d=6,I.upper_dice_reroll_threshold=_,I.reroll_dice_reroll_threshold=_,I.default_cmp_op=_,I.default_target_number=_,I.enabled_upcase_input=!0,I.locale="ja_jp",I.randomizer=L(E(n,"BCDice"),"Randomizer").$new(),I.debug=!1},c.$$arity=1),o.$attr_accessor("randomizer"),o.$attr_reader("d66_sort_type"),o.$attr_reader("round_type"),o.$attr_reader("sides_implicit_d"),o.$attr_reader("upper_dice_reroll_threshold"),o.$attr_reader("reroll_dice_reroll_threshold"),o.$attr_reader("default_cmp_op"),o.$attr_reader("default_target_number"),e.def(o,"$sort_add_dice?",$=function(){return this.sort_add_dice},$.$$arity=0),e.def(o,"$sort_barabara_dice?",b=function(){return this.sort_barabara_dice},b.$$arity=0),e.def(o,"$enabled_d9?",h=function(){return this.enabled_d9},h.$$arity=0),e.def(o,"$enable_debug",v=function(){return this.debug=!0},v.$$arity=0),e.def(o,"$eval",p=function(){var I,w,k,a=this,X=_;return I=L(E(n,"BCDice"),"Preprocessor").$process(a.raw_input,a),w=i(k=a.$dice_command(I))?k:a.$eval_common_command(a.raw_input),i(w)?(X=[a.randomizer.$rand_results()],C(w,"rands=",e.to_a(X)),O(X.length,1),X=[a.randomizer.$detailed_rand_results()],C(w,"detailed_rands=",e.to_a(X)),O(X.length,1),w):_},p.$$arity=0),e.def(o,"$change_text",y=function(a){return a},y.$$arity=1),e.def(o,"$check_result",B=function(a,I,w,k){var X=this,te=_,$e=_,be=_,ne=_,ae=_;return te=X.$check_result_legacy(a,I,w,k),i(te)?te:($e=C(I,"map",[],"sides".$to_proc()),ne=(be=C(I,"map",[],"value".$to_proc())).$sum(),(te=[100]["$==="](ae=$e)?X.$result_1d100(a,ne,w,k):[20]["$==="](ae)?X.$result_1d20(a,ne,w,k):[6,6]["$==="](ae)?X.$result_2d6(a,ne,be,w,k):_)["$=="](E(n,"Result").$nothing())?_:i(te)?te:(ae=$e.$uniq(),(te=[10]["$==="](ae)?X.$result_nd10(a,ne,be,w,k):[6]["$==="](ae)?X.$result_nd6(a,ne,be,w,k):_)["$=="](E(n,"Result").$nothing())?_:i(te)?te:X.$result_ndx(a,w,k)))},B.$$arity=4),e.def(o,"$grich_text",V=function(a,I,w){return _},V.$$arity=3),o.$private(),e.def(o,"$eval_common_command",P=function(a){try{var I;return a=this.$change_text(a),C(L(E(n,"CommonCommand"),"COMMANDS"),"each",[],((I=function(X){var $e,te=null==I.$$s?this:I.$$s;if(null==te.randomizer&&(te.randomizer=_),null==X&&(X=_),$e=X.$eval(a,te,te.randomizer),!i($e))return _;e.ret($e)}).$$s=this,I.$$arity=1,I)),_}catch(k){if(k===e.returner)return k.$v;throw k}},P.$$arity=1),e.def(o,"$dice_command",d=function(a){var I,w=this,k=_,X=_,te=_,$e=_,be=_,ne=_,ae=_;return i(w.enabled_upcase_input)&&(a=a.$upcase()),k=w.$class().$prefixes_pattern().$match(a),i(k)?(X=k["$[]"](1)["$nil?"]()["$!"](),i(X)&&(a=a["$[]"](Y(1,-1,!1))),te=w.$eval_game_system_specific_command(a),i(te["$is_a?"](E(n,"Result")))?($e=[i(be=te["$secret?"]())?be:X],C(te,"secret=",e.to_a($e)),O($e.length,1),te):i(i(ne=i(ae=te["$nil?"]())?ae:te["$empty?"]())?ne:te["$=="]("1"))?_:C(E(n,"Result").$new(),"tap",[],((I=function(ge){return null==ge&&(ge=_),$e=[te.$to_s()],C(ge,"text=",e.to_a($e)),O($e.length,1),C(ge,"secret=",e.to_a($e=[X])),$e[O($e.length,1)]}).$$s=w,I.$$arity=1,I))):_},d.$$arity=1),e.def(o,"$eval_game_system_specific_command",l=function(a){return _},l.$$arity=1),e.def(o,"$result_ndx",g=function(a,I,w){return i(w["$is_a?"](E(n,"String")))?_:i(a.$send(I,w))?E(n,"Result").$success(this.$translate("success")):E(n,"Result").$failure(this.$translate("failure"))},g.$$arity=3),e.def(o,"$result_1d100",R=function(a,I,w,k){return _},R.$$arity=4),e.def(o,"$result_1d20",N=function(a,I,w,k){return _},N.$$arity=4),e.def(o,"$result_nd10",u=function(a,I,w,k,X){return _},u.$$arity=5),e.def(o,"$result_2d6",S=function(a,I,w,k,X){return _},S.$$arity=5),e.def(o,"$result_nd6",Z=function(a,I,w,k,X){return _},Z.$$arity=5),e.def(o,"$get_table_by_2d6",re=function(a){return this.$get_table_by_nD6(a,2)},re.$$arity=1),e.def(o,"$get_table_by_1d6",W=function(a){return this.$get_table_by_nD6(a,1)},W.$$arity=1),e.def(o,"$get_table_by_nD6",ie=function(a,I){return this.$get_table_by_nDx(a,I,6)},ie.$$arity=2),e.def(o,"$get_table_by_nDx",ue=function(a,I,w){var X,te=_;return X=this.randomizer.$roll_sum(I,w),te=this.$get_table_value(a["$[]"](O(X,I))),i(te["$nil?"]())?["1",0]:[te,X]},ue.$$arity=3),e.def(o,"$get_table_by_1d3",fe=function(a){var k,X,A,I=this,te=_;return I.$debug("get_table_by_1d3"),k=I.randomizer.$roll_sum(1,6),I.$debug("num",k),X=(A=O(k,1),"number"==typeof A?A/2:A["$/"](2)).$to_i(),I.$debug("index",X),te=a["$[]"](X),i(te["$nil?"]())?["1",0]:[te,k]},fe.$$arity=1),e.def(o,"$get_table_by_d66_swap",Se=function(a){var w;return w=this.randomizer.$roll_d66(L(E(n,"D66SortType"),"ASC")),[this.$get_table_by_number(w,a),w]},Se.$$arity=1),e.def(o,"$get_table_by_d66",xe=function(a){var w,k,X,$e,A,te=_;return w=this.randomizer.$roll_once(6),k=this.randomizer.$roll_once(6),X=Q("number"==typeof(A=O(w,1))?6*A:A["$*"](6),O(k,1)),te=a["$[]"](X),$e=""+w+k,i(te["$nil?"]())?["1",$e]:[te,$e]},xe.$$arity=1),e.def(o,"$get_table_by_number",Be=function(a,I,w){try{var k;return null==w&&(w="1"),C(I,"each",[],((k=function($e){var ne,be=null==k.$$s?this:k.$$s;if(null==$e&&($e=_),ne=$e["$[]"](0),!i(function(A,j){return"number"==typeof A&&"number"==typeof j?A>=j:A["$>="](j)}(ne,a)))return _;e.ret(be.$get_table_value($e["$[]"](1)))}).$$s=this,k.$$arity=1,k)),this.$get_table_value(w)}catch(te){if(te===e.returner)return te.$v;throw te}},Be.$$arity=-3),e.def(o,"$get_table_value",Ee=function(a){return i(a["$is_a?"](E(n,"Proc")))?a.$call():a},Ee.$$arity=1),e.def(o,"$roll_tables",ye=function(a,I){var k=_;return k=I["$[]"](a),i(k)?k.$roll(this.randomizer).$to_s():_},ye.$$arity=2),e.def(o,"$debug",ee=function(a,I){var k,X,te=this,$e=_,be=_;return k=e.slice.call(arguments,1,arguments.length),i(te.debug)?($e=i(a["$is_a?"](E(n,"String")))?a:a.$inspect(),i(k["$empty?"]())?te.$warn($e):(be=C(k,"map",[],((X=function(ae){return null==ae&&(ae=_),i(ae["$is_a?"](E(n,"String")))?'"'+ae+'"':ae.$inspect()}).$$s=te,X.$$arity=1,X)),te.$warn($e+": "+be.$join(", ")))):_},ee.$$arity=-2),L(L(E(F,"I18n"),"Backend"),"Simple").$include(L(L(E(F,"I18n"),"Backend"),"Fallbacks")),E(F,"I18n").$load_path()["$<<"](E(F,"Dir")["$[]"](E(F,"File").$join(s.$__dir__(),"../../i18n/**/*.yml"))),f=["ja_jp"],C(E(F,"I18n"),"default_locale=",e.to_a(f)),O(f.length,1),f=[["ja_jp"]],C(E(F,"I18n").$fallbacks(),"defaults=",e.to_a(f)),f[O(f.length,1)]},function(e){function O(Y,f){return"number"==typeof Y&&"number"==typeof f?Y+f:Y["$+"](f)}var f,x,n,b,h,v,p,y,B,V,P,d,l,g,R,N,S,Z,c,$,u,q,j,r=[],m=e.nil,s=e.$$$,F=e.$$,_=e.module,L=e.klass,E=e.send2,t=e.truthy,D=e.send,i=e.hash2,C=e.hash;e.top.$require("bcdice/base"),f=r,x=j=[_(r[0],"BCDice")].concat(f),n=q=[_(j[0],"GameSystem")].concat(x),c=L(q[0],F(q,"Base"),"AlchemiaStruggle"),$=[c].concat(n),u=m,c.$$prototype.randomizer=m,e.const_set($[0],"ID","AlchemiaStruggle"),e.const_set($[0],"NAME","\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb"),e.const_set($[0],"SORT_KEY","\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b"),e.const_set($[0],"HELP_MESSAGE","\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff08 xAS \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 5AS\n\n\u25a0 \u30c0\u30a4\u30b9\u30ed\u30fc\u30eb\uff06\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306b\u30d4\u30c3\u30af\uff08 xASy \uff09\n  xD\u3092\u30ed\u30fc\u30eb\u3057\u3001\u305d\u3053\u304b\u3089\u6700\u5927\u306b\u306a\u308b\u3088\u3046\u306by\u500b\u3092\u30d4\u30c3\u30af\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 4AS3\n\n\u25a0 \u30a6\u30eb\u30c0\u30a4\u30b9\u306e\u7372\u5f97\uff08 xUL \uff09\n  xD\u306e\u30a6\u30eb\u30c0\u30a4\u30b9\u3092\u632f\u308a\u3001\u51fa\u305f\u51fa\u76ee\u306e\u500b\u6570\u3092No.\u3054\u3068\u306b\u30ab\u30a6\u30f3\u30c8\u3057\u307e\u3059\u3002\n  \u4f8b\uff09 6UL\n\n\u25a0 \u8868\n  \u30fb\u5947\u8de1\u306e\u89e6\u5a92\n    \u30fb\u30a8\u30ec\u30e1\u30f3\u30c8 (CELE, CElement)\n    \u30fb\u30a2\u30eb\u30b1\u30df\u30a2 (CALC, CAlchemia)\n    \u30fb\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8 (CINF, CInformant)\n    \u30fb\u30a4\u30ce\u30bb\u30f3\u30b9 (CINN, CInnocence)\n    \u30fb\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9 (CACQ, CAcquired)\n  \u30fb\u643a\u884c\u54c1\n    \u30fb\uff33\u30b5\u30a4\u30ba (ARS, ArticleS)\n    \u30fb\uff2d\u30b5\u30a4\u30ba (ARM, ArticleM)\n    \u30fb\uff2c\u30b5\u30a4\u30ba (ARL, ArticleL)\n  \u30fb\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868 (PCI, PCInformation)\n  \u30fb\u7406\u7531\u8868 (REA, Reason)\n  \u30fb\u4ea4\u6d41\u8868 (ASS, Associate)\n  \u30fb\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868 (CON, Contact)\n"),e.const_set($[0],"ROLL_REG",/^(\d+)AS(\d+)?$/i.$freeze()),c.$register_prefix("\\d+AS","\\d+UL"),e.def(c,"$initialize",b=function(W){var fe=this;return b.$$p&&(b.$$p=null),E(fe,e.find_super_dispatcher(fe,"initialize",b,!1,!0),"initialize",[W],null),fe.sort_add_dice=!0,fe.sort_barabara_dice=!0,fe.round_type=s(F($,"RoundType"),"CEIL")},b.$$arity=1),e.def(c,"$eval_game_system_specific_command",h=function(W){var ue,Se,fe,xe;return ue=t(fe=F($,"ALIAS")["$[]"](W))?fe:W,t(Se=t(xe=this.$try_roll_alchemia(ue))?xe:this.$try_roll_uldice(ue))?Se:this.$roll_tables(ue,F($,"TABLES"))},h.$$arity=1),e.def(c,"$try_roll_alchemia",v=function(W){var ue=m,fe=m,Se=m,xe=m;return ue=F($,"ROLL_REG").$match(W),t(ue)?(fe=ue["$[]"](1).$to_i(),t(ue["$[]"](2)["$nil?"]())?(Se=this.$roll_alchemia(fe),this.$make_roll_text(Se)):(xe=ue["$[]"](2).$to_i(),Se=this.$roll_alchemia_and_pick(fe,xe),this.$make_roll_and_pick_text(Se["$[]"]("rolled_dices"),xe,Se["$[]"]("picked_dices")))):m},v.$$arity=1),e.def(c,"$try_roll_uldice",p=function(W){var ie,fe=m,Se=m,xe=m;return fe=/^(\d+)UL$/.$match(W),t(fe)?["("+(Se=fe["$[]"](1).$to_i())+"D6)","["+(xe=this.randomizer.$roll_barabara(Se,6).$sort()).$join(",")+"]",D(D(xe,"group_by",[],"itself".$to_proc()),"map",[],(ie=function(J,a){return null==J&&(J=m),null==a&&(a=m),"No."+J+": "+a.$size()+"\u500b"},ie.$$s=this,ie.$$arity=2,ie)).$join(", ")].$join(" \uff1e "):m},p.$$arity=1),e.def(c,"$roll_alchemia",y=function(W){return this.randomizer.$roll_barabara(W,6)},y.$$arity=1),e.def(c,"$roll_alchemia_and_pick",B=function(W,ie){var fe;return fe=this.$roll_alchemia(W),i(["rolled_dices","picked_dices"],{rolled_dices:fe,picked_dices:this.$pick_maximum(fe,ie)})},B.$$arity=2),e.def(c,"$pick_maximum",V=function(W,ie){return t(function(Y,f){return"number"==typeof Y&&"number"==typeof f?Y<=f:Y["$<="](f)}(W.$size(),ie))?W:W.$sort().$pop(ie)},V.$$arity=2),e.def(c,"$make_roll_text",P=function(W){return"("+W.$size()+"D6) \uff1e "+this.$make_dice_text(W)},P.$$arity=1),e.def(c,"$make_roll_and_pick_text",d=function(W,ie,ue){return"("+W.$size()+"D6|>"+ie+"D6) \uff1e "+this.$make_dice_text(W)+" >> "+this.$make_dice_text(ue)+" \uff1e "+ue.$sum()},d.$$arity=3),e.def(c,"$make_dice_text",l=function(W){return"["+W.$sort().$join(", ")+"]"},l.$$arity=1),e.const_set($[0],"CATALYST_TABLES",D(i(["CElement","CAlchemia","CInformant","CInnocence","CAcquired"],{CElement:s(F($,"DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a8\u30ec\u30e1\u30f3\u30c8\uff09","1D6",["\u30ef\u30f3\u30c9","\u6c34\u6676\u7389","\u30ab\u30fc\u30c9","\u30b9\u30c6\u30c3\u30ad","\u624b\u93e1","\u5b9d\u77f3"]),CAlchemia:s(F($,"DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30eb\u30b1\u30df\u30a2\uff09","1D6",["\u6307\u8f2a","\u30d6\u30ec\u30b9\u30ec\u30c3\u30c8","\u30a4\u30e4\u30ea\u30f3\u30b0","\u30cd\u30c3\u30af\u30ec\u30b9","\u30d6\u30ed\u30fc\u30c1","\u30d8\u30a2\u30d4\u30f3"]),CInformant:s(F($,"DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30f3\u30d5\u30a9\u30fc\u30de\u30f3\u30c8\uff09","1D6",["\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3","\u30bf\u30d6\u30ec\u30c3\u30c8","\u30ce\u30fc\u30c8\u30d1\u30bd\u30b3\u30f3","\u7121\u7dda\u6a5f\uff08\u30c8\u30e9\u30f3\u30b7\u30fc\u30d0\u30fc\uff09","\u30a6\u30a7\u30a2\u30e9\u30d6\u30eb\u30c7\u30d0\u30a4\u30b9","\u643a\u5e2f\u30b2\u30fc\u30e0\u6a5f"]),CInnocence:s(F($,"DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a4\u30ce\u30bb\u30f3\u30b9\uff09","1D6",["\u624b\u888b","\u7b1b","\u9774","\u9234","\u62e1\u58f0\u5668","\u5f26\u697d\u5668"]),CAcquired:s(F($,"DiceTable"),"Table").$new("\u5947\u8de1\u306e\u89e6\u5a92\uff08\u30a2\u30af\u30ef\u30a4\u30e4\u30fc\u30c9\uff09","1D6",["\u30dc\u30bf\u30f3","\u97f3\u58f0","\u30e2\u30fc\u30b7\u30e7\u30f3","\u8133\u6ce2","\u8a18\u9332\u5a92\u4f53","\uff21\uff29"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),e.const_set($[0],"ARTICLE_TABLES",D(i(["ArticleS","ArticleM","ArticleL"],{ArticleS:s(F($,"DiceTable"),"D66Table").$new("\u643a\u884c\u54c1\uff08\uff33\u30b5\u30a4\u30ba\uff09",s(F($,"D66SortType"),"ASC"),C(11,"\u30de\u30c3\u30c1",12,"\u30da\u30c3\u30c8\u30dc\u30c8\u30eb",13,"\u8a66\u9a13\u7ba1",14,"\u56e3\u6247",15,"\u690d\u7269",16,"\u30cf\u30f3\u30ab\u30c1",22,"\u5316\u7ca7\u7528\u5177",23,"\u30d9\u30eb\u30c8",24,"\u30bf\u30d0\u30b3",25,"\u30c1\u30a7\u30fc\u30f3",26,"\u96fb\u6c60",33,"\u304a\u83d3\u5b50",34,"\u91dd\u91d1",35,"\u30b3\u30a4\u30f3",36,"\u30ca\u30a4\u30d5",44,"\u30ab\u30c8\u30e9\u30ea\u30fc",45,"\u7802",46,"\u30b9\u30d7\u30ec\u30fc",55,"\u77f3",56,"\u6587\u623f\u5177",66,"\u30da\u30f3\u30e9\u30a4\u30c8")),ArticleM:s(F($,"DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2d\u30b5\u30a4\u30ba\uff09",["\u672c","\u5098","\u91d1\u5c5e\u677f","\u82b1\u706b","\u30a8\u30a2\u30ac\u30f3","\u5305\u5e2f"],["\u5de5\u5177","\u30b8\u30e3\u30b1\u30c3\u30c8","\u30ed\u30fc\u30d7","\u4eba\u5f62","\u8efd\u98df","\u30ac\u30e9\u30b9\u74f6"]),ArticleL:s(F($,"DiceTable"),"D66ParityTable").$new("\u643a\u884c\u54c1\uff08\uff2c\u30b5\u30a4\u30ba\uff09",["\u6728\u5200","\u91e3\u308a\u5177","\u81ea\u8ee2\u8eca","\u30d0\u30c3\u30c8","\u5bdd\u888b","\u4e38\u592a"],["\u7269\u5e72\u3057\u7aff","\u934b","\u30b9\u30b1\u30fc\u30c8\u30dc\u30fc\u30c9","\u30b7\u30e3\u30d9\u30eb\uff08\u30b9\u30b3\u30c3\u30d7\uff09","\u30bf\u30f3\u30af","\u811a\u7acb"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),e.const_set($[0],"DRAMA_SEQUENCE_TABLES",D(i(["PCInformation","Reason","Associate","Contact"],{PCInformation:s(F($,"DiceTable"),"D66ParityTable").$new("\uff30\uff23\u60c5\u5831\u7372\u5f97\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u3066\u3044\u305f\u5834\u6240\u3002\u805e\u304d\u305f\u3044\u3053\u3068\u3092\u7a81\u304d\u3064\u3051\u308b\u9803\u5408\u3044\u304b\u3082\u3057\u308c\u306a\u3044\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u3053\u3061\u3089\u306e\u30da\u30fc\u30b9\u306b\u5f15\u304d\u8fbc\u307f\u3001\u3086\u3055\u3076\u308a\u3092\u304b\u3051\u308b\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u76f8\u624b\u306e\u30da\u30fc\u30b9\u306b\u5451\u307e\u308c\u306a\u3044\u3088\u3046\u3001\u614e\u91cd\u306b\u3044\u3053\u3046\u3002","\u81ea\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u4ef2\u9593\u306b\u624b\u306f\u51fa\u3055\u305b\u305a\u3001\u3042\u304f\u307e\u3067\u30d7\u30ec\u30c3\u30b7\u30e3\u30fc\u3092\u4e0e\u3048\u308b\u3060\u3051\u306b\u3057\u3066\u3082\u3089\u3046\u3002","\u30ab\u30d5\u30a7\u3001\u30d0\u30fc \u2015\u2015 \u53b3\u304b\u306a\u7a7a\u6c17\u306b\u5305\u307e\u308c\u305f\u5927\u4eba\u306e\u5834\u6240\u3002\u3053\u3053\u3067\u58f0\u3092\u8352\u3052\u308b\u306e\u306f\u7d33\u58eb\u7684\u3067\u306f\u306a\u3044\u3002","\u8def\u5730\u88cf \u2015\u2015 \u5efa\u7269\u3068\u5efa\u7269\u306e\u9593\u3084\u3001\u4eba\u901a\u308a\u306e\u5c11\u306a\u3044\u88cf\u901a\u308a\u3002\u591a\u5c11\u624b\u8352\u306a\u624b\u6bb5\u306b\u51fa\u3066\u3082\u76ee\u7acb\u3061\u306f\u3057\u306a\u3044\u3060\u308d\u3046\u3002"],["\u5ec3\u589f \u2015\u2015 \u5ec3\u30d3\u30eb\u3001\u5ec3\u5de5\u5834\u306e\u3088\u3046\u306a\u4eba\u304c\u7acb\u3061\u5165\u3089\u306a\u3044\u5834\u6240\u3002\u304a\u3042\u3064\u3089\u3048\u5411\u304d\u306e\u5834\u6240\u3092\u7528\u610f\u3057\u3066\u3084\u3063\u305f\u3002","\u516c\u5171\u4ea4\u901a\u6a5f\u95a2 \u2015\u2015 \u30d0\u30b9\u3001\u96fb\u8eca\u306a\u3069\u3002\u663c\u591c\u554f\u308f\u305a\u591a\u304f\u306e\u4eba\u304c\u5229\u7528\u3059\u308b\u4e57\u308a\u7269\u3002\u6562\u3048\u3066\u4eba\u76ee\u306b\u4ed8\u304f\u5834\u6240\u3067\u8a70\u3081\u5bc4\u308a\u3001\u52d5\u63fa\u3092\u8a98\u3046\u3002","\u96d1\u6728\u6797 \u2015\u2015 \u8349\u6728\u304c\u63fa\u308c\u308b\u97f3\u3001\u866b\u3084\u9ce5\u306e\u9cf4\u304d\u58f0\u3060\u3051\u304c\u805e\u3053\u3048\u308b\u3002\u305d\u3053\u306b\u90aa\u9b54\u3059\u308b\u8005\u306f\u3044\u306a\u3044\u3002","\u591c\u306e\u516c\u5712 \u2015\u2015 \u5bdd\u9759\u307e\u3063\u305f\u8857\u306e\u516c\u5712\u3002\u8857\u706f\u306b\u7167\u3089\u3055\u308c\u306a\u3044\u5834\u6240\u306a\u3089\u76ee\u7acb\u3064\u3053\u3068\u3082\u306a\u3044\u3060\u308d\u3046\u3002","\u99d0\u8eca\u5834 \u2015\u2015 \u7acb\u4f53\u3001\u5e73\u9762\u3001\u5730\u4e0b\u3092\u554f\u308f\u305a\u8eca\u3092\u505c\u3081\u308b\u5834\u6240\u3002\u4eba\u306e\u51fa\u5165\u308a\u306e\u6fc0\u3057\u3055\u306b\u5bfe\u3057\u3001\u305d\u3053\u306b\u7559\u307e\u308b\u4eba\u306f\u5c11\u306a\u3044\u3002\u76ee\u6483\u8005\u3082\u591a\u304f\u306f\u306a\u3044\u3060\u308d\u3046\u3002","\u9ad8\u67b6\u4e0b \u2015\u2015 \u7dda\u8def\u3001\u9053\u8def\u306e\u6a4b\u306e\u4e0b\u3002\u97ff\u304f\u9a12\u97f3\u304c\u81ea\u5206\u305f\u3061\u306e\u5b58\u5728\u3092\u8584\u3081\u3066\u304f\u308c\u308b\u3002"]),Reason:s(F($,"DiceTable"),"Table").$new("\u7406\u7531\u8868","1D6",["\u4e0d\u4fe1\u611f \u2015\u2015 \u884c\u52d5\u3084\u8a00\u52d5\u306b\u306a\u306b\u304b\u91c8\u7136\u3068\u3057\u306a\u3044\u90e8\u5206\u3092\u611f\u3058\u308b\u3002\u767d\u9ed2\u306f\u3063\u304d\u308a\u3055\u305b\u3088\u3046\u3002","\u597d\u5947\u5fc3 \u2015\u2015 \u76f8\u624b\u306e\u3053\u3068\u3092\u77e5\u308a\u305f\u3044\u3068\u63bb\u304d\u7acb\u3066\u3089\u308c\u308b\u3002\u77e5\u308a\u305f\u3044\u6c17\u6301\u3061\u3092\u6291\u3048\u3089\u308c\u306a\u3044\u3002","\u5e87\u8b77\u611f \u2015\u2015 \u77e5\u53e4\u306e\u59ff\u3092\u91cd\u306d\u3066\u5b88\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u4fe1\u983c\u95a2\u4fc2\u3092\u541b\u3068\u7bc9\u304f\u305f\u3081\u3001\u8e0f\u307f\u8fbc\u3093\u3060\u3068\u3053\u308d\u307e\u3067\u77e5\u3063\u3066\u304a\u304d\u305f\u3044\u3002","\u5acc\u60aa\u611f \u2015\u2015 \u7406\u7531\u306f\u306a\u3044\u3051\u3069\u6c17\u306b\u98df\u308f\u306a\u3044\u3002\u60c5\u5831\u306e\u30a2\u30c9\u30d0\u30f3\u30c6\u30fc\u30b8\u3092\u63e1\u308b\u3053\u3068\u3067\u512a\u4f4d\u306b\u7acb\u3066\u308b\u306f\u305a\u3060\u3002","\u504f\u611b \u2015\u2015 \u611b\u3086\u3048\u306b\u77e5\u308a\u305f\u304f\u306a\u3063\u3066\u3057\u307e\u3046\u3002\u541b\u306e\u601d\u8003\u3001\u76ee\u7684\u3001\u611f\u60c5\u306e\u3059\u3079\u3066\u3092\u624b\u306b\u5165\u308c\u305f\u3044\u3002","\u76f4\u611f \u2015\u2015 \u6839\u62e0\u306f\u306a\u3044\u304c\u3001\u306a\u306b\u304b\u96a0\u3057\u3066\u3044\u308b\u6c17\u304c\u3059\u308b\u3002\u4e00\u304b\u516b\u304b\u3001\u52dd\u8ca0\u306b\u51fa\u3088\u3046\u3002"]),Associate:s(F($,"DiceTable"),"D66ParityTable").$new("\u4ea4\u6d41\u8868",["\u524d\u306e\u5834\u9762\u306e\u76f4\u5f8c \u2015\u2015 \u76f4\u524d\u306b\u3084\u308a\u53d6\u308a\u3092\u3057\u305f\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u4e00\u606f\u3064\u304f\u3082\u306e\u3044\u3044\u3060\u308d\u3046\u3002","\u81ea\u5206\u306e\u62e0\u70b9 \u2015\u2015 \u81ea\u5206\u306e\u5fc3\u8eab\u3092\u4f11\u3081\u3089\u308c\u308b\u5834\u6240\u3002\u4e00\u7dd2\u306b\u304f\u3064\u308d\u304e\u306a\u304c\u3089\u8a71\u3092\u3057\u3088\u3046\u3002","\u76f8\u624b\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u751f\u6d3b\u306e\u57fa\u70b9\u306b\u3057\u3066\u3044\u308b\u5834\u6240\u3002\u3061\u3087\u3063\u3068\u304a\u90aa\u9b54\u3055\u305b\u3066\u3082\u3089\u3048\u306a\u3044\u3060\u308d\u3046\u304b\uff1f","\u76f8\u624b\u5b66\u6d3e\u306e\u62e0\u70b9 \u2015\u2015 \u76f8\u624b\u304c\u5b66\u6d3e\u306e\u4ef2\u9593\u3068\u5171\u306b\u4f7f\u7528\u3059\u308b\u5834\u6240\u3002\u82e5\u5e72\u306e\u5c45\u5fc3\u5730\u60aa\u3055\u306f\u3042\u308b\u304c\u3001\u597d\u611f\u3092\u6301\u3063\u3066\u3082\u3089\u3046\u305f\u3081\u306b\u306f\u6211\u6162\u3082\u5fc5\u8981\u3002","\u98df\u4e8b\u51e6 \u2015\u2015 \u30d5\u30a1\u30df\u30ec\u30b9\u3001\u5c45\u9152\u5c4b\u306a\u3069\u3002\u4eba\u3067\u306b\u304e\u308f\u3046\u98df\u4e8b\u51e6\u3002\u6c17\u8efd\u306b\u98f2\u307f\u98df\u3044\u3067\u304d\u308b\u7a7a\u9593\u3067\u3001\u8a71\u3082\u5f3e\u3080\u306f\u305a\u3002","\u30a2\u30df\u30e5\u30fc\u30ba\u30e1\u30f3\u30c8\u65bd\u8a2d \u2015\u2015 \u30ab\u30e9\u30aa\u30b1\u3001\u30dc\u30fc\u30ea\u30f3\u30b0\u3001\u30b2\u30fc\u30e0\u30bb\u30f3\u30bf\u30fc\u306a\u3069\u306e\u5a2f\u697d\u65bd\u8a2d\u3002\u904a\u3079\u3070\u4eba\u3068\u306a\u308a\u304c\u308f\u304b\u308b\u3002\u624b\u3063\u53d6\u308a\u65e9\u304f\u3044\u3053\u3046\u3002"],["\u304a\u796d\u308a \u2015\u2015 \u8001\u82e5\u7537\u5973\u304c\u53c2\u52a0\u3059\u308b\u30a4\u30d9\u30f3\u30c8\u3002\u975e\u65e5\u5e38\u7684\u306a\u7a7a\u6c17\u3092\u697d\u3057\u3080\u3053\u3068\u3067\u3001\u6c17\u5206\u8ee2\u63db\u3082\u3067\u304d\u308b\u3060\u308d\u3046\u3002","\u663c\u9593\u306e\u516c\u5712 \u2015\u2015 \u6563\u6b69\u3059\u308b\u4eba\u3084\u5b50\u9023\u308c\u306e\u5bb6\u65cf\u3067\u6ea2\u308c\u308b\u516c\u5712\u3002\u50d5\u3089\u306b\u3082\u3042\u3042\u3084\u3063\u3066\u751f\u304d\u308b\u9053\u304c\u3042\u3063\u305f\u306e\u3060\u308d\u3046\u304b\u3002","\u601d\u3044\u51fa\u306e\u5834\u6240 \u2015\u2015 \u81ea\u5206\u306b\u3068\u3063\u3066\u601d\u3044\u5165\u308c\u306e\u3042\u308b\u5927\u4e8b\u306a\u5834\u6240\u3002\u3053\u306e\u4eba\u306b\u306a\u3089\u80f8\u306e\u5185\u3092\u660e\u304b\u3057\u3066\u3082\u3044\u3044\u6c17\u5206\u306b\u306a\u3063\u305f\u3002","\u30b9\u30dd\u30fc\u30c4\u89b3\u6226 \u2015\u2015 \u91ce\u7403\u3001\u30b5\u30c3\u30ab\u30fc\u3001\u30d0\u30b9\u30b1\u306a\u3069\u3002\u30d7\u30ed\u30a2\u30de\u554f\u308f\u305a\u89b3\u6226\u3059\u308b\u3002\u624b\u306b\u6c57\u63e1\u308b\u5c55\u958b\u3092\u5171\u306b\u898b\u5c4a\u3051\u3088\u3046\u3002","\u5c4b\u4e0a \u2015\u2015 \u8857\u3068\u4eba\u3092\u898b\u4e0b\u308d\u3059\u773a\u3081\u306e\u3044\u3044\u5834\u6240\u3002\u3053\u306e\u666f\u8272\u3092\u541b\u306f\u559c\u3076\u3060\u308d\u3046\u304b\u3001\u6016\u304c\u308b\u3060\u308d\u3046\u304b\u3002","\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0 \u2015\u2015 \u5927\u578b\u5546\u696d\u65bd\u8a2d\u3084\u30b7\u30e7\u30c3\u30d4\u30f3\u30b0\u30b9\u30c8\u30ea\u30fc\u30c8\u306b\u5411\u304b\u3046\u3002\u4e92\u3044\u306e\u8208\u5473\u304c\u3042\u308b\u3082\u306e\u3092\u77e5\u308b\u3044\u3044\u6a5f\u4f1a\u3060\u3002"]),Contact:s(F($,"DiceTable"),"Table").$new("\u63a5\u89e6\u306e\u304d\u3063\u304b\u3051\u8868","1D6",["\u4f53\u52e2\u3092\u5d29\u3059 \u2015\u2015 \u8ee2\u3073\u305d\u3046\u306b\u306a\u3063\u305f\u3068\u3053\u308d\u3092\u652f\u3048\u308b\u3001\u652f\u3048\u3089\u308c\u308b\u3002","\u4ed8\u7740\u7269\u3092\u3068\u308b \u2015\u2015 \u9aea\u3084\u670d\u306b\u3064\u3044\u3066\u3044\u308b\u30b4\u30df\u3001\u6c5a\u308c\u3092\u3068\u3063\u3066\u3042\u3052\u308b\u3002","\u601d\u308f\u305a\u624b\u304c\u51fa\u308b \u2015\u2015 \u8a00\u8449\u3088\u308a\u5148\u306b\u3001\u5f37\u3081\u306b\u624b\u304c\u51fa\u3066\u3057\u307e\u3046\u3002","\u7269\u3054\u3057\u306b\u89e6\u308c\u308b \u2015\u2015 \u7269\u3092\u6e21\u3059\u3001\u62fe\u3046\u969b\u306b\u6307\u5148\u540c\u58eb\u304c\u3076\u3064\u304b\u308b\u3002","\u53cb\u597d\u306e\u30b5\u30a4\u30f3 \u2015\u2015 \u80a9\u3092\u7d44\u3080\u3001\u63e1\u624b\u3092\u3059\u308b\u3001\u30cf\u30b0\u3092\u3059\u308b\u306a\u3069\u3002","\u30b1\u30a2\u3092\u3057\u3066\u3042\u3052\u308b \u2015\u2015 \u9aea\u3092\u3068\u304b\u3059\u3001\u80a9\u3092\u3082\u3080\u3001\u982d\u3092\u64ab\u3067\u308b\u3002\u76f8\u624b\u3092\u52b4\u3063\u3066\u3059\u308b\u884c\u70ba\u5168\u822c\u3002"])}),"transform_keys",[],"upcase".$to_proc()).$freeze()),e.const_set($[0],"TABLES",F($,"CATALYST_TABLES").$merge(F($,"ARTICLE_TABLES")).$merge(F($,"DRAMA_SEQUENCE_TABLES"))),u=D(F($,"CATALYST_TABLES").$keys(),"map",[],(g=function(W){return null==W&&(W=m),[W["$[]"](0,4),W]},g.$$s=c,g.$$arity=1,g)).$to_h(),S=D(F($,"ARTICLE_TABLES").$keys(),"map",[],(R=function(W){return null==W&&(W=m),[O(W["$[]"](0,2),W["$[]"](-1)),W]},R.$$s=c,R.$$arity=1,R)).$to_h(),Z=D(F($,"DRAMA_SEQUENCE_TABLES").$keys(),"map",[],(N=function(W){return null==W&&(W=m),[W["$[]"](0,3),W]},N.$$s=c,N.$$arity=1,N)).$to_h(),e.const_set($[0],"ALIAS",u.$merge(S).$merge(Z).$freeze()),c.$register_prefix(F($,"ALIAS").$keys(),F($,"TABLES").$keys())}(Opal)}}]);