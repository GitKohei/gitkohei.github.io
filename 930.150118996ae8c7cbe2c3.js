(self.webpackChunkudonarium_lily_gk=self.webpackChunkudonarium_lily_gk||[]).push([[930],{930:function(Xe,Je,Qe){var e,n,B,E,q,g,X,a,p,J,z,u,ne,c;Qe(4656),Opal.modules["i18n/backend/fallbacks"]=function(e){function K(p,s){return"number"==typeof p&&"number"==typeof s?p-s:p["$-"](s)}var s,a,E,g,W,B,O,P=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.module,c=e.truthy,G=e.send,n=e.send2,t=e.hash2;return s=P,O=[B=ne(P[0],"I18n")].concat(s),e.class_variable_set(O[0],"@@fallbacks",r),a=e.get_singleton_class(B),W=[a].concat(O),e.def(a,"$fallbacks",E=function(){var q,i,f;return e.class_variable_set(W[1],"@@fallbacks",c(f=null==(q=W[1].$$cvars["@@fallbacks"])?r:q)?f:z(z(u(W,"I18n"),"Locale"),"Fallbacks").$new()),c(i=u(W,"Thread").$current()["$[]"]("i18n_fallbacks"))?i:null==(q=W[1].$$cvars["@@fallbacks"])?r:q},E.$$arity=0),e.def(a,"$fallbacks=",g=function(q){var A,i;return e.class_variable_set(W[1],"@@fallbacks",c(q["$is_a?"](u(W,"Array")))?z(z(u(W,"I18n"),"Locale"),"Fallbacks").$new(q):q),i=["i18n_fallbacks",null==(A=W[1].$$cvars["@@fallbacks"])?r:A],G(u(W,"Thread").$current(),"[]=",e.to_a(i)),i[K(i.length,1)]},g.$$arity=1),void function(a,D){var E=[ne(a,"Backend")].concat(D);!function(g,X){var f,i,y,_,q=ne(g,"Fallbacks"),A=[q].concat(X);e.def(q,"$translate",f=function(C,b,l){try{var R,F=f.$$p,H=this,T=r,h=r,L=r,I=r,j=r,o=r;for(F&&(f.$$p=null),j=0,o=arguments.length,I=new Array(o);j<o;j++)I[j]=arguments[j];return null==l&&(l=u(A,"EMPTY_HASH")),!c(l.$fetch("fallback",!0))||c(l["$[]"]("fallback_in_progress"))?n(H,e.find_super_dispatcher(H,"translate",f,!1,!0),"translate",I,F):(c(l["$[]"]("default"))&&(T=H["$extract_non_symbol_default!"](l)),h=l.$merge(t(["fallback_in_progress"],{fallback_in_progress:!0})),G(u(A,"I18n").$fallbacks()["$[]"](C),"each",[],((R=function(te){var ue,se=null==R.$$s?this:R.$$s;null==te&&(te=r);try{return G(se,"catch",["exception"],((ue=function(){var Re=null==ue.$$s?this:ue.$$s,De=r;if(De=n(Re,e.find_iter_super_dispatcher(Re,"translate",ue.$$def||R.$$def||f,!1,!1),"translate",[te,b,h],null),c(De["$nil?"]()))return r;c(C.$to_s()["$!="](te.$to_s()))&&Re.$on_fallback(C,te,b,l),e.ret(De)}).$$s=se,ue.$$arity=0,ue))}catch(Te){if(!e.rescue(Te,[z(u(A,"I18n"),"InvalidLocale")]))throw Te;try{return r}finally{e.pop_exception()}}}).$$s=H,R.$$arity=1,R)),c(c(L=l["$key?"]("default"))?l["$[]"]("default")["$nil?"]():L)?r:c(T)?n(H,e.find_super_dispatcher(H,"translate",f,!1,!0),"translate",[C,r,l.$merge(t(["default"],{default:T}))],null):H.$throw("exception",z(u(A,"I18n"),"MissingTranslation").$new(C,b,l)))}catch(w){if(w===e.returner)return w.$v;throw w}},f.$$arity=-3),e.def(q,"$extract_non_symbol_default!",i=function(C){var b,F,R=r,re=r;return R=[C["$[]"]("default")].$flatten(),F=G(R,"detect",[],((b=function(T){return null==T&&(T=r),T["$is_a?"](u(A,"Symbol"))["$!"]()}).$$s=this,b.$$arity=1,b)),c(F)&&(re=["default",R["$[]"](0,R.$index(F))],G(C,"[]=",e.to_a(re)),K(re.length,1)),F},i.$$arity=1),e.def(q,"$exists?",y=function(C,b,l){try{var R,F=y.$$p,H=this,T=r,h=r,L=r;for(F&&(y.$$p=null),h=0,L=arguments.length,T=new Array(L);h<L;h++)T[h]=arguments[h];return null==l&&(l=u(A,"EMPTY_HASH")),c(l.$fetch("fallback",!0))?(G(u(A,"I18n").$fallbacks()["$[]"](C),"each",[],((R=function(j){var o=null==R.$$s?this:R.$$s;null==j&&(j=r);try{if(!c(n(o,e.find_iter_super_dispatcher(o,"exists?",R.$$def||y,!1,!1),"exists?",[j,b],null)))return r;e.ret(!0)}catch(w){if(!e.rescue(w,[z(u(A,"I18n"),"InvalidLocale")]))throw w;try{return r}finally{e.pop_exception()}}}).$$s=H,R.$$arity=1,R)),!1):n(H,e.find_super_dispatcher(H,"exists?",y,!1,!0),"exists?",T,F)}catch(I){if(I===e.returner)return I.$v;throw I}},y.$$arity=-3),q.$private(),e.def(q,"$on_fallback",_=function(C,b,l,R){return r},_.$$arity=4)}(E[0],E)}(O[0],O)},Opal.modules["bcdice/randomizer"]=function(e){function K(a,D){return"number"==typeof a&&"number"==typeof D?a>D:a["$>"](D)}function J(a,D){return"number"==typeof a&&"number"==typeof D?a+D:a["$+"](D)}function P(a,D){return"number"==typeof a&&"number"==typeof D?a<=D:a["$<="](D)}function r(a,D){return"number"==typeof a&&"number"==typeof D?a-D:a["$-"](D)}function z(a,D){return"number"==typeof a&&"number"==typeof D?a*D:a["$*"](D)}var D,q,i,y,_,x,C,b,l,R,F,re,H,A,f,E,c=[],G=e.nil,n=e.$$$,t=e.$$,s=e.klass,B=e.truthy,O=e.send;return D=c,q=E=[(0,e.module)(c[0],"BCDice")].concat(D),A=s(E[0],null,"Randomizer"),f=[A].concat(q),A.$$prototype.rand_results=A.$$prototype.detailed_rand_results=G,e.const_set(f[0],"UPPER_LIMIT_DICE_TIMES",200),e.const_set(f[0],"UPPER_LIMIT_DICE_SIDES",1e3),e.const_set(f[0],"UPPER_LIMIT_RANDS",1e4),e.def(A,"$initialize",i=function(){return this.rand_results=[],this.detailed_rand_results=[]},i.$$arity=0),A.$attr_reader("rand_results"),A.$attr_reader("detailed_rand_results"),e.const_set(f[0],"DetailedRandResult",t(f,"Struct").$new("kind","sides","value")),e.def(A,"$roll_barabara",y=function(h,L){var I,o,j=this;return B(K(J(j.rand_results.$size(),h),t(f,"UPPER_LIMIT_RANDS")))&&j.$raise(t(f,"TooManyRandsError")),B(B(o=P(h,0))?o:K(h,t(f,"UPPER_LIMIT_DICE_TIMES")))?[]:O(t(f,"Array"),"new",[h],((I=function(){return(null==I.$$s?this:I.$$s).$roll_once(L)}).$$s=j,I.$$arity=0,I))},y.$$arity=2),e.def(A,"$roll_sum",_=function(h,L){return this.$roll_barabara(h,L).$sum()},_.$$arity=2),e.def(A,"$roll_once",x=function(h){var I,j=G;return B(B(I=P(h,0))?I:K(h,t(f,"UPPER_LIMIT_DICE_SIDES")))?0:(j=this.$rand_inner(h),this.$push_to_detail("normal",h,j),j)},x.$$arity=1),e.def(A,"$roll_index",C=function(h){return r(this.$roll_once(h),1)},C.$$arity=1),e.def(A,"$roll_tens_d10",b=function(){var I,L=G;return(L=this.$rand_inner(10))["$=="](10)&&(L=0),I=z(L,10),this.$push_to_detail("tens_d10",10,I),I},b.$$arity=0),e.def(A,"$roll_d9",l=function(){var L;return L=r(this.$rand_inner(10),1),this.$push_to_detail("d9",10,L),L},l.$$arity=0),e.def(A,"$roll_d66",R=function(h){var L,o,j=G;return j=O(t(f,"Array"),"new",[2],((L=function(){return(null==L.$$s?this:L.$$s).$roll_once(6)}).$$s=this,L.$$arity=0,L)),o=h,n(t(f,"D66SortType"),"ASC")["$==="](o)?j["$sort!"]():n(t(f,"D66SortType"),"DESC")["$==="](o)&&j["$sort!"]()["$reverse!"](),J(z(j["$[]"](0),10),j["$[]"](1))},R.$$arity=1),A.$private(),e.def(A,"$rand_inner",F=function(h){var I,L=this;return B(function(a,D){return"number"==typeof a&&"number"==typeof D?a>=D:a["$>="](D)}(L.rand_results.$size(),t(f,"UPPER_LIMIT_RANDS")))&&L.$raise(t(f,"TooManyRandsError")),I=L.$random(h),L.rand_results["$<<"]([I,h]),I},F.$$arity=1),e.def(A,"$random",re=function(h){return J(t(f,"Kernel").$rand(h),1)},re.$$arity=1),e.def(A,"$push_to_detail",H=function(h,L,I){var o;return o=t(f,"DetailedRandResult").$new(h,L,I),this.detailed_rand_results.$push(o)},H.$$arity=3),void function(g,X,q){[s(g,X,"TooManyRandsError")].concat(q)}(E[0],t(E,"StandardError"),E)},Opal.modules["bcdice/dice_table/roll_result"]=function(e){var n,B,E,q,A,f,i,g,X,a,p,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.truthy;return n=J,B=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(B),g=ne(a[0],null,"RollResult"),X=[g].concat(E),g.$$prototype.table_name=g.$$prototype.value=g.$$prototype.body=P,e.def(g,"$initialize",q=function(_,x,C){var b=this;return b.table_name=_,b.value=x,b.body=C},q.$$arity=3),g.$attr_reader("table_name"),g.$attr_reader("value"),g.$attr_reader("body"),e.def(g,"$to_s",A=function(){var _=this;return _.table_name+"("+_.value+") \uff1e "+_.body},A.$$arity=0),e.def(g,"$last_body",f=function(){var _=this;return c(_.body["$is_a?"](z(X,"RollResult")))?_.body.$last_body():_.body},f.$$arity=0),void e.def(g,"$empty?",i=function(){return!1},i.$$arity=0)},Opal.modules["bcdice/dice_table/chain_table"]=function(e){var t,O,g,A,f,X,q,D,s,P=[],r=e.nil,u=e.$$,ne=e.module,c=e.klass,G=e.truthy;return t=P,O=s=[ne(P[0],"BCDice")].concat(t),g=D=[ne(s[0],"DiceTable")].concat(O),X=c(D[0],null,"ChainTable"),q=[X].concat(g),X.$$prototype.times=X.$$prototype.sides=X.$$prototype.items=X.$$prototype.name=r,e.def(X,"$initialize",A=function(y,_,x){var C=this,b=r;return C.name=y,C.items=x.$freeze(),b=/(\d+)D(\d+)/i.$match(_),G(b)||C.$raise(u(q,"ArgumentError"),"Unexpected table type: "+_),C.times=b["$[]"](1).$to_i(),C.sides=b["$[]"](2).$to_i()},A.$$arity=3),void e.def(X,"$roll",f=function(y){var x,C,_=this,b=r;return C=function(n,t){return"number"==typeof n&&"number"==typeof t?n-t:n["$-"](t)}(x=y.$roll_sum(_.times,_.sides),_.times),b=_.items["$[]"](C),G(b["$respond_to?"]("roll"))&&(b=b.$roll(y)),u(q,"RollResult").$new(_.name,x,b)},f.$$arity=1)},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(e){function P(p,s){return"number"==typeof p&&"number"==typeof s?p-s:p["$-"](s)}var s,D,q,i,y,_,A,f,E,O,z=[],u=e.nil,c=e.$$,G=e.module,n=e.klass,t=e.hash2;return s=z,D=O=[G(z[0],"BCDice")].concat(s),q=E=[G(O[0],"DiceTable")].concat(D),A=n(E[0],null,"D66GridTable"),f=[A].concat(q),A.$$prototype.name=A.$$prototype.items=u,e.defs(A,"$from_i18n",i=function(C,b){var R=u;return R=c(f,"I18n").$t(C,t(["locale","raise"],{locale:b,raise:!0})),this.$new(R["$[]"]("name"),R["$[]"]("items"))},i.$$arity=2),e.def(A,"$initialize",y=function(C,b){return this.name=C,this.items=b.$freeze()},y.$$arity=2),void e.def(A,"$roll",_=function(C){var l,R,F,re,H;return l=C.$roll_once(6),R=C.$roll_once(6),F=function(p,s){return"number"==typeof p&&"number"==typeof s?p+s:p["$+"](s)}(function(p,s){return"number"==typeof p?10*p:p["$*"](10)}(l),R),re=P(l,1),H=P(R,1),c(f,"RollResult").$new(this.name,F,this.items["$[]"](re)["$[]"](H))},_.$$arity=1)},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(e){var n,B,E,q,A,g,X,a,p,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),n=J,B=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(B),g=ne(a[0],z(a,"D66GridTable"),"D66HalfGridTable"),X=[g].concat(E),e.defs(g,"$from_i18n",q=function(i,y){var x=P;return x=z(X,"I18n").$t(i,c(["locale","raise"],{locale:y,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2_3"),x["$[]"]("items_4_5_6"))},q.$$arity=2),void e.def(g,"$initialize",A=function(i,y,_){return this.name=i,this.items=[y,y,y,_,_,_].$freeze()},A.$$arity=3)},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(e){var n,B,E,q,A,g,X,a,p,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.hash2;return e.top.$require("bcdice/dice_table/d66_grid_table"),n=J,B=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(B),g=ne(a[0],z(a,"D66GridTable"),"D66OneThirdTable"),X=[g].concat(E),e.defs(g,"$from_i18n",q=function(i,y){var x=P;return x=z(X,"I18n").$t(i,c(["locale","raise"],{locale:y,raise:!0})),this.$new(x["$[]"]("name"),x["$[]"]("items_1_2"),x["$[]"]("items_3_4"),x["$[]"]("items_5_6"))},q.$$arity=2),void e.def(g,"$initialize",A=function(i,y,_,x){return this.name=i,this.items=[y,y,_,_,x,x].$freeze()},A.$$arity=4)},Opal.modules["bcdice/dice_table/d66_table"]=function(e){var s,D,q,i,y,_,A,f,E,O,r=[],z=e.nil,u=e.$$$,ne=e.$$,c=e.module,G=e.klass,n=e.hash2,t=e.truthy;return s=r,D=O=[c(r[0],"BCDice")].concat(s),q=E=[c(O[0],"DiceTable")].concat(D),A=G(E[0],null,"D66Table"),f=[A].concat(q),A.$$prototype.sort_type=A.$$prototype.items=A.$$prototype.name=z,e.defs(A,"$from_i18n",i=function(C,b){var F,R=z;return R=ne(f,"I18n").$t(C,n(["locale"],{locale:b})),F=ne(f,"D66SortType").$const_get(R["$[]"]("d66_sort_type")),this.$new(R["$[]"]("name"),F,R["$[]"]("items"))},i.$$arity=2),e.def(A,"$initialize",y=function(C,b,l){var R=this;return R.name=C,R.sort_type=b,R.items=l.$freeze()},y.$$arity=3),void e.def(A,"$roll",_=function(C){var R,H,b=this,l=z,F=z,re=z;return l=C.$roll_barabara(2,6),R=b.sort_type,u(ne(f,"D66SortType"),"ASC")["$==="](R)?l["$sort!"]():u(ne(f,"D66SortType"),"DESC")["$==="](R)&&l["$sort!"]()["$reverse!"](),F=function(p,s){return"number"==typeof p&&"number"==typeof s?p+s:p["$+"](s)}(function(p,s){return"number"==typeof p?10*p:p["$*"](10)}(l["$[]"](0)),l["$[]"](1)),re=t(H=b.items["$[]"](F))?H:b.items["$[]"](F.$to_s()),t(re["$respond_to?"]("roll"))&&(re=re.$roll(C)),ne(f,"RollResult").$new(b.name,F,re)},_.$$arity=1)},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(e){function K(B,O){return"number"==typeof B&&"number"==typeof O?B+O:B["$+"](O)}var O,f,_,i,E,X,D,z=[],u=e.nil,c=e.$$,G=e.module,n=e.klass,t=e.hash2,p=e.send,s=e.send2;return e.top.$require("bcdice/dice_table/d66_table"),O=z,E=D=[G(z[0],"BCDice")].concat(O),f=X=[G(D[0],"DiceTable")].concat(E),[i=n(X[0],c(X,"D66Table"),"D66LeftRangeTable")].concat(f),void e.def(i,"$initialize",_=function(C,b,l){var R,T,H=this;return _.$$p&&(_.$$p=null),T=t([],{}),p(l,"each",[],((R=function(h){function L(I){return h.apply(this,arguments)}return L.toString=function(){return h.toString()},L}(function(h){var I,o,te,L=null==R.$$s?this:R.$$s;return null==h&&(h=u),I=e.to_ary(h),te=null==I[1]?u:I[1],p(null==I[0]?u:I[0],"each",[],((o=function(ue){var Re;return null==ue&&(ue=u),p(te,"each_with_index",[],((Re=function(Ee,fe){var V,M;return null==Ee&&(Ee=u),null==fe&&(fe=u),V=K(function(B,O){return"number"==typeof B?10*B:B["$*"](10)}(ue),K(fe,1)),p(T,"[]=",e.to_a(M=[V,Ee])),M[function(B,O){return"number"==typeof B?B-1:B["$-"](1)}(M.length)]}).$$s=null==o.$$s?this:o.$$s,Re.$$arity=2,Re))}).$$s=L,o.$$arity=1,o))})).$$s=H,R.$$arity=1,R)),s(H,e.find_super_dispatcher(H,"initialize",_,!1,!0),"initialize",[C,b,T],null)},_.$$arity=3)},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(e){var s,D,q,i,y,A,f,E,O,z=[],u=e.nil,c=e.$$,G=e.module,n=e.klass,t=e.truthy;return s=z,D=O=[G(z[0],"BCDice")].concat(s),q=E=[G(O[0],"DiceTable")].concat(D),A=n(E[0],null,"D66ParityTable"),f=[A].concat(q),A.$$prototype.odd=A.$$prototype.even=A.$$prototype.name=u,e.def(A,"$initialize",i=function(x,C,b){var l=this;return l.name=x,l.odd=C.$freeze(),l.even=b.$freeze()},i.$$arity=3),void e.def(A,"$roll",y=function(x){var l,F,re,C=this,b=u;return b=x.$roll_once(6),l=x.$roll_once(6),F=(t(b["$odd?"]())?C.odd:C.even)["$[]"](function(p,s){return"number"==typeof p?p-1:p["$-"](1)}(l)),re=function(p,s){return"number"==typeof p&&"number"==typeof s?p+s:p["$+"](s)}(function(p,s){return"number"==typeof p?10*p:p["$*"](10)}(b),l),c(f,"RollResult").$new(C.name,re,F)},y.$$arity=1)},Opal.modules["bcdice/dice_table/d66_range_table"]=function(e){var p,a,X,f,i,q,A,W,B,r=[],z=e.nil,ne=e.$$,c=e.module,G=e.klass,n=e.send;return p=r,a=B=[c(r[0],"BCDice")].concat(p),X=W=[c(B[0],"DiceTable")].concat(a),q=G(W[0],null,"D66RangeTable"),A=[q].concat(X),q.$$prototype.items=q.$$prototype.name=z,e.def(q,"$initialize",f=function(_,x){return this.name=_,this.items=x.$freeze()},f.$$arity=2),void e.def(q,"$roll",i=function(_){var x,b,l,R,t,C=this,F=z;return b=_.$roll_once(6),l=_.$roll_once(6),R=function(t,p){return"number"==typeof t&&"number"==typeof p?t+p:t["$+"](p)}("number"==typeof(t=b)?10*t:t["$*"](10),l),F=n(C.items,"find",[],((x=function(H){return null==H&&(H=z),H["$[]"](0)["$include?"](R)}).$$s=C,x.$$arity=1,x)),ne(A,"RollResult").$new(C.name,R,F["$[]"](1))},i.$$arity=1)},Opal.modules["bcdice/dice_table/range_table"]=function(e){var B,W,A,y,_,x,C,b,l,R,F,re,f,i,g,a,z=[],u=e.nil,c=e.$$,G=e.module,n=e.klass,t=e.send,p=e.truthy;return B=z,W=a=[G(z[0],"BCDice")].concat(B),A=g=[G(a[0],"DiceTable")].concat(W),f=n(g[0],null,"RangeTable"),i=[f].concat(A),f.$$prototype.name=f.$$prototype.items=f.$$prototype.num_of_dice=f.$$prototype.num_of_sides=f.$$prototype.formatter=u,e.const_set(i[0],"RollResult",t(c(i,"Struct"),"new",["sum","values","content","formatted"],((y=function(){return(null==y.$$s?this:y.$$s).$alias_method("to_s","formatted")}).$$s=f,y.$$arity=0,y))),e.const_set(i[0],"Item",c(i,"Struct").$new("range","content")),e.const_set(i[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),e.const_set(i[0],"DEFAULT_FORMATTER",t(f,"lambda",[],($$2=function(H){function T(h,L){return H.apply(this,arguments)}return T.toString=function(){return H.toString()},T}(function(H,T){return null==$$2.$$s||$$2,null==H&&(H=u),null==T&&(T=u),H.$name()+"("+T.$sum()+") \uff1e "+T.$content()}),$$2.$$s=f,$$2.$$arity=2,$$2))),f.$attr_reader("name"),f.$attr_reader("num_of_dice"),f.$attr_reader("num_of_sides"),e.def(f,"$initialize",_=function(T,h,L){var w,I=_.$$p,j=I||u,o=this,te=u;return I&&(_.$$p=null),I&&(_.$$p=null),o.name=T.$freeze(),o.formatter=p(w=j)?w:c(i,"DEFAULT_FORMATTER"),te=c(i,"DICE_ROLL_METHOD_RE").$match(h),p(te)||o.$raise(c(i,"ArgumentError"),o.name+": invalid dice roll method: "+h),o.num_of_dice=te["$[]"](1).$to_i(),o.num_of_sides=te["$[]"](2).$to_i(),o.$store(L)},_.$$arity=3),e.def(f,"$fetch",x=function(T){var h,I,L=this;return I=t(L.items,"find",[],((h=function(o){return null==o&&(o=u),o.$range()["$include?"](T)}).$$s=L,h.$$arity=1,h)),p(I)||L.$raise(c(i,"RangeError"),L.name+": value is out of range: "+T),I},x.$$arity=1),e.def(f,"$roll",C=function(T){var I,j,o,s,h=this,L=u;return I=(L=T.$roll_barabara(h.num_of_dice,h.num_of_sides)).$sum(),j=c(i,"RollResult").$new(I,L,h.$fetch(I).$content()),o=[h.formatter["$[]"](h,j)],t(j,"formatted=",e.to_a(o)),"number"==typeof(s=o.length)||s["$-"](1),j},C.$$arity=1),f.$private(),e.def(f,"$store",b=function(T){var h,L,I,o,w,j=this;return o=t(T,"map",[],((h=function(se,ue){return null==se&&(se=u),null==ue&&(ue=u),[(null==h.$$s?this:h.$$s).$coerce_to_int_range(se),ue]}).$$s=j,h.$$arity=2,h)),w=t(o,"sort_by",[],((L=function(se,ue){return null==se&&(se=u),null==ue&&(ue=u),se.$min()}).$$s=j,L.$$arity=2,L)),j.$assert_min_sum_is_covered(w),j.$assert_max_sum_is_covered(w),j.$assert_no_gap_or_overlap_in_ranges(w),j.items=t(w,"map",[],(I=function(se,ue){return null==se&&(se=u),null==ue&&(ue=u),c(i,"Item").$new(se,ue.$freeze()).$freeze()},I.$$s=j,I.$$arity=2,I)).$freeze(),j},b.$$arity=1),e.def(f,"$coerce_to_int_range",l=function(T){var L,I=u;return L=T,c(i,"Integer")["$==="](L)?c(i,"Range").$new(T,T):c(i,"Range")["$==="](L)&&p(p(I=T.$begin()["$is_a?"](c(i,"Integer")))?T.$end()["$is_a?"](c(i,"Integer")):I)?T:this.$raise(c(i,"TypeError"),this.name+": "+T+" ("+T.$class()+") must be an Integer or a Range with Integers ")},l.$$arity=1),e.def(f,"$assert_min_sum_is_covered",R=function(T){var L,h=this,I=u;return L=h.num_of_dice,I=T.$first()["$[]"](0),p(I["$include?"](L))||h.$raise(c(i,"RangeError"),h.name+": min value ("+L+") is not covered: "+I),h},R.$$arity=1),e.def(f,"$assert_max_sum_is_covered",F=function(T){var L,h=this,I=u;return L=function(s,B){return"number"==typeof s&&"number"==typeof B?s*B:s["$*"](B)}(h.num_of_dice,h.num_of_sides),I=T.$last()["$[]"](0),p(I["$include?"](L))||h.$raise(c(i,"RangeError"),h.name+": max value ("+L+") is not covered: "+I),h},F.$$arity=1),void e.def(f,"$assert_no_gap_or_overlap_in_ranges",re=function(T){var h;return t(T,"each_cons",[2],((h=function(j,o){var ue,Te,s,w=null==h.$$s?this:h.$$s,te=u,se=u;return null==w.name&&(w.name=u),null==j&&(j=u),null==o&&(o=u),te=j["$[]"](0),se=o["$[]"](0),Te="number"==typeof(s=ue=te.$max())?s+1:s["$+"](1),p(se["$include?"](ue))&&w.$raise(c(i,"RangeError"),w.name+": Range overlap: "+te+" and "+se),p(se["$include?"](Te))?u:w.$raise(c(i,"RangeError"),w.name+": Range gap: "+te+" and "+se)}).$$s=this,h.$$arity=2,h)),this},re.$$arity=1)},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(e){var t,O,g,i,x,C,b,y,_,q,D,s,P=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.module,c=e.klass,G=e.send;return t=P,O=s=[ne(P[0],"BCDice")].concat(t),g=D=[ne(s[0],"DiceTable")].concat(O),i=q=[c(D[0],null,"SaiFicSkillTable")].concat(g),y=c(q[0],null,"Category"),_=[y].concat(i),y.$$prototype.name=r,e.def(y,"$initialize",x=function(R,F,re,H){var T,h=this;return h.name=R,h.skills=G(F.$map(),"with_index",[2],((T=function(L){function I(j,o){return L.apply(this,arguments)}return I.toString=function(){return L.toString()},I}(function(L,I){return null==L&&(L=r),null==I&&(I=r),z(u(_,"SaiFicSkillTable"),"Skill").$new(R,L,re,I,H)})).$$s=h,T.$$arity=2,T)),h.dice=re},x.$$arity=4),e.def(y,"$roll",C=function(R){return this.$skills()["$[]"](function(n,t){return"number"==typeof n?n-2:n["$-"](2)}(R.$roll_sum(2,6)))},C.$$arity=1),e.def(y,"$to_s",b=function(){return this.name},b.$$arity=0),void y.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(e){var n,B,f,_,x,i,E,X,a,p,J=[],P=e.nil,u=e.module,ne=e.klass,c=e.hash2;return n=J,B=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"DiceTable")].concat(B),f=X=[ne(a[0],null,"SaiFicSkillTable")].concat(E),[i=ne(X[0],null,"Skill")].concat(f),i.$$prototype.s_format=i.$$prototype.category_dice=i.$$prototype.row_dice=i.$$prototype.category_name=i.$$prototype.name=P,e.def(i,"$initialize",_=function(b,l,R,F,re){var H=this;return H.category_name=b,H.name=l,H.category_dice=R,H.row_dice=F,H.s_format=re},_.$$arity=5),e.def(i,"$to_s",x=function(){var b=this;return b.$format(b.s_format,c(["category_dice","row_dice","category_name","skill_name"],{category_dice:b.category_dice,row_dice:b.row_dice,category_name:b.category_name,skill_name:b.name}))},x.$$arity=0),void i.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(e){var O,E,f,_,x,C,b,l,R,F,i,y,X,D,P=e.top,r=[],z=e.nil,u=e.$$$,ne=e.$$,c=e.module,G=e.klass,n=e.hash2,t=e.send,s=e.truthy;return P.$require("bcdice/dice_table/sai_fic_skill_table/category"),P.$require("bcdice/dice_table/sai_fic_skill_table/skill"),O=r,E=D=[c(r[0],"BCDice")].concat(O),f=X=[c(D[0],"DiceTable")].concat(E),i=G(X[0],null,"SaiFicSkillTable"),y=[i].concat(f),i.$$prototype.rtt=i.$$prototype.rtt_format=i.$$prototype.rct=i.$$prototype.rct_format=i.$$prototype.rttn=i.$$prototype.rttn_format=i.$$prototype.categories=z,e.defs(i,"$from_i18n",_=function(H,T,h){var L,I,j,o,ue,se=z;if(null==h)h=n([],{});else if(!h.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(L=h.$$smap.rtt)&&(L=z),null==(I=h.$$smap.rct)&&(I=z),null==(j=h.$$smap.rttn)&&(j=z),ue=(se=ne(y,"I18n").$t("RTT",n(["locale","raise","default"],{locale:T,raise:!1,default:n([],{})})).$merge(ne(y,"I18n").$t(H,n(["locale","raise"],{locale:T,raise:!0}))))["$[]"]("items"),se=t(se,"select",[],((o=function(Te){function Re(De,Ee){return Te.apply(this,arguments)}return Re.toString=function(){return Te.toString()},Re}(function(Te,Re){return null==Te&&(Te=z),null==Re&&(Re=z),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](Te)})).$$s=this,o.$$arity=2,o)),this.$new(ue,e.to_hash(se).$merge(n(["rtt","rct","rttn"],{rtt:L,rct:I,rttn:j})))},_.$$arity=-3),e.const_set(y[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),e.const_set(y[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),e.const_set(y[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),e.const_set(y[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),e.def(i,"$initialize",x=function(H,T){var h,L,I,j,o,w,te,se,ue=this;if(null==T)T=n([],{});else if(!T.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(h=T.$$smap.rtt)&&(h=z),null==(L=T.$$smap.rct)&&(L=z),null==(I=T.$$smap.rttn)&&(I=z),null==(j=T.$$smap.rtt_format)&&(j=ne(y,"DEFAULT_RTT")),null==(o=T.$$smap.rct_format)&&(o=ne(y,"DEFAULT_RCT")),null==(w=T.$$smap.rttn_format)&&(w=ne(y,"DEFAULT_RTTN")),null==(te=T.$$smap.s_format)&&(te=ne(y,"DEFAULT_S")),ue.categories=t(H.$map(),"with_index",[1],((se=function(Re,De){var fe,V,M;return null==Re&&(Re=z),null==De&&(De=z),V=null==(fe=e.to_ary(Re))[0]?z:fe[0],M=null==fe[1]?z:fe[1],u(ne(y,"SaiFicSkillTable"),"Category").$new(V,M,De,te)}).$$s=ue,se.$$arity=2,se.$$has_top_level_mlhs_arg=!0,se)),ue.rtt=h,ue.rct=L,ue.rttn=I.$to_a(),ue.rtt_format=j,ue.rct_format=o,ue.rttn_format=w},x.$$arity=-2),e.const_set(y[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),i.$attr_reader("categories"),e.def(i,"$roll_command",C=function(H,T){var L,h=this,I=z,j=z,o=z;return s(["RTT",h.rtt]["$include?"](L=T))?h.$format_skill(h.rtt_format,h.$roll_skill(H)):s(["RCT",h.rct]["$include?"](L))?(I=h.$roll_category(H),h.$format(h.rct_format,n(["category_dice","category_name"],{category_dice:I.$dice(),category_name:I.$name()}))):s(s(j=o=ne(y,"RTTN").$index(L))?j:o=h.rttn.$index(L))?h.$format_skill(h.rttn_format,h.categories["$[]"](o).$roll(H)):z},C.$$arity=2),e.def(i,"$roll_category",b=function(H){return this.categories["$[]"](function(B,O){return"number"==typeof B?B-1:B["$-"](1)}(H.$roll_once(6)))},b.$$arity=1),e.def(i,"$roll_skill",l=function(H){return this.$roll_category(H).$roll(H)},l.$$arity=1),e.def(i,"$prefixes",R=function(){var H=this;return function(B,O){return"number"==typeof B&&"number"==typeof O?B+O:B["$+"](O)}(["RTT[1-6]?","RCT",H.rtt,H.rct],H.rttn).$compact()},R.$$arity=0),i.$private(),void e.def(i,"$format_skill",F=function(H,T){return this.$format(H,n(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:T.$category_dice(),row_dice:T.$row_dice(),category_name:T.$category_name(),skill_name:T.$name(),text:T.$to_s()}))},F.$$arity=2)},Opal.modules["bcdice/dice_table/table"]=function(e){var p,a,X,f,i,y,_,q,A,W,B,P=[],r=e.nil,u=e.$$,ne=e.module,c=e.klass,G=e.hash2,n=e.truthy;return p=P,a=B=[ne(P[0],"BCDice")].concat(p),X=W=[ne(B[0],"DiceTable")].concat(a),q=c(W[0],null,"Table"),A=[q].concat(X),q.$$prototype.times=q.$$prototype.sides=q.$$prototype.name=q.$$prototype.items=r,e.defs(q,"$from_i18n",f=function(C,b){var R=r;return R=u(A,"I18n").$t(C,G(["locale"],{locale:b})),this.$new(R["$[]"]("name"),R["$[]"]("type"),R["$[]"]("items"))},f.$$arity=2),e.def(q,"$initialize",i=function(C,b,l){var R=this,F=r;return R.name=C,R.items=l.$freeze(),F=/(\d+)D(\d+)/i.$match(b),n(F)||R.$raise(u(A,"ArgumentError"),"Unexpected table type: "+b),R.times=F["$[]"](1).$to_i(),R.sides=F["$[]"](2).$to_i()},i.$$arity=3),e.def(q,"$roll",y=function(C){var l,b=this;return l=C.$roll_sum(b.times,b.sides),b.$choice(l)},y.$$arity=1),void e.def(q,"$choice",_=function(C){var l,b=this;return l=function(t,p){return"number"==typeof t&&"number"==typeof p?t-p:t["$-"](p)}(C,b.times),u(A,"RollResult").$new(b.name,C,b.items["$[]"](l))},_.$$arity=1)},Opal.modules["bcdice/dice_table"]=function(e){var K=e.top;return K.$require("bcdice/dice_table/roll_result"),K.$require("bcdice/dice_table/chain_table"),K.$require("bcdice/dice_table/d66_grid_table"),K.$require("bcdice/dice_table/d66_half_grid_table"),K.$require("bcdice/dice_table/d66_one_third_table"),K.$require("bcdice/dice_table/d66_left_range_table"),K.$require("bcdice/dice_table/d66_parity_table"),K.$require("bcdice/dice_table/d66_range_table"),K.$require("bcdice/dice_table/d66_table"),K.$require("bcdice/dice_table/range_table"),K.$require("bcdice/dice_table/sai_fic_skill_table"),K.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(e){var c,p,B,n,J=[],u=e.module;return c=J,p=n=[u(J[0],"BCDice")].concat(c),B=[u(n[0],"D66SortType")].concat(p),e.const_set(B[0],"NO_SORT","no_sort"),e.const_set(B[0],"ASC","asc"),e.const_set(B[0],"DESC","desc"),void function(t,p){var B=[u(t,"RoundType")].concat(p);e.const_set(B[0],"CEIL","ceil"),e.const_set(B[0],"FLOOR","floor"),e.const_set(B[0],"ROUND","round")}(n[0],n)},Opal.modules["bcdice/translate"]=function(e){var n,B,D,O,a,p,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.hash2;return n=J,B=p=[u(J[0],"BCDice")].concat(n),O=u(p[0],"Translate"),a=[O].concat(B),void e.def(O,"$translate",D=function(E,g){var X,q=this;if(null==q.locale&&(q.locale=P),null==g)g=ne([],{});else if(!g.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return X=e.kwrestargs(g,{}),z(a,"I18n").$translate(E,ne(["locale","raise"],{locale:q.locale,raise:!0}).$merge(e.to_hash(X)))},D.$$arity=-2)},Opal.modules["bcdice/result"]=function(e){function K(n,t){return"number"==typeof n&&"number"==typeof t?n-t:n["$-"](t)}var t,y,C,b,l,R,F,a,E,g,X,q,A,f,i,D,W,s,P=[],r=e.nil,c=e.klass,G=e.send;return t=P,a=s=[(0,e.module)(P[0],"BCDice")].concat(t),W=[D=c(s[0],null,"Result")].concat(a),D.$$prototype.secret=D.$$prototype.success=D.$$prototype.failure=D.$$prototype.critical=D.$$prototype.fumble=r,[y=e.get_singleton_class(D)].concat(W),e.def(y,"$success",C=function(H){var T;return G(this.$new(),"tap",[],((T=function(L){function I(j){return L.apply(this,arguments)}return I.toString=function(){return L.toString()},I}(function(L){var j=r;return null==L&&(L=r),G(L,"text=",e.to_a(j=[H])),K(j.length,1),G(L,"success=",e.to_a(j=[!0])),j[K(j.length,1)]})).$$s=this,T.$$arity=1,T))},C.$$arity=1),e.def(y,"$failure",b=function(H){var T;return G(this.$new(),"tap",[],((T=function(I){var o=r;return null==I&&(I=r),G(I,"text=",e.to_a(o=[H])),K(o.length,1),G(I,"failure=",e.to_a(o=[!0])),o[K(o.length,1)]}).$$s=this,T.$$arity=1,T))},b.$$arity=1),e.def(y,"$critical",l=function(H){var T;return G(this.$new(),"tap",[],((T=function(I){var o=r;return null==I&&(I=r),G(I,"text=",e.to_a(o=[H])),K(o.length,1),G(I,"critical=",e.to_a(o=[!0])),K(o.length,1),G(I,"success=",e.to_a(o=[!0])),o[K(o.length,1)]}).$$s=this,T.$$arity=1,T))},l.$$arity=1),e.def(y,"$fumble",R=function(H){var T;return G(this.$new(),"tap",[],((T=function(I){var o=r;return null==I&&(I=r),G(I,"text=",e.to_a(o=[H])),K(o.length,1),G(I,"fumble=",e.to_a(o=[!0])),K(o.length,1),G(I,"failure=",e.to_a(o=[!0])),o[K(o.length,1)]}).$$s=this,T.$$arity=1,T))},R.$$arity=1),e.def(y,"$nothing",F=function(){return"nothing"},F.$$arity=0),e.def(D,"$initialize",E=function(_){var x=this;return null==_&&(_=r),x.text=_,x.rands=r,x.detailed_rands=r,x.secret=!1,x.success=!1,x.failure=!1,x.critical=!1,x.fumble=!1},E.$$arity=-1),D.$attr_accessor("text","rands","detailed_rands"),D.$attr_writer("secret","success","failure","critical","fumble"),e.def(D,"$secret?",g=function(){return this.secret},g.$$arity=0),e.def(D,"$success?",X=function(){return this.success},X.$$arity=0),e.def(D,"$failure?",q=function(){return this.failure},q.$$arity=0),e.def(D,"$critical?",A=function(){return this.critical},A.$$arity=0),e.def(D,"$fumble?",f=function(){return this.fumble},f.$$arity=0),void e.def(D,"$condition=",i=function(_){return this.success=_,this.failure=_["$!"]()},i.$$arity=1)},Opal.modules["racc/parser"]=function(e){function K(E,g){return"number"==typeof E&&"number"==typeof g?E<g:E["$<"](g)}function J(E,g){return"number"==typeof E&&"number"==typeof g?E-g:E["$-"](g)}function P(E,g){return"number"==typeof E&&"number"==typeof g?E+g:E["$+"](g)}function r(E,g){return"number"==typeof E&&"number"==typeof g?E>=g:E["$>="](g)}function z(E,g){return"number"==typeof E&&"number"==typeof g?E>g:E["$>"](g)}function u(E,g){return"number"==typeof E&&"number"==typeof g?E<=g:E["$<="](g)}var A,f,i,g,q,n=[],t=e.nil,p=e.$$$,s=e.$$,B=e.module,O=e.klass,a=e.truthy,D=e.gvars,W=e.send;return g=n,A=(q=[B(n[0],"Racc")].concat(g))[0],f=s(q,"StandardError"),i=q,[O(A,f,"ParseError")].concat(i),a(p("::","ParseError","skip_raise")?"constant":t)||e.const_set(n[0],"ParseError",p(s(n,"Racc"),"ParseError")),function(E,g){var y,C,b,l,R,F,re,H,T,h,L,I,j,o,w,te,se,ue,Te,Re,De,Ee,fe,ae,V,_,x,q=[B(E,"Racc")].concat(g);a(s(q,"Racc_No_Extensions","skip_raise")?"constant":t)||e.const_set(q[0],"Racc_No_Extensions",!1),y=q,_=O(q[0],null,"Parser"),x=[_].concat(y),_.$$prototype.yydebug=_.$$prototype.racc_debug_out=_.$$prototype.racc_error_status=_.$$prototype.racc_t=_.$$prototype.racc_vstack=_.$$prototype.racc_val=_.$$prototype.racc_state=_.$$prototype.racc_tstack=t,e.const_set(x[0],"Racc_Runtime_Version","1.4.6"),e.const_set(x[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),e.const_set(x[0],"Racc_Runtime_Core_Version_R","1.4.6"),e.const_set(x[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),e.const_set(x[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),e.const_set(x[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),e.const_set(x[0],"Racc_Runtime_Core_Version",s(x,"Racc_Runtime_Core_Version_R")),e.const_set(x[0],"Racc_Runtime_Core_Revision",s(x,"Racc_Runtime_Core_Revision_R")),e.const_set(x[0],"Racc_Runtime_Type","ruby"),e.defs(s(x,"Parser"),"$racc_runtime_type",C=function(){return s(x,"Racc_Runtime_Type")},C.$$arity=0),e.def(_,"$_racc_setup",b=function(){var k,S,$=this,v=t,d=t,m=t;return null==D.stderr&&(D.stderr=t),a(p($.$class(),"Racc_debug_parser"))||($.yydebug=!1),a(null!=(k=$.yydebug)&&k!==t?"instance-variable":t)||($.yydebug=!1),a($.yydebug)&&(a(null!=(S=$.racc_debug_out)&&S!==t?"instance-variable":t)||($.racc_debug_out=D.stderr),$.racc_debug_out=a(v=$.racc_debug_out)?v:D.stderr),d=p($.$class(),"Racc_arg"),a(K(d.$size(),14))&&(W(d,"[]=",e.to_a(m=[13,!0])),J(m.length,1)),d},b.$$arity=0),e.def(_,"$_racc_init_sysvars",l=function(){var k=this;return k.racc_state=[0],k.racc_tstack=[],k.racc_vstack=[],k.racc_t=t,k.racc_val=t,k.racc_read_next=!0,k.racc_user_yyerror=!1,k.racc_error_status=0},l.$$arity=0),e.def(_,"$do_parse",R=function(){return this.$__send__(s(x,"Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)},R.$$arity=0),e.def(_,"$next_token",F=function(){return this.$raise(s(x,"NotImplementedError"),this.$class()+"#next_token is not defined")},F.$$arity=0),e.def(_,"$_racc_do_parse_rb",re=function(k,S){var $,d,m=this,N=t,Y=t,ee=t,oe=t,ie=t,ce=t,ve=t,be=t;return $=e.to_ary(k),N=null==$[0]?t:$[0],Y=null==$[1]?t:$[1],ee=null==$[2]?t:$[2],oe=null==$[3]?t:$[3],ie=null==$[10]?t:$[10],m.$_racc_init_sysvars(),ce=ve=be=t,W(m,"catch",["racc_end_parse"],((d=function(){var Ae,Be,_e=null==d.$$s?this:d.$$s,Ce=t,He=t,Ie=t;for(null==_e.racc_state&&(_e.racc_state=t),null==_e.racc_read_next&&(_e.racc_read_next=t),null==_e.racc_t&&(_e.racc_t=t),null==_e.yydebug&&(_e.yydebug=t),null==_e.racc_val&&(_e.racc_val=t);a(!0);)for(a(be=oe["$[]"](_e.racc_state["$[]"](-1)))?(a(_e.racc_read_next)&&a(_e.racc_t["$!="](0))&&(Be=_e.$next_token(),Ae=e.to_ary(Be),ce=null==Ae[0]?t:Ae[0],_e.racc_val=null==Ae[1]?t:Ae[1],_e.racc_t=a(ce)?a(Ce=ie["$[]"](ce))?Ce:1:0,a(_e.yydebug)&&_e.$racc_read_token(_e.racc_t,ce,_e.racc_val),_e.racc_read_next=!1),be=P(be,_e.racc_t),a(a(He=a(Ie=r(be,0))?ve=N["$[]"](be):Ie)?Y["$[]"](be)["$=="](_e.racc_state["$[]"](-1)):He)||(ve=ee["$[]"](_e.racc_state["$[]"](-1)))):ve=ee["$[]"](_e.racc_state["$[]"](-1));a(ve=_e.$_racc_evalact(ve,k)););}).$$s=m,d.$$arity=0,d))},re.$$arity=2),e.def(_,"$yyparse",H=function(k,S){return this.$__send__(s(x,"Racc_YY_Parse_Method"),k,S,this.$_racc_setup(),!0)},H.$$arity=2),e.def(_,"$_racc_yyparse_rb",T=function(k,S,$,v){var d,N,Y=this,ee=t,oe=t,$e=t,ie=t,ve=t,be=t,he=t;return d=e.to_ary($),ee=null==d[0]?t:d[0],oe=null==d[1]?t:d[1],$e=null==d[2]?t:d[2],ie=null==d[3]?t:d[3],ve=null==d[10]?t:d[10],Y.$_racc_init_sysvars(),be=t,he=t,W(Y,"catch",["racc_end_parse"],((N=function(){var Ce,Se=null==N.$$s?this:N.$$s;for(null==Se.racc_state&&(Se.racc_state=t);!a(he=ie["$[]"](Se.racc_state["$[]"](-1)));)for(;a(be=Se.$_racc_evalact($e["$[]"](Se.racc_state["$[]"](-1)),$)););return W(k,"__send__",[S],((Ce=function(Ie,Pe){var Ge,Fe,ke=null==Ce.$$s?this:Ce.$$s,qe=t,Ue=t,je=t,Ke=t,de=t,Z=t,ye=t;for(null==ke.racc_t&&(ke.racc_t=t),null==ke.racc_state&&(ke.racc_state=t),null==ke.racc_read_next&&(ke.racc_read_next=t),null==Ie&&(Ie=t),null==Pe&&(Pe=t),ke.racc_t=a(Ie)?a(qe=ve["$[]"](Ie))?qe:1:0,ke.racc_val=Pe,ke.racc_read_next=!1,he=P(he,ke.racc_t),a(a(Ge=a(Fe=r(he,0))?be=ee["$[]"](he):Fe)?oe["$[]"](he)["$=="](ke.racc_state["$[]"](-1)):Ge)||(be=$e["$[]"](ke.racc_state["$[]"](-1)));a(be=ke.$_racc_evalact(be,$)););for(;a(a(Ue=a(je=(he=ie["$[]"](ke.racc_state["$[]"](-1)))["$!"]())?je:ke.racc_read_next["$!"]())?Ue:ke.racc_t["$=="](0));)for(a(a(Ke=a(de=a(Z=a(ye=he)?he=P(he,ke.racc_t):ye)?r(he,0):Z)?be=ee["$[]"](he):de)?oe["$[]"](he)["$=="](ke.racc_state["$[]"](-1)):Ke)||(be=$e["$[]"](ke.racc_state["$[]"](-1)));a(be=ke.$_racc_evalact(be,$)););}).$$s=Se,Ce.$$arity=2,Ce))}).$$s=Y,N.$$arity=0,N))},T.$$arity=4),e.def(_,"$_racc_evalact",h=function(k,S){var $,d,$e,ce,m=this,N=t,Y=t,oe=t,ie=t,ve=t,be=t,he=t,_e=t,Se=t,Ae=t;if(N=null==($=e.to_ary(S))[0]?t:$[0],Y=null==$[1]?t:$[1],oe=null==$[3]?t:$[3],$e=null==$[11]?t:$[11],ie=null==$[12]?t:$[12],a(a(ce=z(k,0))?K(k,$e):ce))a(z(m.racc_error_status,0))&&(m.racc_t["$=="](1)||(m.racc_error_status=J(m.racc_error_status,1))),m.racc_vstack.$push(m.racc_val),m.racc_state.$push(k),m.racc_read_next=!0,a(m.yydebug)&&(m.racc_tstack.$push(m.racc_t),m.$racc_shift(m.racc_t,m.racc_tstack,m.racc_vstack));else if(a(a(ve=K(k,0))?z(k,ie["$-@"]()):ve)){if(be=W(m,"catch",["racc_jump"],((d=function(){var Ce=null==d.$$s?this:d.$$s;return null==Ce.racc_state&&(Ce.racc_state=t),Ce.racc_state.$push(Ce.$_racc_do_reduce(S,k)),!1}).$$s=m,d.$$arity=0,d)),a(be)){if(1["$==="](he=be))return m.racc_user_yyerror=!0,ie["$-@"]();if(2["$==="](he))return $e;m.$raise("[Racc Bug] unknown jump code")}}else if(k["$=="]($e))a(m.yydebug)&&m.$racc_accept(),m.$throw("racc_end_parse",m.racc_vstack["$[]"](0));else{if(k["$=="](ie["$-@"]())){for((0)["$==="](he=m.racc_error_status)?a(S["$[]"](21))||m.$on_error(m.racc_t,m.racc_val,m.racc_vstack):3["$==="](he)&&(m.racc_t["$=="](0)&&m.$throw("racc_end_parse",t),m.racc_read_next=!0),m.racc_user_yyerror=!1,m.racc_error_status=3;a(!0)&&(!a(_e=oe["$[]"](m.racc_state["$[]"](-1)))||(_e=P(_e,1),!a(a(Se=a(Ae=r(_e,0))?k=N["$[]"](_e):Ae)?Y["$[]"](_e)["$=="](m.racc_state["$[]"](-1)):Se)));)a(u(m.racc_state.$size(),1))&&m.$throw("racc_end_parse",t),m.racc_state.$pop(),m.racc_vstack.$pop(),a(m.yydebug)&&(m.racc_tstack.$pop(),m.$racc_e_pop(m.racc_state,m.racc_tstack,m.racc_vstack));return k}m.$raise("[Racc Bug] unknown action "+k.$inspect())}return a(m.yydebug)&&m.$racc_next_state(m.racc_state["$[]"](-1),m.racc_state),t},h.$$arity=2),e.def(_,"$_racc_do_reduce",L=function(k,S){var $,$e,ce,Ae,Be,Ce,ke,d=this,N=t,Y=t,ee=t,oe=t,ie=t,ve=t,be=t,he=t,_e=t,Se=t,He=t,Ie=t,Pe=t,Ne=t,Me=t,qe=t;return N=null==($=e.to_ary(k))[4]?t:$[4],Y=null==$[5]?t:$[5],ee=null==$[6]?t:$[6],oe=null==$[7]?t:$[7],$e=null==$[8]?t:$[8],ie=null==$[9]?t:$[9],ce=null==$[13]?t:$[13],ve=d.racc_state,be=d.racc_vstack,he=d.racc_tstack,_e=function(E,g){return"number"==typeof E?-3*E:E["$*"](-3)}(S),Se=ie["$[]"](_e),Ae=ie["$[]"](P(_e,1)),Be=ie["$[]"](P(_e,2)),Ce=[],a(d.yydebug)&&(He=he["$[]"](Se["$-@"](),Se)),Ie=be["$[]"](Se["$-@"](),Se),a(d.yydebug)&&(Pe=[Se["$-@"](),Se,Ce],W(he,"[]=",e.to_a(Pe)),J(Pe.length,1)),Pe=[Se["$-@"](),Se,Ce],W(be,"[]=",e.to_a(Pe)),J(Pe.length,1),Pe=[Se["$-@"](),Se,Ce],W(ve,"[]=",e.to_a(Pe)),J(Pe.length,1),a(ce)?be.$push(d.$__send__(Be,Ie,be,Ie["$[]"](0))):be.$push(d.$__send__(Be,Ie,be)),he.$push(Ae),a(d.yydebug)&&d.$racc_reduce(He,Ae,he,be),ke=J(Ae,$e),a(_e=oe["$[]"](ke))&&(_e=P(_e,ve["$[]"](-1)),a(a(Ne=a(Me=r(_e,0))?qe=N["$[]"](_e):Me)?Y["$[]"](_e)["$=="](ke):Ne))?qe:ee["$[]"](ke)},L.$$arity=2),e.def(_,"$on_error",I=function(k,S,$){var d,v=this;return v.$raise(s(x,"ParseError"),v.$sprintf("\nparse error on value %s (%s)",S.$inspect(),a(d=v.$token_to_str(k))?d:"?"))},I.$$arity=3),e.def(_,"$yyerror",j=function(){return this.$throw("racc_jump",1)},j.$$arity=0),e.def(_,"$yyaccept",o=function(){return this.$throw("racc_jump",2)},o.$$arity=0),e.def(_,"$yyerrok",w=function(){return this.racc_error_status=0},w.$$arity=0),e.def(_,"$racc_read_token",te=function(k,S,$){var v=this;return v.racc_debug_out.$print("read    "),v.racc_debug_out.$print(S.$inspect(),"(",v.$racc_token2str(k),") "),v.racc_debug_out.$puts($.$inspect()),v.racc_debug_out.$puts()},te.$$arity=3),e.def(_,"$racc_shift",se=function(k,S,$){var v=this;return v.racc_debug_out.$puts("shift   "+v.$racc_token2str(k)),v.$racc_print_stacks(S,$),v.racc_debug_out.$puts()},se.$$arity=3),e.def(_,"$racc_reduce",ue=function(k,S,$,v){var d,m=this,N=t;return(N=m.racc_debug_out).$print("reduce "),a(k["$empty?"]())?N.$print(" <none>"):W(k,"each",[],((d=function(ee){return null==ee&&(ee=t),N.$print(" ",(null==d.$$s?this:d.$$s).$racc_token2str(ee))}).$$s=m,d.$$arity=1,d)),N.$puts(" --\x3e "+m.$racc_token2str(S)),m.$racc_print_stacks($,v),m.racc_debug_out.$puts()},ue.$$arity=4),e.def(_,"$racc_accept",Te=function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()},Te.$$arity=0),e.def(_,"$racc_e_pop",Re=function(k,S,$){var v=this;return v.racc_debug_out.$puts("error recovering mode: pop token"),v.$racc_print_states(k),v.$racc_print_stacks(S,$),v.racc_debug_out.$puts()},Re.$$arity=3),e.def(_,"$racc_next_state",De=function(k,S){var $=this;return $.racc_debug_out.$puts("goto    "+k),$.$racc_print_states(S),$.racc_debug_out.$puts()},De.$$arity=2),e.def(_,"$racc_print_stacks",Ee=function(k,S){var $,d=t;return(d=this.racc_debug_out).$print("        ["),W(k,"each_index",[],(($=function(N){return null==N&&(N=t),d.$print(" (",(null==$.$$s?this:$.$$s).$racc_token2str(k["$[]"](N))," ",S["$[]"](N).$inspect(),")")}).$$s=this,$.$$arity=1,$)),d.$puts(" ]")},Ee.$$arity=2),e.def(_,"$racc_print_states",fe=function(k){var S,v=t;return(v=this.racc_debug_out).$print("        ["),W(k,"each",[],((S=function(m){return null==m&&(m=t),v.$print(" ",m)}).$$s=this,S.$$arity=1,S)),v.$puts(" ]")},fe.$$arity=1),e.def(_,"$racc_token2str",ae=function(k){var $;return a($=p(this.$class(),"Racc_token_to_s_table")["$[]"](k))?$:this.$raise("[Racc Bug] can't convert token "+k+" to string")},ae.$$arity=1),e.def(_,"$token_to_str",V=function(k){return p(this.$class(),"Racc_token_to_s_table")["$[]"](k)},V.$$arity=1)}(n[0],n)},Opal.modules["bcdice/arithmetic/node"]=function(e){function K(n,t){return"number"==typeof n&&"number"==typeof t?n/t:n["$/"](t)}var t,O,E,q,A,f,_,x,C,b,l,R,i,y,X,D,s,P=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.module,c=e.klass,G=e.send2;return t=P,O=s=[ne(P[0],"BCDice")].concat(t),E=D=[ne(s[0],"Arithmetic")].concat(O),function(q,A,f){var _,x,C,b,l,i=c(q,null,"BinaryOp");[i].concat(f),i.$$prototype.lhs=i.$$prototype.rhs=i.$$prototype.op=r,e.def(i,"$initialize",_=function(F,re,H){var T=this;return T.lhs=F,T.op=re,T.rhs=H},_.$$arity=3),e.def(i,"$eval",x=function(F){var T,H=r;return H=this.lhs.$eval(F),T=this.rhs.$eval(F),H.$send(this.op,T)},x.$$arity=1),e.def(i,"$output",C=function(){var F=this;return""+F.lhs.$output()+F.op+F.rhs.$output()},C.$$arity=0),e.def(i,"$s_exp",b=function(){var F=this;return"("+F.$op_for_s_exp()+" "+F.lhs.$s_exp()+" "+F.rhs.$s_exp()+")"},b.$$arity=0),e.def(i,"$op_for_s_exp",l=function(){return this.op},l.$$arity=0)}((X=[ne(D[0],"Node")].concat(E))[0],0,X),q=X[0],A=u(X,"BinaryOp"),f=X,i=c(q,A,"DivideBase"),y=[i].concat(f),i.$$prototype.lhs=i.$$prototype.rhs=i.$$prototype.op=r,e.def(i,"$initialize",_=function(re,H){return _.$$p&&(_.$$p=null),G(this,e.find_super_dispatcher(this,"initialize",_,!1,!0),"initialize",[re,"/",H],null)},_.$$arity=2),e.def(i,"$eval",x=function(re){var T,H=this,h=r;return T=H.lhs.$eval(re),(h=H.rhs.$eval(re))["$=="](0)&&H.$raise(u(y,"ZeroDivisionError")),H.$divide_and_round(T,h,re)},x.$$arity=1),e.def(i,"$output",C=function(){var re=C.$$p,T=this,h=r,L=r,I=r;for(re&&(C.$$p=null),L=0,I=arguments.length,h=new Array(I);L<I;L++)h[L]=arguments[L];return""+G(T,e.find_super_dispatcher(T,"output",C,!1,!0),"output",h,re)+T.$rounding_method()},C.$$arity=0),i.$private(),e.def(i,"$rounding_method",b=function(){return z(this.$class(),"ROUNDING_METHOD")},b.$$arity=0),e.def(i,"$op_for_s_exp",l=function(){return""+this.op+this.$rounding_method()},l.$$arity=0),e.def(i,"$divide_and_round",R=function(re,H,T){return this.$raise(u(y,"NotImplementedError"))},R.$$arity=3),function(q,A,f){var _,i=c(q,A,"DivideWithGameSystemDefault"),y=[i].concat(f);e.const_set(y[0],"ROUNDING_METHOD",""),i.$private(),e.def(i,"$divide_and_round",_=function(C,b,l){var F;return F=l,z(u(y,"RoundType"),"CEIL")["$==="](F)?K(C.$to_f(),b).$ceil():z(u(y,"RoundType"),"ROUND")["$==="](F)?K(C.$to_f(),b).$round():K(C,b).$to_i()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(q,A,f){var _,i=c(q,A,"DivideWithCeil"),y=[i].concat(f);e.const_set(y[0],"ROUNDING_METHOD","C"),i.$private(),e.def(i,"$divide_and_round",_=function(C,b,l){return K(C.$to_f(),b).$ceil()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(q,A,f){var _,i=c(q,A,"DivideWithRound"),y=[i].concat(f);e.const_set(y[0],"ROUNDING_METHOD","R"),i.$private(),e.def(i,"$divide_and_round",_=function(C,b,l){return K(C.$to_f(),b).$round()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(q,A,f){var _,i=c(q,A,"DivideWithFloor"),y=[i].concat(f);e.const_set(y[0],"ROUNDING_METHOD","F"),i.$private(),e.def(i,"$divide_and_round",_=function(C,b,l){return K(C,b).$to_i()},_.$$arity=3)}(X[0],u(X,"DivideBase"),X),function(q,A,f){var _,x,C,b,i=c(q,null,"Negative");[i].concat(f),i.$$prototype.body=r,e.def(i,"$initialize",_=function(R){return this.body=R},_.$$arity=1),e.def(i,"$eval",x=function(R){return this.body.$eval(R)["$-@"]()},x.$$arity=1),e.def(i,"$output",C=function(){return"-"+this.body.$output()},C.$$arity=0),e.def(i,"$s_exp",b=function(){return"(- "+this.body.$s_exp()+")"},b.$$arity=0)}(X[0],0,X),function(q,A,f){var _,x,C,b,i=c(q,null,"Parenthesis");[i].concat(f),i.$$prototype.expr=r,e.def(i,"$initialize",_=function(R){return this.expr=R},_.$$arity=1),e.def(i,"$eval",x=function(R){return this.expr.$eval(R)},x.$$arity=1),e.def(i,"$output",C=function(){return"("+this.expr.$output()+")"},C.$$arity=0),e.def(i,"$s_exp",b=function(){return"(Parenthesis "+this.expr.$s_exp()+")"},b.$$arity=0)}(X[0],0,X),void function(q,A,f){var _,x,C,i=c(q,null,"Number");[i].concat(f),i.$$prototype.value=r,e.def(i,"$initialize",_=function(l){return this.value=l},_.$$arity=1),e.def(i,"$eval",x=function(l){return this.value},x.$$arity=1),e.def(i,"$output",C=function(){return this.value.$to_s()},C.$$arity=0),e.alias(i,"s_exp","output")}(X[0],0,X)},Opal.modules.strscan=function(e){var p,O,a,D,W,E,g,X,q,A,f,i,y,_,x,C,b,l,R,F,re,H,T,h,L,I,s,B,P=[],r=e.nil,u=e.$$,c=e.truthy,G=e.send;return p=P,s=(0,e.klass)(P[0],null,"StringScanner"),B=[s].concat(p),s.$$prototype.pos=s.$$prototype.string=s.$$prototype.working=s.$$prototype.matched=s.$$prototype.prev_pos=s.$$prototype.match=r,s.$attr_reader("pos"),s.$attr_reader("matched"),e.def(s,"$initialize",O=function(o){var w=this;return w.string=o,w.pos=0,w.matched=r,w.working=o,w.match=[]},O.$$arity=1),s.$attr_reader("string"),e.def(s,"$beginning_of_line?",a=function(){var o=this;return 0===o.pos||"\n"===o.string.charAt(o.pos-1)},a.$$arity=0),e.alias(s,"bol?","beginning_of_line?"),e.def(s,"$scan",D=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);return null==te?w.matched=r:"object"==typeof te?(w.prev_pos=w.pos,w.pos+=te[0].length,w.working=w.working.substring(te[0].length),w.matched=te[0],w.match=te,te[0]):"string"==typeof te?(w.pos+=te.length,w.working=w.working.substring(te.length),te):r},D.$$arity=1),e.def(s,"$scan_until",W=function(o){var w=this;o=w.$anchor(o);for(var ue,te=w.pos,se=w.working;;){if(ue=o.exec(se),te+=1,se=se.substr(1),null!=ue)return w.matched=w.string.substr(w.pos,te-w.pos-1+ue[0].length),w.match=ue,w.prev_pos=te-1,w.pos=te,w.working=se.substr(ue[0].length),w.matched;if(0===se.length)return w.match=[],w.matched=r}},W.$$arity=1),e.def(s,"$[]",E=function(o){var te;if(c(this.match["$empty?"]()))return r;te=o,u(B,"Symbol")["$==="](te)?o=o.$to_s():u(B,"String")["$==="](te)||(o=u(B,"Opal")["$coerce_to!"](o,u(B,"Integer"),"to_int"));var se=this.match;return o<0&&(o+=se.length),o<0||o>=se.length||null==se[o]?r:se[o]},E.$$arity=1),e.def(s,"$check",g=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);return w.matched=null==te?r:te[0]},g.$$arity=1),e.def(s,"$check_until",X=function(o){var w=this,te=w.prev_pos,se=w.pos,ue=w.$scan_until(o);return ue!==r&&(w.matched=ue.substr(-1),w.working=w.string.substr(se)),w.prev_pos=te,w.pos=se,ue},X.$$arity=1),e.def(s,"$peek",q=function(o){return this.working.substring(0,o)},q.$$arity=1),e.def(s,"$eos?",A=function(){return 0===this.working.length},A.$$arity=0),e.def(s,"$exist?",f=function(o){var te=o.exec(this.working);return null==te?r:0==te.index?0:te.index+1},f.$$arity=1),e.def(s,"$skip",i=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);if(null==te)return w.match=[],w.matched=r;var se=te[0],ue=se.length;return w.matched=se,w.match=te,w.prev_pos=w.pos,w.pos+=ue,w.working=w.working.substring(ue),ue},i.$$arity=1),e.def(s,"$skip_until",y=function(o){var te=this.$scan_until(o);return te===r?r:(this.matched=te.substr(-1),te.length)},y.$$arity=1),e.def(s,"$get_byte",_=function(){var o=this,w=r;return o.pos<o.string.length?(o.prev_pos=o.pos,o.pos+=1,w=o.matched=o.working.substring(0,1),o.working=o.working.substring(1)):o.matched=r,w},_.$$arity=0),e.alias(s,"getch","get_byte"),e.def(s,"$match?",x=function(o){var w=this,te=(o=w.$anchor(o)).exec(w.working);return null==te?r:(w.prev_pos=w.pos,te[0].length)},x.$$arity=1),e.def(s,"$pos=",C=function(o){var w=this;return o<0&&(o+=w.string.$length()),w.pos=o,w.working=w.string.slice(o)},C.$$arity=1),e.def(s,"$matched_size",b=function(){return this.matched===r?r:this.matched.length},b.$$arity=0),e.def(s,"$post_match",l=function(){var o=this;return o.matched===r?r:o.string.substr(o.pos)},l.$$arity=0),e.def(s,"$pre_match",R=function(){var o=this;return o.matched===r?r:o.string.substr(0,o.prev_pos)},R.$$arity=0),e.def(s,"$reset",F=function(){var o=this;return o.working=o.string,o.matched=r,o.pos=0},F.$$arity=0),e.def(s,"$rest",re=function(){return this.working},re.$$arity=0),e.def(s,"$rest?",H=function(){return 0!==this.working.length},H.$$arity=0),e.def(s,"$rest_size",T=function(){return this.$rest().$size()},T.$$arity=0),e.def(s,"$terminate",h=function(){var w,o=this;return o.match=r,w=[o.string.$length()],G(o,"pos=",e.to_a(w)),w[function(n,t){return"number"==typeof n?n-1:n["$-"](1)}(w.length)]},h.$$arity=0),e.def(s,"$unscan",L=function(){var o=this;return o.pos=o.prev_pos,o.prev_pos=r,o.match=r,o},L.$$arity=0),s.$private(),e.def(s,"$anchor",I=function(o){var te=o.toString().match(/\/([^\/]+)$/);return te=te?te[1]:void 0,new RegExp("^(?:"+o.source+")",te)},I.$$arity=1),r&&"anchor"},Opal.modules["bcdice/normalize"]=function(e){var p,O,a,s,c,n,J=[],P=e.nil,u=e.module;return c=J,p=n=[u(J[0],"BCDice")].concat(c),[s=u(n[0],"Normalize")].concat(p),s.$module_function(),e.def(s,"$comparison_operator",O=function(W){var g;return/<=|=</["$==="](g=W)?"<=":/>=|=>/["$==="](g)?">=":/<>|!=|=!/["$==="](g)?"!=":/</["$==="](g)?"<":/>/["$==="](g)?">":/=/["$==="](g)?"==":P},O.$$arity=1),void e.def(s,"$target_number",a=function(W){return W["$=="]("?")?W:W.$to_i()},a.$$arity=1)},Opal.modules["bcdice/command/lexer"]=function(e){var p,a,X,f,i,y,q,A,W,B,K=e.top,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.hash2,G=e.truthy,n=e.send;return K.$require("strscan"),K.$require("bcdice/normalize"),p=J,a=B=[u(J[0],"BCDice")].concat(p),X=W=[u(B[0],"Command")].concat(a),q=ne(W[0],null,"Lexer"),A=[q].concat(X),q.$$prototype.scanner=q.$$prototype.notations=P,e.const_set(A[0],"SYMBOLS",c(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),e.def(q,"$initialize",f=function(x,C){var b,l,R,re,F=this;return x=G(re=(l=(b=x)===P||null==b?P:n(b,"split",[" ",2]))===P||null==l?P:n(l,"first",[]))?re:"",F.scanner=z(A,"StringScanner").$new(x),F.notations=n(C,"map",[],((R=function(H){function T(h){return H.apply(this,arguments)}return T.toString=function(){return H.toString()},T}(function(H){return null==H&&(H=P),G(H["$is_a?"](z(A,"String")))?z(A,"Regexp").$new(H):H})).$$s=F,R.$$arity=1,R))},f.$$arity=2),e.def(q,"$next_token",i=function(){try{var x,C=this,b=P,l=P,F=P,re=P;return G(C.scanner["$eos?"]())?[!1,"$"]:(n(C.notations,"each",[],((x=function(T){var L,h=null==x.$$s?this:x.$$s;if(null==h.scanner&&(h.scanner=P),null==T&&(T=P),L=h.scanner.$scan(T),!G(L))return P;e.ret(["NOTATION",L])}).$$s=C,x.$$arity=1,x)),G(b=C.scanner.$scan(/\d+/))?["NUMBER",b.$to_i()]:G(l=C.scanner.$scan(/[<>!=]+/))?(l=z(A,"Normalize").$comparison_operator(l),[G(l)?"CMP_OP":"ILLEGAL",l]):(F=C.scanner.$getch().$upcase(),[G(re=z(A,"SYMBOLS")["$[]"](F))?re:F.$to_sym(),F]))}catch(H){if(H===e.returner)return H.$v;throw H}},i.$$arity=0),void e.def(q,"$source",y=function(){return this.scanner.$string()},y.$$arity=0)},Opal.modules["bcdice/command/parsed"]=function(e){var n,B,E,q,A,f,g,X,a,p,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.klass,c=e.truthy;return n=J,B=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"Command")].concat(B),g=ne(a[0],null,"Parsed"),X=[g].concat(E),g.$$prototype.question_target=g.$$prototype.critical=g.$$prototype.fumble=g.$$prototype.dollar=g.$$prototype.modify_number=g.$$prototype.target_number=g.$$prototype.prefix_number=g.$$prototype.command=g.$$prototype.suffix_number=g.$$prototype.cmp_op=P,g.$attr_accessor("command"),g.$attr_accessor("prefix_number"),g.$attr_accessor("suffix_number"),g.$attr_accessor("critical"),g.$attr_accessor("fumble"),g.$attr_accessor("dollar"),g.$attr_accessor("modify_number"),g.$attr_accessor("cmp_op"),g.$attr_accessor("target_number"),g.$attr_writer("question_target"),e.def(g,"$initialize",q=function(){var y=this;return y.prefix_number=P,y.suffix_number=P,y.critical=P,y.fumble=P,y.dollar=P,y.cmp_op=P,y.target_number=P,y.question_target=!1},q.$$arity=0),e.def(g,"$question_target?",A=function(){return this.question_target},A.$$arity=0),void e.def(g,"$to_s",f=function(y){var F,_=this,x=P,C=P,b=P,l=P,R=P;return null==y&&(y="after_command"),x=c(_.critical)?"@"+_.critical:P,C=c(_.fumble)?"#"+_.fumble:P,b=c(_.dollar)?"$"+_.dollar:P,l=z(X,"Format").$modifier(_.modify_number),R=c(_.question_target)?"?":_.target_number,"after_command"["$==="](F=y)?[_.prefix_number,_.command,_.suffix_number,x,C,b,l,_.cmp_op,R].$join():"after_modify_number"["$==="](F)?[_.prefix_number,_.command,_.suffix_number,l,x,C,b,_.cmp_op,R].$join():"after_target_number"["$==="](F)?[_.prefix_number,_.command,_.suffix_number,l,_.cmp_op,R,x,C,b].$join():P},f.$$arity=-1)},Opal.modules["bcdice/command/parser"]=function(e){function K(B,O){return"number"==typeof B&&"number"==typeof O?B-O:B["$-"](O)}var O,E,q,A,f,_,x,C,b,l,R,F,re,H,T,h,L,I,j,o,w,te,se,ue,Te,Re,De,Ee,fe,ae,V,M,k,S,$,v,d,m,N,Y,ee,oe,$e,ie,ce,ve,be,he,_e,Se,Ae,Be,Ce,He,Ie,Pe,ke,Ne,Me,qe,Ue,i,y,X,D,J=e.top,P=[],r=e.nil,z=e.$$$,u=e.$$,ne=e.klass,c=e.module,G=e.hash2,n=e.send2,t=e.send,p=e.hash,s=e.truthy;return J.$require("racc/parser.rb"),J.$require("bcdice/arithmetic/node"),J.$require("bcdice/command/lexer"),J.$require("bcdice/command/parsed"),function(B,O,a){[ne(B,O,"Parser")].concat(a)}(z(u(P,"BCDice"),"Command"),z(u(P,"Racc"),"Parser"),P),O=P,E=D=[c(P[0],"BCDice")].concat(O),q=(X=[c(D[0],"Command")].concat(E))[0],A=z(u(X,"Racc"),"Parser"),f=X,i=ne(q,A,"Parser"),y=[i].concat(f),i.$$prototype.notations=i.$$prototype.lexer=i.$$prototype.modifier=i.$$prototype.prefix_number=i.$$prototype.suffix_number=i.$$prototype.need_suffix_number=i.$$prototype.need_prefix_number=i.$$prototype.critical=i.$$prototype.fumble=i.$$prototype.dollar=i.$$prototype.allowed_cmp_op=i.$$prototype.question_target=r,e.def(i,"$initialize",_=function(Z,ye){var Q,U,le,ze,xe=_.$$p,ge=this;if(xe&&(_.$$p=null),Q=e.slice.call(arguments,0,arguments.length),null==(U=e.extract_kwargs(Q)))U=G([],{});else if(!U.$$is_hash)throw e.ArgumentError.$new("expected kwargs");if(le=Q,!e.hasOwnProperty.call(U.$$smap,"round_type"))throw e.ArgumentError.$new("missing keyword: round_type");return ze=U.$$smap.round_type,n(ge,e.find_super_dispatcher(ge,"initialize",_,!1,!0),"initialize",[],null),ge.notations=le,ge.round_type=ze,ge.prefix_number=!1,ge.suffix_number=!1,ge.need_prefix_number=!1,ge.need_suffix_number=!1,ge.modifier=!0,ge.critical=!1,ge.fumble=!1,ge.dollar=!1,ge.allowed_cmp_op=[r,">=",">","<=","<","==","!="],ge.question_target=!1},_.$$arity=-2),e.def(i,"$disable_modifier",x=function(){return this.modifier=!1,this},x.$$arity=0),e.def(i,"$enable_prefix_number",C=function(){return this.prefix_number=!0,this},C.$$arity=0),e.def(i,"$enable_suffix_number",b=function(){return this.suffix_number=!0,this},b.$$arity=0),e.def(i,"$has_prefix_number",l=function(){var Z=this;return Z.prefix_number=!0,Z.need_prefix_number=!0,Z},l.$$arity=0),e.def(i,"$has_suffix_number",R=function(){var Z=this;return Z.suffix_number=!0,Z.need_suffix_number=!0,Z},R.$$arity=0),e.def(i,"$enable_critical",F=function(){return this.critical=!0,this},F.$$arity=0),e.def(i,"$enable_fumble",re=function(){return this.fumble=!0,this},re.$$arity=0),e.def(i,"$enable_dollar",H=function(){return this.dollar=!0,this},H.$$arity=0),e.def(i,"$restrict_cmp_op_to",T=function(Z){var ye,U=this;return ye=e.slice.call(arguments,0,arguments.length),U.allowed_cmp_op=ye,U},T.$$arity=-1),e.def(i,"$enable_question_target",h=function(){return this.question_target=!0,this},h.$$arity=0),e.def(i,"$parse",L=function(Z){try{return this.lexer=u(y,"Lexer").$new(Z,this.notations),this.$do_parse()}catch(Q){if(!e.rescue(Q,[u(y,"ParseError"),u(y,"ZeroDivisionError")]))throw Q;try{return r}finally{e.pop_exception()}}},L.$$arity=1),i.$private(),e.def(i,"$parsed",I=function(Z,ye,Q,U){var le;return t(u(y,"Parsed").$new(),"tap",[],((le=function(pe){var Le,we,Ye,We,Ve,Ze,ge=null==le.$$s?this:le.$$s,me=r;return null==ge.round_type&&(ge.round_type=r),null==pe&&(pe=r),me=[Z["$[]"]("command")],t(pe,"command=",e.to_a(me)),K(me.length,1),me=[(Le=Z["$[]"]("prefix"),Le===r||null==Le?r:t(Le,"eval",[ge.round_type]))],t(pe,"prefix_number=",e.to_a(me)),K(me.length,1),me=[(we=Z["$[]"]("suffix"),we===r||null==we?r:t(we,"eval",[ge.round_type]))],t(pe,"suffix_number=",e.to_a(me)),K(me.length,1),me=[(Ye=ye["$[]"]("critical"),Ye===r||null==Ye?r:t(Ye,"eval",[ge.round_type]))],t(pe,"critical=",e.to_a(me)),K(me.length,1),me=[(We=ye["$[]"]("fumble"),We===r||null==We?r:t(We,"eval",[ge.round_type]))],t(pe,"fumble=",e.to_a(me)),K(me.length,1),me=[(Ve=ye["$[]"]("dollar"),Ve===r||null==Ve?r:t(Ve,"eval",[ge.round_type]))],t(pe,"dollar=",e.to_a(me)),K(me.length,1),me=[Q.$eval(ge.round_type)],t(pe,"modify_number=",e.to_a(me)),K(me.length,1),me=[U["$[]"]("cmp_op")],t(pe,"cmp_op=",e.to_a(me)),K(me.length,1),U["$[]"]("target")["$=="]("?")?(t(pe,"question_target=",e.to_a(me=[!0])),K(me.length,1),t(pe,"target_number=",e.to_a(me=[0])),me[K(me.length,1)]):(t(pe,"question_target=",e.to_a(me=[!1])),K(me.length,1),me=[(Ze=U["$[]"]("target"),Ze===r||null==Ze?r:t(Ze,"eval",[ge.round_type]))],t(pe,"target_number=",e.to_a(me)),me[K(me.length,1)])}).$$s=this,le.$$arity=1,le))},I.$$arity=4),e.def(i,"$next_token",j=function(){return this.lexer.$next_token()},j.$$arity=0),Be=[6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,33,34,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,36,37,17,18,6,r,5,r,r,17,18,6,r,5,r,r,17,18,r,r,5,23,24,25,26,56,54,55,57],Ce=[0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,r,17,15,15,18,18,23,r,18,30,30,23,23,24,r,23,31,31,24,24,25,r,24,44,44,25,25,28,r,25,47,47,28,28,29,r,28,48,48,29,29,33,r,29,49,49,33,33,34,r,33,50,50,34,34,36,r,34,r,r,36,36,37,r,36,r,r,37,37,r,r,37,27,27,27,27,52,52,52,52],He=[-2,4,16,-3,-1,11,r,33,13,35,23,30,1,r,28,40,r,37,44,r,r,-2,r,51,58,65,0,106,72,79,47,54,r,86,93,r,100,107,r,r,r,r,r,r,63,r,r,68,75,82,89,r,120,r,r,r,r,r],Ie=[-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29],Pe=[30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,r,r,21,47,48,40,51,52,49,50,44,46,3,r,r,r,13,r,r,r,r,r,r,r,32],ke=[8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,r,r,4,8,8,5,7,7,8,8,9,5,6,r,r,r,6,r,r,r,r,r,r,r,6],Ne=[r,6,13,3,9,-1,27,-15,-10,-1,-38],Me=[r,r,r,r,r,r,19,16,15,r,r],qe=[0,0,"racc_error",4,20,"_reduce_1",4,20,"_reduce_2",3,20,"_reduce_3",3,21,"_reduce_4",2,21,"_reduce_5",2,21,"_reduce_6",1,21,"_reduce_7",0,22,"_reduce_8",3,22,"_reduce_9",3,22,"_reduce_10",3,22,"_reduce_11",2,23,"_reduce_12",2,23,"_reduce_13",3,23,"_reduce_14",3,23,"_reduce_15",0,24,"_reduce_16",2,24,"_reduce_17",2,24,"_reduce_18",3,28,"_reduce_19",3,28,"_reduce_20",1,28,"_reduce_none",3,27,"_reduce_22",4,27,"_reduce_23",1,27,"_reduce_none",0,29,"_reduce_25",1,29,"_reduce_26",1,29,"_reduce_27",1,29,"_reduce_28",1,29,"_reduce_29",2,26,"_reduce_30",2,26,"_reduce_31",1,26,"_reduce_none",3,25,"_reduce_33",1,25,"_reduce_34"],Ue=p(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),e.const_set(y[0],"Racc_arg",[Be,Ce,Ie,He,Pe,ke,Me,Ne,19,qe,Ue,58,35,!0]),e.const_set(y[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),e.const_set(y[0],"Racc_debug_parser",!1),e.def(i,"$_reduce_1",o=function(Z,ye,Q){var U;return s(this.modifier)||this.$raise(u(y,"ParseError")),U=e.to_ary(Z),this.$parsed(null==U[0]?r:U[0],null==U[1]?r:U[1],null==U[2]?r:U[2],null==U[3]?r:U[3])},o.$$arity=3),e.def(i,"$_reduce_2",w=function(Z,ye,Q){var U;return s(this.modifier)||this.$raise(u(y,"ParseError")),U=e.to_ary(Z),this.$parsed(null==U[0]?r:U[0],null==U[2]?r:U[2],null==U[1]?r:U[1],null==U[3]?r:U[3])},w.$$arity=3),e.def(i,"$_reduce_3",te=function(Z,ye,Q){var U,ge;return ge=null==(U=e.to_ary(Z))[2]?r:U[2],this.$parsed(null==U[0]?r:U[0],null==U[1]?r:U[1],z(z(u(y,"Arithmetic"),"Node"),"Number").$new(0),ge)},te.$$arity=3),e.def(i,"$_reduce_4",se=function(Z,ye,Q){var le,U=this;return s(s(le=U.prefix_number)?U.suffix_number:le)||U.$raise(u(y,"ParseError")),G(["command","prefix","suffix"],{command:Z["$[]"](1),prefix:Z["$[]"](0),suffix:Z["$[]"](2)})},se.$$arity=3),e.def(i,"$_reduce_5",ue=function(Z,ye,Q){var U=this;return s(U.prefix_number)||U.$raise(u(y,"ParseError")),s(U.need_suffix_number)&&U.$raise(u(y,"ParseError")),G(["command","prefix"],{command:Z["$[]"](1),prefix:Z["$[]"](0)})},ue.$$arity=3),e.def(i,"$_reduce_6",Te=function(Z,ye,Q){var U=this;return s(U.suffix_number)||U.$raise(u(y,"ParseError")),s(U.need_prefix_number)&&U.$raise(u(y,"ParseError")),G(["command","suffix"],{command:Z["$[]"](0),suffix:Z["$[]"](1)})},Te.$$arity=3),e.def(i,"$_reduce_7",Re=function(Z,ye,Q){var le,U=this;return s(s(le=U.need_prefix_number)?le:U.need_suffix_number)&&U.$raise(u(y,"ParseError")),G(["command"],{command:Z["$[]"](0)})},Re.$$arity=3),e.def(i,"$_reduce_8",De=function(Z,ye,Q){return G([],{})},De.$$arity=3),e.def(i,"$_reduce_9",Ee=function(Z,ye,Q){var U,ge,we,Le,xe=r;return xe=null==(U=e.to_ary(Z))[0]?r:U[0],ge=null==U[2]?r:U[2],s(s(Le=this.critical)?xe["$[]"]("critical")["$nil?"]():Le)||this.$raise(u(y,"ParseError")),t(xe,"[]=",e.to_a(we=["critical",ge])),K(we.length,1),xe},Ee.$$arity=3),e.def(i,"$_reduce_10",fe=function(Z,ye,Q){var U,ge,we,Le,xe=r;return xe=null==(U=e.to_ary(Z))[0]?r:U[0],ge=null==U[2]?r:U[2],s(s(Le=this.fumble)?xe["$[]"]("fumble")["$nil?"]():Le)||this.$raise(u(y,"ParseError")),t(xe,"[]=",e.to_a(we=["fumble",ge])),K(we.length,1),xe},fe.$$arity=3),e.def(i,"$_reduce_11",ae=function(Z,ye,Q){var U,ge,we,Le,xe=r;return xe=null==(U=e.to_ary(Z))[0]?r:U[0],ge=null==U[2]?r:U[2],s(s(Le=this.dollar)?xe["$[]"]("dollar")["$nil?"]():Le)||this.$raise(u(y,"ParseError")),t(xe,"[]=",e.to_a(we=["dollar",ge])),K(we.length,1),xe},ae.$$arity=3),e.def(i,"$_reduce_12",V=function(Z,ye,Q){return Z["$[]"](1)},V.$$arity=3),e.def(i,"$_reduce_13",M=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"Negative").$new(Z["$[]"](1))},M.$$arity=3),e.def(i,"$_reduce_14",k=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"+",Z["$[]"](2))},k.$$arity=3),e.def(i,"$_reduce_15",S=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"-",Z["$[]"](2))},S.$$arity=3),e.def(i,"$_reduce_16",$=function(Z,ye,Q){return s(this.allowed_cmp_op["$include?"](r))||this.$raise(u(y,"ParseError")),G([],{})},$.$$arity=3),e.def(i,"$_reduce_17",v=function(Z,ye,Q){var U,xe,pe;return pe=null==(U=e.to_ary(Z))[1]?r:U[1],s(this.allowed_cmp_op["$include?"](xe=null==U[0]?r:U[0]))||this.$raise(u(y,"ParseError")),G(["cmp_op","target"],{cmp_op:xe,target:pe})},v.$$arity=3),e.def(i,"$_reduce_18",d=function(Z,ye,Q){var le,U=this;return le=Z["$[]"](0),s(U.question_target)||U.$raise(u(y,"ParseError")),s(U.allowed_cmp_op["$include?"](le))||U.$raise(u(y,"ParseError")),G(["cmp_op","target"],{cmp_op:le,target:"?"})},d.$$arity=3),e.def(i,"$_reduce_19",m=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"+",Z["$[]"](2))},m.$$arity=3),e.def(i,"$_reduce_20",N=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"-",Z["$[]"](2))},N.$$arity=3),e.def(i,"$_reduce_22",Y=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"BinaryOp").$new(Z["$[]"](0),"*",Z["$[]"](2))},Y.$$arity=3),e.def(i,"$_reduce_23",ee=function(Z,ye,Q){return Z["$[]"](3).$new(Z["$[]"](0),Z["$[]"](2))},ee.$$arity=3),e.def(i,"$_reduce_25",oe=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"DivideWithGameSystemDefault")},oe.$$arity=3),e.def(i,"$_reduce_26",$e=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"DivideWithCeil")},$e.$$arity=3),e.def(i,"$_reduce_27",ie=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"DivideWithCeil")},ie.$$arity=3),e.def(i,"$_reduce_28",ce=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"DivideWithRound")},ce.$$arity=3),e.def(i,"$_reduce_29",ve=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"DivideWithFloor")},ve.$$arity=3),e.def(i,"$_reduce_30",be=function(Z,ye,Q){return Z["$[]"](1)},be.$$arity=3),e.def(i,"$_reduce_31",he=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"Negative").$new(Z["$[]"](1))},he.$$arity=3),e.def(i,"$_reduce_33",_e=function(Z,ye,Q){return Z["$[]"](1)},_e.$$arity=3),e.def(i,"$_reduce_34",Se=function(Z,ye,Q){return z(z(u(y,"Arithmetic"),"Node"),"Number").$new(Z["$[]"](0))},Se.$$arity=3),void e.def(i,"$_reduce_none",Ae=function(Z,ye,Q){return Z["$[]"](0)},Ae.$$arity=3)},Opal.modules["bcdice/deprecated/checker"]=function(e){var n,B,W,X,q,A,f,i,y,E,g,a,p,J=[],P=e.nil,z=e.$$,u=e.module,ne=e.send,c=e.truthy;return n=J,B=p=[u(J[0],"BCDice")].concat(n),W=a=[u(p[0],"Deprecated")].concat(B),E=u(a[0],"Checker"),g=[E].concat(W),E.$private(),e.def(E,"$check_result_legacy",X=function(x,C,b,l){var H,L,R=this,F=P,re=P,T=P,h=P,I=P;return F=ne(C,"map",[],"sides".$to_proc()),H=(re=ne(C,"map",[],"value".$to_proc())).$sum(),T=[100]["$==="](h=F)?R.$check_1D100(x,H,b,l):[20]["$==="](h)?R.$check_1D20(x,H,b,l):[6,6]["$==="](h)?R.$check_2D6(x,H,re,b,l):P,c(c(L=T["$nil?"]())?L:T["$empty?"]())&&(h=F.$uniq(),T=[10]["$==="](h)?R.$check_nD10(x,H,re,b,l):[6]["$==="](h)?R.$check_nD6(x,H,re,b,l):P,c(c(I=T["$nil?"]())?I:T["$empty?"]()))?P:z(g,"Result").$new(T.$delete_prefix(" \uff1e "))},X.$$arity=4),e.def(E,"$check_1D100",q=function(x,C,b,l){return P},q.$$arity=4),e.def(E,"$check_1D20",A=function(x,C,b,l){return P},A.$$arity=4),e.def(E,"$check_nD10",f=function(x,C,b,l,R){return P},f.$$arity=5),e.def(E,"$check_2D6",i=function(x,C,b,l,R){return P},i.$$arity=5),void e.def(E,"$check_nD6",y=function(x,C,b,l,R){return P},y.$$arity=5)},Opal.modules["bcdice/base"]=function(e){function K(D,W){return"number"==typeof D&&"number"==typeof W?D+W:D["$+"](W)}function J(D,W){return"number"==typeof D&&"number"==typeof W?D-W:D["$-"](W)}var W,A,y,_,x,C,b,l,R,F,re,H,T,h,L,I,j,o,w,te,se,ue,Te,Re,De,Ee,fe,ae,V,M,k,S,d,m,N,Y,ee,v,f,i,g,u=e.top,ne=[],c=e.nil,G=e.$$$,n=e.$$,t=e.module,p=e.klass,s=e.truthy,B=e.send,O=e.range,a=c;return u.$require("i18n"),u.$require("i18n/backend/fallbacks"),u.$require("bcdice/randomizer"),u.$require("bcdice/dice_table"),u.$require("bcdice/enum"),u.$require("bcdice/translate"),u.$require("bcdice/result"),u.$require("bcdice/command/parser"),u.$require("bcdice/deprecated/checker"),W=ne,A=g=[t(ne[0],"BCDice")].concat(W),f=p(g[0],null,"Base"),i=[f].concat(A),f.$$prototype.sort_add_dice=f.$$prototype.sort_barabara_dice=f.$$prototype.enabled_d9=f.$$prototype.raw_input=f.$$prototype.randomizer=f.$$prototype.enabled_upcase_input=f.$$prototype.debug=c,S=e.get_singleton_class(f),v=[S].concat(i),S.$attr_reader("prefixes"),e.def(S,"$register_prefix",d=function($e){var ce,ve=this,be=c;return null==ve.prefixes&&(ve.prefixes=c),ce=e.slice.call(arguments,0,arguments.length),ve.prefixes=s(be=ve.prefixes)?be:[],ve.prefixes.$concat(ce.$flatten())},d.$$arity=-1),e.def(S,"$register_prefix_from_super_class",m=function(){return this.$register_prefix(this.$superclass().$prefixes())},m.$$arity=0),e.def(S,"$prefixes_pattern",N=function(){var ie,$e=this,ce=c;return null==$e.prefixes_pattern&&($e.prefixes_pattern=c),null==$e.prefixes&&($e.prefixes=c),$e.prefixes_pattern=s(ie=$e.prefixes_pattern)?ie:c,s($e.prefixes_pattern)?$e.prefixes_pattern:($e.prefixes=s(ce=$e.prefixes)?ce:[],$e.prefixes.$freeze(),$e.prefixes_pattern=(s($e.prefixes["$empty?"]())?/(?!)/:e.regexp(["^(S)?(",$e.prefixes.$join("|"),")"],"i")).$freeze())},N.$$arity=0),e.def(S,"$command_pattern",Y=function(){var $e,ce,ie=this,ve=c,be=c;return null==ie.command_pattern&&(ie.command_pattern=c),null==ie.prefixes&&(ie.prefixes=c),ie.command_pattern=s(ce=ie.command_pattern)?ce:c,s(ie.command_pattern)?ie.command_pattern:(ie.prefixes=s(ve=ie.prefixes)?ve:[],ie.prefixes.$freeze(),be=K(B(G(n(v,"CommonCommand"),"COMMANDS"),"map",[],(($e=function(_e){return null==_e&&(_e=c),G(_e,"PREFIX_PATTERN").$source()}).$$s=ie,$e.$$arity=1,$e)),ie.prefixes),ie.command_pattern=e.regexp(["^S?(",be.$join("|"),")"],"i").$freeze())},Y.$$arity=0),e.def(S,"$eval",ee=function($e){return this.$new($e).$eval()},ee.$$arity=1),f.$include(n(i,"Translate")),f.$include(G(n(i,"Deprecated"),"Checker")),e.def(f,"$initialize",y=function($){var v=this;return v.raw_input=$,v.sort_add_dice=!1,v.sort_barabara_dice=!1,v.d66_sort_type=G(n(i,"D66SortType"),"NO_SORT"),v.enabled_d9=!1,v.round_type=G(n(i,"RoundType"),"FLOOR"),v.sides_implicit_d=6,v.upper_dice_reroll_threshold=c,v.reroll_dice_reroll_threshold=c,v.default_cmp_op=c,v.default_target_number=c,v.enabled_upcase_input=!0,v.locale="ja_jp",v.randomizer=G(n(i,"BCDice"),"Randomizer").$new(),v.debug=!1},y.$$arity=1),f.$attr_accessor("randomizer"),f.$attr_reader("d66_sort_type"),f.$attr_reader("round_type"),f.$attr_reader("sides_implicit_d"),f.$attr_reader("upper_dice_reroll_threshold"),f.$attr_reader("reroll_dice_reroll_threshold"),f.$attr_reader("default_cmp_op"),f.$attr_reader("default_target_number"),e.def(f,"$sort_add_dice?",_=function(){return this.sort_add_dice},_.$$arity=0),e.def(f,"$sort_barabara_dice?",x=function(){return this.sort_barabara_dice},x.$$arity=0),e.def(f,"$enabled_d9?",C=function(){return this.enabled_d9},C.$$arity=0),e.def(f,"$enable_debug",b=function(){return this.debug=!0},b.$$arity=0),e.def(f,"$eval",l=function(){var v,d,m,$=this,N=c;return v=G(n(i,"BCDice"),"Preprocessor").$process($.raw_input,$),d=s(m=$.$dice_command(v))?m:$.$eval_common_command($.raw_input),s(d)?(N=[$.randomizer.$rand_results()],B(d,"rands=",e.to_a(N)),J(N.length,1),N=[$.randomizer.$detailed_rand_results()],B(d,"detailed_rands=",e.to_a(N)),J(N.length,1),d):c},l.$$arity=0),e.def(f,"$change_text",R=function($){return $},R.$$arity=1),e.def(f,"$check_result",F=function($,v,d,m){var N=this,Y=c,ee=c,oe=c,$e=c,ie=c;return Y=N.$check_result_legacy($,v,d,m),s(Y)?Y:(ee=B(v,"map",[],"sides".$to_proc()),$e=(oe=B(v,"map",[],"value".$to_proc())).$sum(),(Y=[100]["$==="](ie=ee)?N.$result_1d100($,$e,d,m):[20]["$==="](ie)?N.$result_1d20($,$e,d,m):[6,6]["$==="](ie)?N.$result_2d6($,$e,oe,d,m):c)["$=="](n(i,"Result").$nothing())?c:s(Y)?Y:(ie=ee.$uniq(),(Y=[10]["$==="](ie)?N.$result_nd10($,$e,oe,d,m):[6]["$==="](ie)?N.$result_nd6($,$e,oe,d,m):c)["$=="](n(i,"Result").$nothing())?c:s(Y)?Y:N.$result_ndx($,d,m)))},F.$$arity=4),e.def(f,"$grich_text",re=function($,v,d){return c},re.$$arity=3),f.$private(),e.def(f,"$eval_common_command",H=function($){try{var v;return $=this.$change_text($),B(G(n(i,"CommonCommand"),"COMMANDS"),"each",[],((v=function(N){var ee,Y=null==v.$$s?this:v.$$s;if(null==Y.randomizer&&(Y.randomizer=c),null==N&&(N=c),ee=N.$eval($,Y,Y.randomizer),!s(ee))return c;e.ret(ee)}).$$s=this,v.$$arity=1,v)),c}catch(m){if(m===e.returner)return m.$v;throw m}},H.$$arity=1),e.def(f,"$dice_command",T=function($){var v,d=this,m=c,N=c,Y=c,ee=c,oe=c,$e=c,ie=c;return s(d.enabled_upcase_input)&&($=$.$upcase()),m=d.$class().$prefixes_pattern().$match($),s(m)?(N=m["$[]"](1)["$nil?"]()["$!"](),s(N)&&($=$["$[]"](O(1,-1,!1))),Y=d.$eval_game_system_specific_command($),s(Y["$is_a?"](n(i,"Result")))?(ee=[s(oe=Y["$secret?"]())?oe:N],B(Y,"secret=",e.to_a(ee)),J(ee.length,1),Y):s(s($e=s(ie=Y["$nil?"]())?ie:Y["$empty?"]())?$e:Y["$=="]("1"))?c:B(n(i,"Result").$new(),"tap",[],((v=function(ve){return null==ve&&(ve=c),ee=[Y.$to_s()],B(ve,"text=",e.to_a(ee)),J(ee.length,1),B(ve,"secret=",e.to_a(ee=[N])),ee[J(ee.length,1)]}).$$s=d,v.$$arity=1,v))):c},T.$$arity=1),e.def(f,"$eval_game_system_specific_command",h=function($){return c},h.$$arity=1),e.def(f,"$result_ndx",L=function($,v,d){return s(d["$is_a?"](n(i,"String")))?c:s($.$send(v,d))?n(i,"Result").$success(this.$translate("success")):n(i,"Result").$failure(this.$translate("failure"))},L.$$arity=3),e.def(f,"$result_1d100",I=function($,v,d,m){return c},I.$$arity=4),e.def(f,"$result_1d20",j=function($,v,d,m){return c},j.$$arity=4),e.def(f,"$result_nd10",o=function($,v,d,m,N){return c},o.$$arity=5),e.def(f,"$result_2d6",w=function($,v,d,m,N){return c},w.$$arity=5),e.def(f,"$result_nd6",te=function($,v,d,m,N){return c},te.$$arity=5),e.def(f,"$get_table_by_2d6",se=function($){return this.$get_table_by_nD6($,2)},se.$$arity=1),e.def(f,"$get_table_by_1d6",ue=function($){return this.$get_table_by_nD6($,1)},ue.$$arity=1),e.def(f,"$get_table_by_nD6",Te=function($,v){return this.$get_table_by_nDx($,v,6)},Te.$$arity=2),e.def(f,"$get_table_by_nDx",Re=function($,v,d){var N,Y=c;return N=this.randomizer.$roll_sum(v,d),Y=this.$get_table_value($["$[]"](J(N,v))),s(Y["$nil?"]())?["1",0]:[Y,N]},Re.$$arity=3),e.def(f,"$get_table_by_1d3",De=function($){var m,N,v=this,Y=c;return v.$debug("get_table_by_1d3"),m=v.randomizer.$roll_sum(1,6),v.$debug("num",m),N=function(D,W){return"number"==typeof D?D/2:D["$/"](2)}(J(m,1)).$to_i(),v.$debug("index",N),Y=$["$[]"](N),s(Y["$nil?"]())?["1",0]:[Y,m]},De.$$arity=1),e.def(f,"$get_table_by_d66_swap",Ee=function($){var d;return d=this.randomizer.$roll_d66(G(n(i,"D66SortType"),"ASC")),[this.$get_table_by_number(d,$),d]},Ee.$$arity=1),e.def(f,"$get_table_by_d66",fe=function($){var d,m,N,ee,Y=c;return d=this.randomizer.$roll_once(6),m=this.randomizer.$roll_once(6),N=K(function(D,W){return"number"==typeof D?6*D:D["$*"](6)}(J(d,1)),J(m,1)),Y=$["$[]"](N),ee=""+d+m,s(Y["$nil?"]())?["1",ee]:[Y,ee]},fe.$$arity=1),e.def(f,"$get_table_by_number",ae=function($,v,d){try{var m;return null==d&&(d="1"),B(v,"each",[],((m=function(ee){var $e,oe=null==m.$$s?this:m.$$s;if(null==ee&&(ee=c),$e=ee["$[]"](0),!s(function(D,W){return"number"==typeof D&&"number"==typeof W?D>=W:D["$>="](W)}($e,$)))return c;e.ret(oe.$get_table_value(ee["$[]"](1)))}).$$s=this,m.$$arity=1,m)),this.$get_table_value(d)}catch(Y){if(Y===e.returner)return Y.$v;throw Y}},ae.$$arity=-3),e.def(f,"$get_table_value",V=function($){return s($["$is_a?"](n(i,"Proc")))?$.$call():$},V.$$arity=1),e.def(f,"$roll_tables",M=function($,v){var m=c;return m=v["$[]"]($),s(m)?m.$roll(this.randomizer).$to_s():c},M.$$arity=2),e.def(f,"$debug",k=function($,v){var m,N,Y=this,ee=c,oe=c;return m=e.slice.call(arguments,1,arguments.length),s(Y.debug)?(ee=s($["$is_a?"](n(i,"String")))?$:$.$inspect(),s(m["$empty?"]())?Y.$warn(ee):(oe=B(m,"map",[],((N=function(ie){return null==ie&&(ie=c),s(ie["$is_a?"](n(i,"String")))?'"'+ie+'"':ie.$inspect()}).$$s=Y,N.$$arity=1,N)),Y.$warn(ee+": "+oe.$join(", ")))):c},k.$$arity=-2),G(G(n(ne,"I18n"),"Backend"),"Simple").$include(G(G(n(ne,"I18n"),"Backend"),"Fallbacks")),n(ne,"I18n").$load_path()["$<<"](n(ne,"Dir")["$[]"](n(ne,"File").$join(u.$__dir__(),"../../i18n/**/*.yml"))),a=["ja_jp"],B(n(ne,"I18n"),"default_locale=",e.to_a(a)),J(a.length,1),a=[["ja_jp"]],B(n(ne,"I18n").$fallbacks(),"defaults=",e.to_a(a)),a[J(a.length,1)]},Opal.modules["bcdice/arithmetic_evaluator"]=function(e){var n,B,D,g,E,O,a,p,J=[],P=e.nil,r=e.$$$,z=e.$$,u=e.module,ne=e.hash2,c=e.truthy;return n=J,B=p=[u(J[0],"BCDice")].concat(n),a=[O=u(p[0],"ArithmeticEvaluator")].concat(B),D=e.get_singleton_class(O),E=[D].concat(a),void e.def(D,"$eval",g=function(q,A){var f,y=P;if(null==A)A=ne([],{});else if(!A.$$is_hash)throw e.ArgumentError.$new("expected kwargs");return null==(f=A.$$smap.round_type)&&(f=r(z(E,"RoundType"),"FLOOR")),c(q)&&c(y=z(E,"Arithmetic").$eval(q,f))?y:0},g.$$arity=-2)},Opal.modules["bcdice/game_system/LogHorizon"]=function(e){function K(E,g){return"number"==typeof E&&"number"==typeof g?E+g:E["$+"](g)}function J(E,g){return"number"==typeof E&&"number"==typeof g?E-g:E["$-"](g)}function P(E,g){return"number"==typeof E&&"number"==typeof g?E>=g:E["$>="](g)}function z(E,g){return"number"==typeof E&&"number"==typeof g?E*g:E["$*"](g)}function u(E,g){return"number"==typeof E&&"number"==typeof g?E<=g:E["$<="](g)}function ne(E,g){return"number"==typeof E&&"number"==typeof g?E<g:E["$<"](g)}var g,f,_,x,C,R,F,re,H,T,h,L,I,j,o,w,te,se,ue,Te,Re,De,Ee,V,S,$,v,d,m,ee,Y,M,k,b,l,y,q,c=e.top,G=[],n=e.nil,t=e.$$$,p=e.$$,s=e.module,B=e.klass,O=e.send2,a=e.truthy,D=e.hash2,W=e.send;return c.$require("bcdice/base"),c.$require("bcdice/arithmetic_evaluator"),g=G,f=q=[s(G[0],"BCDice")].concat(g),_=(y=[s(q[0],"GameSystem")].concat(f))[0],x=p(y,"Base"),C=y,b=B(_,x,"LogHorizon"),l=[b].concat(C),b.$$prototype.randomizer=b.$$prototype.locale=n,e.const_set(l[0],"ID","LogHorizon"),e.const_set(l[0],"NAME","\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG"),e.const_set(l[0],"SORT_KEY","\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG"),e.const_set(l[0],"HELP_MESSAGE","\u25a0 \u5224\u5b9a (xLH\xb1y>=z)\n\u3000xD6\u306e\u5224\u5b9a\u3002\u30af\u30ea\u30c6\u30a3\u30ab\u30eb\u3001\u30d5\u30a1\u30f3\u30d6\u30eb\u306e\u81ea\u52d5\u5224\u5b9a\u3092\u884c\u3044\u307e\u3059\u3002\n\u3000x\uff1ax\u306b\u632f\u308b\u30c0\u30a4\u30b9\u6570\u3092\u5165\u529b\u3002\n\u3000\xb1y\uff1ay\u306b\u4fee\u6b63\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000>=z\uff1az\u306b\u76ee\u6a19\u5024\u3092\u5165\u529b\u3002\xb1\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \u6d88\u8017\u8868 (tCTx\xb1y$z)\n\u3000PCT \u4f53\u529b\uff0fECT \u6c17\u529b\uff0fGCT \u7269\u54c1\uff0fCCT \u91d1\u92ad\n\u3000x:CR\u3092\u6307\u5b9a\u3002\n\u3000\xb1y:\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u8868\u306e\u7279\u5b9a\u306e\u5024\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u8ca1\u5b9d\u8868 (tTRSx\xb1y$)\n\u3000LHZB1\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRS \u91d1\u92ad\uff0fMTRS \u9b54\u6cd5\u7d20\u6750\uff0fITRS \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0f\u203bHTRS \u30d2\u30ed\u30a4\u30f3\uff0fGTRS \u30b4\u30d6\u30ea\u30f3\u8ca1\u5b9d\u8868\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\u300a\u30b4\u30fc\u30eb\u30c9\u30d5\u30a3\u30f3\u30ac\u30fc\u300b\u4f7f\u7528\u6642\u306a\u3069\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u8ca1\u5b9d\u8868\u306e\u30c0\u30a4\u30b9\u76ee\u30927\u56fa\u5b9a\uff081\u56de\u5206\u306e\u30d7\u30e9\u30a4\u30ba\u7528\uff09\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \u30a4\u30fc\u30b9\u30bf\u30eb\u63a2\u7d22\u8868 (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \u30d7\u30ec\u30d5\u30a3\u30c3\u30af\u30b9\u30c9\u30de\u30b8\u30c3\u30af\u30a2\u30a4\u30c6\u30e0\u52b9\u679c\u8868 (MGRx)\n\u3000x\u306fMG\u3092\u6307\u5b9a\u3002(LHZB1\u7528)\n\n\u25a0 \u697d\u5668\u7a2e\u5225\u8868\u2020 (MIIx)\n\u3000x\u306f\u697d\u5668\u306e\u7a2e\u985e(1\uff5e6\u3092\u6307\u5b9a)\u3001\u7701\u7565\u53ef\u80fd\n\u30001 \u6253\u697d\u5668\uff11\uff0f2 \u9375\u76e4\u697d\u5668\uff0f3 \u5f26\u697d\u5668\uff11\uff0f4 \u5f26\u697d\u5668\uff12\uff0f5 \u7ba1\u697d\u5668\uff11\uff0f6 \u7ba1\u697d\u5668\uff12\n\n\u25a0 \u7279\u6b8a\u6d88\u8017\u8868\u2606 (tSCTx\xb1y$z)\n\u3000\u6d88\u8017\u8868\u3068\u540c\u69d8\u3001\u305f\u3060\u3057CR\u306f\u7701\u7565\u53ef\u80fd\u3002\n\u3000ESCT \u30ed\u30c7\u7814\u306f\u7206\u767a\u3060\uff01\uff0fCSCT \u30a2\u30eb\u30f4\u306e\u546a\u3044\u3058\u3083\uff01\n\n\u25a0 \u30ed\u30c7\u7814\u306e\u65b0\u767a\u660e\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (IATt)\n\u3000IATA \u7279\u5fb4A(\u30e1\u30ea\u30c3\u30c8)\uff0fIATB \u7279\u5fb4B(\u30c7\u30e1\u30ea\u30c3\u30c8)\uff0fIATL \u898b\u305f\u76ee\uff0fIATT \u7a2e\u985e\n\u3000t\u3092\u7701\u7565\u3059\u308b\u3068\u5168\u3066\u8868\u793a\u3002t\u306bA/B/L/T\u3092\u4efb\u610f\u306e\u9806\u3067\u9023\u7d50\u53ef\u80fd\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \u8868\n\u3000\u30fb\u30d1\u30fc\u30bd\u30ca\u30ea\u30c6\u30a3\u30bf\u30b0\u8868 (PTAG)\n\u3000\u30fb\u4ea4\u53cb\u8868 (KOYU)\n\u3000\u30fb\u653b\u6483\u547d\u4e2d\u7b87\u6240\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (HLOC)\n\u3000\u30fbPC\u540d\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (PCNM)\n\u3000\u30fb\u30a2\u30ad\u30d0\u306e\u8857\u3067\u906d\u9047\u3059\u308b\u30c8\u30e9\u30d6\u30eb\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (TIAS)\n\u3000\u30fb\u5ec3\u68c4\u5150\u30e9\u30f3\u30c0\u30e0\u6c7a\u5b9a\u8868\u203b (ABDC)\n\n\u2020\u5370\u306f\u2606\u5370\u306f\u300c\u30a4\u30f3\u30c8\u30a5\u30fb\u30b6\u30fb\u30bb\u30eb\u30c7\u30b7\u30a2 \u3055\u3089\u306a\u308b\u30d3\u30eb\u30c9\u306e\u7fbd\u3070\u305f\u304d\uff08\uff11\uff09\u300d\u3088\u308a\u3001\n\u2606\u5370\u306f\u30bb\u30eb\u30c7\u30b7\u30a2\u30fb\u30ac\u30bc\u30c3\u30c8\u300c\u3067\u304d\u308b\u304b\u306a66\u300dVol.1\u3088\u308a\u3001\n\u203b\u5370\u306f\u300c\u5b9f\u9332\u30fb\u4e03\u9762\u4f53\u5de5\u623f\u30b9\u30bf\u30c3\u30d5\u5ea7\u8ac7\u4f1a(\u590f\u306e\u9663)\u300d\u3088\u308a\u3002\u5229\u7528\u6cd5\u306a\u3069\u306f\u305d\u3061\u3089\u53c2\u7167\u3002\n\u30fbD66\u30c0\u30a4\u30b9\u3042\u308a\n"),b.$register_prefix("\\d+LH","\\w+CT","CT","\\w+TRS","TRS","IAT","TIAS","ABDC","MII","ESTL"),e.def(b,"$initialize",R=function(ae){var k=this;return R.$$p&&(R.$$p=null),O(k,e.find_super_dispatcher(k,"initialize",R,!1,!0),"initialize",[ae],null),k.d66_sort_type=t(p(l,"D66SortType"),"NO_SORT")},R.$$arity=1),e.def(b,"$eval_game_system_specific_command",F=function(ae){var M,k,S,$,v,d,m,N,Y,ee,oe,V=this;return a(M=a(k=a(S=a($=a(v=a(d=a(m=a(N=a(Y=a(ee=a(oe=V.$getCheckRollDiceCommandResult(ae))?oe:V.$roll_consumption(ae))?ee:V.$roll_consumption_table(ae))?Y:V.$roll_treasure(ae))?N:V.$roll_treasure_table(ae))?m:V.$roll_treasure_table_b2(ae))?d:V.$getInventionAttributeTextDiceCommandResult(ae))?v:V.$getTroubleInAkibaStreetDiceCommandResult(ae))?$:V.$getAbandonedChildDiceCommandResult(ae))?S:V.$getMusicalInstrumentTypeDiceCommandResult(ae))?k:V.$roll_eastal_exploration_table(ae))?M:V.$roll_tables(ae,t(V.$class(),"TABLES"))},F.$$arity=1),b.$private(),e.def(b,"$getCheckRollDiceCommandResult",re=function(ae){var V=this,k=n,S=n,$=n,v=n,d=n,m=n,Y=n;return k=t(p(l,"Command"),"Parser").$new(/\d+LH/,D(["round_type"],{round_type:V.$round_type()})).$restrict_cmp_op_to(n,">=").$parse(ae),a(k)?(S=k.$command().$to_i(),d=K(v=($=V.randomizer.$roll_barabara(S,6)).$sum(),k.$modify_number()),m=V.$result_text(S,$,d,k),Y=[["("+k+")",v+"["+$.$join(",")+"]"+p(l,"Format").$modifier(k.$modify_number()),d,m.$text()].$compact().$join(" \uff1e ")],W(m,"text=",e.to_a(Y)),J(Y.length,1),m):n},re.$$arity=1),e.def(b,"$result_text",H=function(ae,V,M,k){var S=this;return a(P(V.$count(6),2))?p(l,"Result").$critical(S.$translate("LogHorizon.LH.critical")):a(P(V.$count(1),ae))?p(l,"Result").$fumble(S.$translate("LogHorizon.LH.fumble")):a(k.$cmp_op()["$nil?"]())?p(l,"Result").$new():a(P(M,k.$target_number()))?p(l,"Result").$success(S.$translate("success")):p(l,"Result").$failure(S.$translate("failure"))},H.$$arity=4),e.def(b,"$getValue",T=function(ae,V){var k;return a(a(k=ae["$nil?"]())?k:ae["$empty?"]())?V:p(l,"ArithmeticEvaluator").$eval(ae)},T.$$arity=2),e.def(b,"$roll_consumption",h=function(ae){var M=n,k=n,S=n,$=n,v=n;return M=/^CT\d*([+\-\d]+)?$/.$match(ae),a(M)?(k=p(l,"ArithmeticEvaluator").$eval(M["$[]"](1)),S=p(l,"Format").$modifier(k),$=this.randomizer.$roll_once(6),a(S["$empty?"]())||(v=K($.$to_s(),S)),["(1D6"+S+")",v,K($,k)].$compact().$join(" \uff1e ")):n},h.$$arity=1),e.def(b,"$roll_consumption_table",L=function(ae){var M=n,k=n,S=n,$=n;return M=/(P|E|G|C|ES|CS)CT(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(ae),a(M)?(k=this.$construct_consumption_table(M["$[]"](1)),S=M["$[]"](2).$to_i(),$=p(l,"ArithmeticEvaluator").$eval(M["$[]"](3)),a(M["$[]"](4))&&k.$fix_dice_value(M["$[]"](4).$to_i()),k.$roll(S,$,this.randomizer)):n},L.$$arity=1),e.def(b,"$construct_consumption_table",I=function(ae){var k,V=this,M=n;return M="P"["$==="](k=ae)?V.$translate("LogHorizon.CT.PCT"):"E"["$==="](k)?V.$translate("LogHorizon.CT.ECT"):"G"["$==="](k)?V.$translate("LogHorizon.CT.GCT"):"C"["$==="](k)?V.$translate("LogHorizon.CT.CCT"):"ES"["$==="](k)?V.$translate("LogHorizon.CT.ESCT"):"CS"["$==="](k)?V.$translate("LogHorizon.CT.CSCT"):n,p(l,"ConsumptionTable").$new(M["$[]"]("name"),M["$[]"]("items"))},I.$$arity=1),function(fe,ae,V){var S,$,v,M=B(fe,null,"ConsumptionTable");[M].concat(V),M.$$prototype.tables=M.$$prototype.dice_value=M.$$prototype.name=n,e.def(M,"$initialize",S=function(m,N){var Y=this;return Y.name=m,Y.tables=N,Y.dice_value=n},S.$$arity=2),e.def(M,"$fix_dice_value",$=function(m){return this.dice_value=m},$.$$arity=1),e.def(M,"$roll",v=function(m,N,Y){var oe,ve,ie,ee=this,$e=n,ce=n;return oe=function(E,g){return"number"==typeof E?E/5:E["$/"](5)}(J(m,1)).$clamp(0,J(ee.tables.$size(),1)),$e=ee.tables["$[]"](oe),ee.dice_value=a(ie=ee.dice_value)?ie:Y.$roll_once(6),ce=K(ee.dice_value,N),ve=$e["$[]"](ce.$clamp(0,7)),ee.name+"("+ce+"["+ee.dice_value+"]) \uff1e "+ve},v.$$arity=3)}(l[0],0,l),e.def(b,"$roll_treasure",j=function(ae){var M=n,k=n,S=n,$=n,v=n,d=n;return M=/^TRS(\d+)?([+\-\d]+)?$/.$match(ae),a(M)?(k=M["$[]"](1).$to_i(),S=p(l,"ArithmeticEvaluator").$eval(M["$[]"](2)),d=K(K(v=($=this.randomizer.$roll_barabara(2,6)).$sum(),z(k,5)),S),"(2D6+"+k+"*5"+p(l,"Format").$modifier(S)+") \uff1e "+v+"["+$.$join(",")+"]"+p(l,"Format").$modifier(K(z(k,5),S))+" \uff1e "+d):n},j.$$arity=1),e.def(b,"$roll_treasure_table",o=function(ae){var V=this,M=n,k=n,S=n,$=n,v=n,d=n;return M=/^([CMIHG]TRS)(\d+)?([+\-\d]+)?(\$)?$/.$match(ae),a(M)?(k=M["$[]"](1),S=V.$construct_treasure_table(k),$=M["$[]"](2).$to_i(),v=p(l,"ArithmeticEvaluator").$eval(M["$[]"](3)),a(a(d=$["$=="](0))?v["$=="](0):d)?V.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:ae})):(a(M["$[]"](4))&&S.$fix_dice_value(7),S.$roll($,v,V.randomizer))):n},o.$$arity=1),e.def(b,"$construct_treasure_table",w=function(ae){return ae["$=="]("HTRS")?p(l,"HeroineTreasureTable").$from_i18n("LogHorizon.TRS.HTRS",this.locale):p(l,"TreasureTable").$from_i18n("LogHorizon.TRS."+ae,this.locale)},w.$$arity=1),e.def(b,"$roll_treasure_table_b2",te=function(ae){var V=this,M=n,k=n,S=n,$=n,v=n,d=n;return M=/^([CMIO]TRSE)(\d+)?([+\-\d]+)?(\$)?$/.$match(ae),a(M)?(k=M["$[]"](1),S=p(l,"ExpansionTreasureTable").$from_i18n("LogHorizon.TRSE."+k,V.locale),$=M["$[]"](2).$to_i(),v=p(l,"ArithmeticEvaluator").$eval(M["$[]"](3)),a(a(d=$["$=="](0))?v["$=="](0):d)?V.$translate("LogHorizon.TRS.need_cr",D(["command"],{command:ae})):(a(M["$[]"](4))&&S.$fix_dice_value(7),S.$roll($,v,V.randomizer))):n},te.$$arity=1),V=l,k=[M=B(l[0],null,"TreasureTable")].concat(V),M.$$prototype.dice_list=M.$$prototype.name=M.$$prototype.items=n,M.$include(p(k,"Translate")),m=e.get_singleton_class(M),Y=[m].concat(k),e.def(m,"$from_i18n",ee=function($e,ie){var ve=n;return ve=p(Y,"I18n").$translate($e,D(["raise","locale"],{raise:!0,locale:ie})),this.$new(ve["$[]"]("name"),ve["$[]"]("items"),ie)},ee.$$arity=2),e.def(M,"$initialize",S=function(N,Y,ee){return this.name=N,this.items=Y,this.locale=ee,this.dice_list=n},S.$$arity=3),e.def(M,"$fix_dice_value",$=function(N){return this.dice_list=[N]},$.$$arity=1),e.def(M,"$roll",v=function(N,Y,ee){var oe,ie,$e=this,ce=n,ve=n,be=n,he=n,_e=n;return a(a(ie=N["$=="](0))?Y["$=="](0):ie)?n:(ce=a(a(ve=N["$=="](0))?Y["$!="](0):ve)?Y:($e.dice_list=a(be=$e.dice_list)?be:ee.$roll_barabara(2,6),K(K($e.dice_list.$sum(),z(5,N)),Y)),he=$e.$pick_item(ce),a($e.dice_list)&&(_e="["+((oe=$e.dice_list)===n||null==oe?n:W(oe,"join",[","]))+"]"),$e.name+"("+ce+_e+") \uff1e "+he)},v.$$arity=3),M.$private(),e.def(M,"$pick_item",d=function(N){var Y=this;return a(u(N,6))?Y.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):a(u(N,62))?Y.items["$[]"](N.$to_s()):a(u(N,72))?Y.items["$[]"](J(N,10).$to_s())+"&80G":a(u(N,82))?Y.items["$[]"](J(N,20).$to_s())+"&160G":a(u(N,87))?Y.items["$[]"](J(N,30).$to_s())+"&260G":Y.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:88}))},d.$$arity=1),function(fe,ae,V){var S,M=B(fe,ae,"HeroineTreasureTable");[M].concat(V),M.$$prototype.items=n,e.def(M,"$pick_item",S=function(v){var d=this;return a(u(v,6))?d.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):a(u(v,53))?d.items["$[]"](v.$to_s()):d.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:54}))},S.$$arity=1)}(l[0],p(l,"TreasureTable"),l),function(fe,ae,V){var S,M=B(fe,ae,"ExpansionTreasureTable");[M].concat(V),M.$$prototype.items=n,e.def(M,"$pick_item",S=function(v){var d=this;return a(u(v,6))?d.$translate("LogHorizon.TRS.below_lower_limit",D(["value"],{value:6})):a(u(v,162))?d.items["$[]"](v.$to_s()):a(u(v,172))?d.items["$[]"](J(v,10).$to_s())+"&200G":a(u(v,182))?d.items["$[]"](J(v,20).$to_s())+"&400G":a(u(v,187))?d.items["$[]"](J(v,30).$to_s())+"&600G":d.$translate("LogHorizon.TRS.exceed_upper_limit",D(["value"],{value:188}))},S.$$arity=1)}(l[0],p(l,"TreasureTable"),l),e.def(b,"$getInventionAttributeTextDiceCommandResult",se=function(ae){var V,k=n,S=n,$=n,v=n,d=n,m=n;return a(ae["$=~"](/IAT([ABMDLT]*)/))?(k=this.$translate("LogHorizon.IAT.name"),S=a(a($=p(l,"Regexp").$last_match(1))?p(l,"Regexp").$last_match(1)["$!="](""):$)?p(l,"Regexp").$last_match(1):"MDLT",v=S.$length()["$=="](1),d=[],m=[],W(S.$split(/(?:)/),"each",[],((V=function(Y){var ie,ee=null==V.$$s?this:V.$$s,oe=n,$e=n,ce=n;return null==ee.randomizer&&(ee.randomizer=n),null==Y&&(Y=n),oe=ee.randomizer.$roll_once(6),m["$<<"](oe.$to_s()),ce=($e="A"["$==="](ie=Y)||"M"["$==="](ie)?ee.$translate("LogHorizon.IAT.A"):"B"["$==="](ie)||"D"["$==="](ie)?ee.$translate("LogHorizon.IAT.B"):"L"["$==="](ie)?ee.$translate("LogHorizon.IAT.L"):"T"["$==="](ie)?ee.$translate("LogHorizon.IAT.T"):n)["$[]"]("items")["$[]"](J(oe,1)),a(v)&&(ce=$e["$[]"]("name")+"\uff1a"+ce),d.$push(ce)}).$$s=this,V.$$arity=1,V)),k+"(["+m.$join(",")+"]) \uff1e "+d.$join(" ")):n},se.$$arity=1),e.def(b,"$getTroubleInAkibaStreetDiceCommandResult",ue=function(ae){return ae["$=="]("TIAS")?this.$roll_random_table("LogHorizon.TIAS"):n},ue.$$arity=1),e.def(b,"$getAbandonedChildDiceCommandResult",Te=function(ae){return ae["$=="]("ABDC")?this.$roll_random_table("LogHorizon.ABDC"):n},Te.$$arity=1),e.def(b,"$roll_random_table",Re=function(ae){var V,M=this,k=n,S=n,$=n,v=n;return k=M.$translate(ae),S=k["$[]"]("tables"),$=M.randomizer.$roll_barabara(S.$size(),6),v=W($.$map(),"with_index",[],((V=function(m,N){return null==m&&(m=n),null==N&&(N=n),S["$[]"](N)["$[]"](J(m,1))}).$$s=M,V.$$arity=2,V)),k["$[]"]("name")+"(["+$.$join(",")+"]) \uff1e "+v.$join(" ")},Re.$$arity=1),e.def(b,"$getMusicalInstrumentTypeDiceCommandResult",De=function(ae){var V=this,M=n,k=n,S=n,$=n,v=n,d=n,m=n,N=n;return!a(ae["$=~"](/MII(\d?)/))||(M=(a(k=p(l,"Regexp").$last_match(1))?p(l,"Regexp").$last_match(1)["$!="](""):k)["$!"](),S=a(M)?V.randomizer.$roll_once(6):p(l,"Regexp").$last_match(1).$to_i(),a(a($=ne(S,1))?$:ne(6,S)))?n:(v=V.$translate("LogHorizon.MII.name"),d=V.$translate("LogHorizon.MII.type_list")["$[]"](J(S,1)),m=V.randomizer.$roll_once(6),N=V.$translate("LogHorizon.MII.items")["$[]"](J(S,1))["$[]"](J(m,1)),K(K(v.$to_s(),a(M)?"("+S+")":"")," \uff1e "+d+"("+m+") \uff1e "+N))},De.$$arity=1),e.def(b,"$roll_eastal_exploration_table",Ee=function(ae){var V,M=this,k=n,S=n,$=n,v=n,d=n,m=n,N=n,Y=n,ee=n,oe=n,ie=n;return k=/ESTL(\d+)?([+\-\d]+)?(?:\$(\d+))?/.$match(ae),!a(k)||a(a(S=a($=k["$[]"](1)["$nil?"]())?k["$[]"](2)["$nil?"]():$)?k["$[]"](3)["$nil?"]():S)?n:(v=k["$[]"](1).$to_i(),d=p(l,"ArithmeticEvaluator").$eval(k["$[]"](2)),m=(V=k["$[]"](3))===n||null==V?n:W(V,"to_i",[]),N=a(m)?[m]:v["$=="](0)?[]:M.randomizer.$roll_barabara(2,6),a(N["$empty?"]())||(Y="["+N.$join(",")+"]"),ee=K(K(N.$sum(),z(v,5)),d).$clamp(7,162),oe=M.$translate("LogHorizon.ESTL.name"),ie=M.$translate("LogHorizon.ESTL.items")["$[]"](ee.$to_s()).$chomp(),oe+"("+ee+Y+")\n"+ie)},Ee.$$arity=1),function(fe,ae){var M,V=[fe].concat(ae);fe.$private(),e.def(fe,"$translate_tables",M=function(S){return D(["PTAG","KOYU","MGR1","MGR2","MGR3","HLOC","PCNM"],{PTAG:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PTAG",S),KOYU:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.KOYU",S),MGR1:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR1",S),MGR2:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR2",S),MGR3:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.MGR3",S),HLOC:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.HLOC",S),PCNM:t(p(V,"DiceTable"),"D66Table").$from_i18n("LogHorizon.table.PCNM",S)})},M.$$arity=1)}(e.get_singleton_class(b),l),e.const_set(l[0],"TABLES",b.$translate_tables("ja_jp")),void b.$register_prefix(p(l,"TABLES").$keys())},J=[],z=(e=Opal).$$,u=e.module,ne=e.klass,c=e.send2,e.top.$require("bcdice/game_system/LogHorizon"),n=J,B=p=[u(J[0],"BCDice")].concat(n),E=a=[u(p[0],"GameSystem")].concat(B),X=[g=ne(a[0],z(a,"LogHorizon"),"LogHorizon_Korean")].concat(E),e.const_set(X[0],"ID","LogHorizon:Korean"),e.const_set(X[0],"NAME","\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),e.const_set(X[0],"SORT_KEY","\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c"),e.const_set(X[0],"HELP_MESSAGE","\u25a0 \ud310\uc815(xLH\xb1y>=z)\n\u3000xD6\uc758 \ud310\uc815.\ud06c\ub9ac\ud2f0\uceec, \ud38c\ube14\uc758 \uc790\ub3d9 \ud310\uc815\uc744 \uc2e4\uc2dc\ud569\ub2c8\ub2e4.\n\u3000x\uff1ax\ub85c \uad74\ub9b4 \uc8fc\uc0ac\uc704\uc758 \uc218\ub97c \uc785\ub825\ud569\ub2c8\ub2e4.\n\u3000\xb1y\uff1ay\ub85c \uc218\uc815\uce58\ub97c \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n  >=z\uff1az\ub85c \ubaa9\ud45c\uac12\uc744 \uc785\ub825\ud569\ub2c8\ub2e4. \xb1\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 3LH\u30002LH>=8\u30003LH+1>=10\n\n\u25a0 \uc18c\ubaa8\ud45c(tCTx\xb1y$z)\n\u3000PCT \uccb4\ub825\uff0fECT \uae30\ub825\uff0fGCT \ubb3c\ud488\uff0fCCT \uae08\uc804\n\u3000x:CR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\u3000\xb1y:\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$z\uff1a$\ub97c \ubd99\uc774\uba74 \uc8fc\uc0ac\uc704 \ub208\uc744 z\uace0\uc815\ud569\ub2c8\ub2e4. \ud45c\uc758 \ud2b9\uc815 \uac12 \ucc38\uc870\uc6a9\uc73c\ub85c \uc0ac\uc6a9\ud558\uba70.\uc0dd\ub7b5 \uac00\ub2a5.\n\u3000\u4f8b\uff09 PCT1\u3000ECT2+1\u3000GCT3-1\u3000CCT3$5\n\n\u25a0 \u6d88\u8017\u8868\u30ed\u30fc\u30eb (CTx\xb1y)\n\u3000\u6d88\u8017\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u6307\u5b9a\u3067\u304d\u307e\u3059\u304c\u3001\u7121\u8996\u3055\u308c\u307e\u3059\u3002\u7701\u7565\u53ef\u80fd\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc7ac\ubb3c\ud45c(tTRSx\xb1y$)\n\u3000CTRS \uae08\uc804\uff0fMTRS \ub9c8\ubc95\uc18c\uc7ac\uff0fITRS \ud658\uc804 \uc544\uc774\ud15c\uff0f\u203bHTRS \ud788\ub85c\uc778\uff0fGTRS \uace0\ube14\ub9b0 \uc7ac\ubcf4\ud45c\n\u3000x\uff1aCR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc0dd\ub7b5\uc2dc\uc5d0\ub294 \ub2e4\uc774\uce58 0\uace0\uc815\uc73c\ub85c \uc218\uc815\uce58\uc758 \ud45c\ub97c \ucc38\uc870.\u300a\uace8\ub4dc \ud551\uac70\u300b\uc0ac\uc6a9 \uc2dc \ub4f1.\n\u3000\xb1y\uff1a\uc218\uc815\uce58, \uff0b\uc640 \uff0d\uc758 \uacc4\uc0b0\uc5d0 \ub300\uc751\ud558\uba70 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000$\uff1a\uff04\uc744 \ubd99\uc774\uba74 \uc7ac\ubb3c\ud45c\uc758 \ub2e4\uc774\uc2a4\ub97c 7\ub85c \uace0\uc815\ud569\ub2c8\ub2e4.\uff081\ucc28 \ubd84\ub7c9\uc758 \ud504\ub77c\uc774\uc988 \uc6a9\ub3c4\uff09\uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000\uc608\uc2dc\uff09 CTRS1\u3000MTRS2+1\u3000ITRS3-1\u3000ITRS+27\u3000CTRS3$\n\n\u25a0 \u8ca1\u5b9d\u8868\uff08\u62e1\u5f35\u30eb\u30fc\u30eb\u30d6\u30c3\u30af\uff09 (tTRSEx\xb1y$)\n\u3000LHZB2\u8a18\u8f09\u306e\u8ca1\u5b9d\u8868\n\u3000CTRSE \u91d1\u92ad\uff0fMTRSE \u9b54\u6cd5\u7d20\u6750\uff0fITRSE \u63db\u91d1\u30a2\u30a4\u30c6\u30e0\uff0fOTRSE \u305d\u306e\u307b\u304b\n\u3000\u8a18\u6cd5\u306f\u8ca1\u5b9d\u8868\u3068\u540c\u69d8\n\n\u25a0 \u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb (TRSx\xb1y)\n\u3000\u8ca1\u5b9d\u8868\u30ed\u30fc\u30eb\u3092\u884c\u3044\u3001\u51fa\u76ee\u3092\u6c7a\u5b9a\u3059\u308b\u3002\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306fCR 0\u3068\u3057\u3066\u6271\u3046\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\n\u25a0 \uc774\uc2a4\ud0c8 \ud0d0\uc0c9\ud45c (ESTLx\xb1y$z)\n\u3000x\uff1aCR\u3092\u6307\u5b9a\u3002\u7701\u7565\u6642\u306f\u30c0\u30a4\u30b9\u5024 0 \u56fa\u5b9a\u3067\u4fee\u6b63\u5024\u306e\u8868\u53c2\u7167\u3002\n\u3000\xb1y\uff1a\u4fee\u6b63\u5024\u3002\uff0b\u3068\uff0d\u306e\u8a08\u7b97\u306b\u5bfe\u5fdc\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000$z\uff1a\uff04\u3092\u4ed8\u3051\u308b\u3068\u30c0\u30a4\u30b9\u76ee\u3092 z \u56fa\u5b9a\u3002\u7279\u5b9aCR\u306e\u8868\u53c2\u7167\u7528\u306b\u3002\u7701\u7565\u53ef\u80fd\u3002\n\u3000\u4f8b\uff09 ESTL1\u3000ESTL+15\u3000ESTL2+1$5\u3000ESTL2-1$5\n\n\u25a0 \ud504\ub9ac\ud53d\uc2a4\ub4dc \ub9e4\uc9c1\uc544\uc774\ud15c \ud6a8\uacfc \ud45c(MGRx)\n\u3000x\ub294 MG\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.\n\n\u25a0 \uc545\uae30 \uc885\ub958 \ud45c\u2020 (MIIx)\n\u3000x\ub294 \uc545\uae30\uc758 \uc885\ub958\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.(1~6\ub97c \uc9c0\uc815) \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u30001 \ud0c0\uc545\uae301\uff0f2 \uac74\ubc18\uc545\uae30\uff0f3 \ud604\uc545\uae301\uff0f4 \ud604\uc545\uae302\uff0f5 \uad00\uc545\uae301\uff0f6 \uad00\uc545\uae302\n\n\u25a0 \ud2b9\uc218 \uc18c\ubaa8\ud45c\u2606 (tSCTx\xb1y$z)\n\u3000\uc18c\ubaa8\ud45c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \uc9c0\uc815\ud569\ub2c8\ub2e4. \ub2e4\ub9cc CR\uc740 \uc0dd\ub7b5\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.\n\u3000ESCT \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\ub294 \ud3ed\ubc1c\ud588\ub2e4!\uff0fCSCT \uc54c\ube0c\uc758 \uc800\uc8fc\ub2e4!\n\n\u25a0 \ub85c\ub370\ub9ad \uc5f0\uad6c\uc18c\uc758 \uc0c8\ub85c\uc6b4 \ubc1c\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (IATt)\n\u3000IATA \ud2b9\uc9d5A(\uc7a5\uc810)\uff0fIATB \ud2b9\uc9d5B(\ub2e8\uc810)\uff0fIATL \uc678\ud615\uff0fIATT \uc885\ub958\n\u3000t\ub97c \uc0dd\ub7b5\ud560 \uacbd\uc6b0 \ubaa8\ub450 \ud45c\uc2dc\ud569\ub2c8\ub2e4. t\uc5d0 A/B/L/T\ub97c \uc784\uc758\uc758 \uc21c\uc11c\ub85c \uc5f0\uacb0 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\n\u3000\u4f8b\uff09IAT\u3000IATALT  IATABBLT  IATABL\n\n\u25a0 \ud45c\n\u3000\u30fb\ud37c\uc2a4\ub110\ub9ac\ud2f0 \ud0dc\uadf8 \ud45c (PTAG)\n\u3000\u30fb\uad50\uc6b0\ud45c (KOYU)\n\u3000\u30fb\uacf5\uaca9 \uba85\uc911 \uc7a5\uc18c \ub79c\ub364 \uacb0\uc815\ud45c\u203b (HLOC)\n\u3000\u30fbPC\uba85 \ub79c\ub364 \uacb0\uc815\ud45c\u203b (PCNM)\n\u3000\u30fb\uc544\ud0a4\ubc14 \uac70\ub9ac\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ubb38\uc81c \ub79c\ub364\uacb0\uc815 \ud45c\u203b (TIAS)\n\u3000\u30fb\ubc84\ub824\uc9c4 \uc544\uc774 \ub79c\ub364 \uacb0\uc815 \ud45c\u203b (ABDC)\n\n\u2020\ud45c\uc2dc\uc640 \u2606\ud45c\uc2dc\ub294\u300c\uc778\ud22c\u30fb\ub354\u30fb\uc140\ub374\uc2dc\uc544 \uc0c8\ub85c\uc6b4 \ube4c\ub4dc\uc758 \ub0a0\uac1c\uc9d3(1)\u300d\uc5d0\uc11c\u3001\n\u2606\ud45c\uc2dc\ub294 \uc140\ub374\uc2dc\uc544\u30fb\uac00\uc81c\ud2b8\u300cD \ub418\uae30\ub294 \ud560\uae4c? 66\u300dVol.1\uc5d0\uc11c\u3001\n\u203b\ud45c\uc2dc\ub294\u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc5d0\uc11c \ucc38\uc870\ud588\uc2b5\ub2c8\ub2e4. \uc774\uc6a9\ubc95\uc740 \ud56d\ubaa9\uc744 \ucc38\uc870\ud574\uc8fc\uc138\uc694.\n\u30fbD66\ub2e4\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n\u30fb\uc5ed\uc790\uc758 \ub9d0 : \u300c\uc2e4\ub85d\u30fb\uce60\uba74\uccb4\uacf5\ubc29 \uc88c\ub2f4\ud68c(\uc5ec\ub984\uc758 \uc7a5)\u300d\uc740 \ud55c\uad6d\uc5d0\uc11c \ubc1c\ub9e4\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ucc38\uace0\ud574\uc8fc\uc138\uc694.\n\u30fb\uc774\ub2c8\ud2f0\uc6c0\ub2d8, \uad11\ud669\ub2d8, CoC\ubc29 \uc5ec\ub7ec\ubd84 \uac10\uc0ac\ud569\ub2c8\ub2e4. by\ud638\ud761\ub3c4\uc758\uc2dd\ud558\uba74\uadc0\ucc2e\uc544\n"),g.$register_prefix_from_super_class(),e.def(g,"$initialize",q=function(f){var _=this;return q.$$p&&(q.$$p=null),c(_,e.find_super_dispatcher(_,"initialize",q,!1,!0),"initialize",[f],null),_.locale="ko_kr"},q.$$arity=1),e.const_set(X[0],"TABLES",g.$translate_tables("ko_kr"))}}]);